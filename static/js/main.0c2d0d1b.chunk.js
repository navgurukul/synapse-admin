(this["webpackJsonpnavgurukul-admin"]=this["webpackJsonpnavgurukul-admin"]||[]).push([[0],{375:function(e,a,t){e.exports=t(514)},514:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),s=t(18),o=t.n(s),i=t(275),c=t(609),l=t(608),u=t(177),m=t(82),d={login:function(e){var a=e.base_url,t=e.username,r=e.password;console.log("login ");var n={method:"POST",body:JSON.stringify({type:"m.login.password",user:t,password:r})};localStorage.setItem("base_url",a);var s=window.decodeURIComponent(a)+"/_matrix/client/r0/login";return m.a.fetchJson(s,n).then((function(e){var a=e.json;localStorage.setItem("home_server",a.home_server),localStorage.setItem("user_id",a.user_id),localStorage.setItem("access_token",a.access_token),localStorage.setItem("device_id",a.device_id)}))},logout:function(){return console.log("logout "),localStorage.removeItem("access_token"),Promise.resolve()},checkError:function(e){var a=e.status;return console.log("checkError "+a),401===a||403===a?Promise.reject():Promise.resolve()},checkAuth:function(){var e=localStorage.getItem("access_token");return console.log("checkAuth "+e),"string"==typeof e?Promise.resolve():Promise.reject()},getPermissions:function(){return Promise.resolve()}},b=t(22),v=t(77),p=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=localStorage.getItem("access_token");return console.log("httpClient "+e),null!=t&&(a.user={authenticated:!0,token:"Bearer ".concat(t)}),m.a.fetchJson(e,a)},f=function(e,a){return e.indexOf("navgurukul.org")>-1?e:"users"===a||"connections"===a?"@"+e+":navgurukul.org":"rooms"===a?"#"+e+":navgurukul.org":e},g=function(e){var a=localStorage.getItem("base_url"),t=/^mxc:\/\/([^/]+)\/(\w+)/.exec(e);if(console.log("mxcClient "+t),null==t)return null;var r=t[1],n=t[2];return"".concat(a,"/_matrix/media/r0/thumbnail/").concat(r,"/").concat(n,"?width=24&height=24&method=scale")},h={users:{path:"/_synapse/admin/v2/users",map:function(e){return Object(b.a)(Object(b.a)({},e),{},{id:e.name.split(":")[0].slice(1),avatar_src:g(e.avatar_url),is_guest:!!e.is_guest,admin:!!e.admin,deactivated:!!e.deactivated,creation_ts_ms:1e3*e.creation_ts})},data:"users",total:function(e){return e.total},create:function(e){return{endpoint:"/_synapse/admin/v2/users/".concat(e.id),body:e,method:"PUT"}},delete:function(e){return{endpoint:"/_synapse/admin/v1/deactivate/".concat(f(e,"users")),body:{erase:!0,id:e},method:"POST"}}},rooms:{path:"/_synapse/admin/v1/rooms",map:function(e){return Object(b.a)(Object(b.a)({},e),{},{id:e.room_id,alias:e.canonical_alias,members:e.joined_members,is_encrypted:!!e.encryption,federatable:!!e.federatable,public:!!e.public})},data:"rooms",total:function(e){return e.total_rooms}},devices:{map:function(e){return Object(b.a)(Object(b.a)({},e),{},{id:e.device_id})},data:"devices",reference:function(e){return{endpoint:"/_synapse/admin/v2/users/".concat(e,"/devices")}}},connections:{path:"/_synapse/admin/v1/whois",map:function(e){return Object(b.a)(Object(b.a)({},e),{},{id:f(e.user_id)})},data:"connections"},servernotices:{map:function(e){return{id:e.event_id}},create:function(e){return{endpoint:"/_synapse/admin/v1/send_server_notice",body:{user_id:e.id,content:{msgtype:"m.text",body:e.body}},method:"POST"}}}};function _(e,a){if(null!==a)return a}function E(e){return"DESC"===e?"b":"f"}var y={getList:function(e,a){console.log("getList "+e);var t=a.filter,r=t.user_id,n=t.guests,s=t.deactivated,o=a.pagination,i=o.page,c=o.perPage,l=a.sort,u=l.field,m=l.order,d=(i-1)*c,b={from:d,limit:c,user_id:r,guests:n,deactivated:s,order_by:u,dir:E(m)},f=localStorage.getItem("base_url");if(!f||!(e in h))return Promise.reject();var g=h[e],_=f+g.path,y="".concat(_,"?").concat(Object(v.stringify)(b));return p(y).then((function(e){var a=e.json;return{data:a[g.data].map(g.map),total:g.total(a,d,c)}}))},getOne:function(e,a){console.log("getOne "+e);var t=localStorage.getItem("base_url");if(!t||!(e in h))return Promise.reject();var r=h[e];a.id=f(a.id,e);var n=t+r.path;return p("".concat(n,"/").concat(a.id)).then((function(e){var a=e.json;return{data:r.map(a)}}))},getMany:function(e,a){console.log("getMany "+e);var t=localStorage.getItem("base_url");if(!t||!(e in h))return Promise.reject();var r=h[e],n=t+r.path;return Promise.all(a.ids.map((function(a){return console.log(a),p("".concat(n,"/").concat(f(a,e)))}))).then((function(e){return{data:e.map((function(e){var a=e.json;return r.map(a)}))}}))},getManyReference:function(e,a){console.log("getManyReference "+e);var t=localStorage.getItem("base_url");if(!t||!(e in h))return Promise.reject();var r=h[e],n=t+r.reference(a.id).endpoint;return p(n).then((function(e){e.headers;return{data:e.json[r.data].map(r.map)}}))},update:function(e,a){console.log("update "+e);var t=localStorage.getItem("base_url");if(!t||!(e in h))return Promise.reject();var r=h[e],n=t+r.path;return p("".concat(n,"/").concat(f(a.data.id,e)),{method:"PUT",body:JSON.stringify(a.data,_)}).then((function(e){var a=e.json;return{data:r.map(a)}}))},updateMany:function(e,a){console.log("updateMany "+e);var t=localStorage.getItem("base_url");if(!t||!(e in h))return Promise.reject();var r=t+h[e].path;return Promise.all(a.ids.map((function(a){return p("".concat(r,"/").concat(f(a,e)))}),{method:"PUT",body:JSON.stringify(a.data,_)})).then((function(e){return{data:e.map((function(e){return e.json}))}}))},create:function(e,a){console.log("create "+e);var t=localStorage.getItem("base_url");if(!t||!(e in h))return Promise.reject();var r=h[e];if(!("create"in r))return Promise.reject();a.data.id=f(a.data.id,e),a.data.threepids=[],a.data.email&&a.data.threepids.push({medium:"email",address:a.data.email}),a.data.msisdn&&a.data.threepids.push({medium:"msisdn",address:a.data.msisdn});var n=r.create(a.data),s=t+n.endpoint;return p(s,{method:n.method,body:JSON.stringify(n.body,_)}).then((function(e){var a=e.json;return{data:r.map(a)}}))},createMany:function(e,a){console.log("createMany "+e);var t=localStorage.getItem("base_url");if(!t||!(e in h))return Promise.reject();var r=h[e];return"create"in r?Promise.all(a.ids.map((function(e){a.data.id=e;var n=r.create(a.data),s=t+n.endpoint;return p(s,{method:n.method,body:JSON.stringify(n.body,_)})}))).then((function(e){return{data:e.map((function(e){return e.json}))}})):Promise.reject()},delete:function(e,a){console.log("delete "+e);var t=localStorage.getItem("base_url");if(!t||!(e in h))return Promise.reject();var r=h[e];if("delete"in r){var n=r.delete(a.id),s=t+n.endpoint;return console.log(23,n.body),p(s,{method:n.method,body:JSON.stringify(n.body)}).then((function(e){return{data:e.json}}))}console.log(12,a);var o=t+r.path;return p("".concat(o,"/").concat(a.id),{method:"DELETE",body:JSON.stringify(a.data,_)}).then((function(e){return{data:e.json}}))},deleteMany:function(e,a){console.log("deleteMany "+e,a);var t=localStorage.getItem("base_url");if(!t||!(e in h))return Promise.reject();var r=h[e];if("delete"in r)return Promise.all(a.ids.map((function(e){var a=r.delete(e),n=t+a.endpoint;return console.log(n),p(n,{method:a.method,body:JSON.stringify(a.body)})}))).then((function(e){return{data:e.map((function(e){return e.json}))}}));var n=t+r.path;return console.log(n),Promise.all(a.ids.map((function(t){return console.log(t),p("".concat(n,"/").concat(f(t,e)),{method:"DELETE",body:JSON.stringify(a.data,_)})}))).then((function(e){return{data:e.map((function(e){return e.json}))}}))}},j=t(181),O=t(624),S=t(303),w=t.n(S),k=t(304),P=t.n(k),A=t(307),I=t.n(A),N=t(308),x=t.n(N),z=t(85),D=t(621),C=t(626),M=t(627),B=t(328),R=t(616),T=t(617),V=t(35),F=t(330),L=t(612),U=t(610),G=t(592),J=t(593),Z=t(167),W=t(182),H=t(576),q=t(615),$=t(628),K=t(625),Q=t(291),X=t(595),Y=t(618),ee=t(629),ae=t(599),te=t(600),re=t(623),ne=t(619),se=t(601),oe=t(620),ie=t(614),ce=t(602),le=t(92),ue=t(29),me=t(213),de=t(260),be=t(580),ve=t(71),pe=t(218),fe=t.n(pe),ge=t(289),he=t.n(ge),_e=t(582),Ee=t(584),ye=t(585),je=t(583),Oe=function(e){var a=e.open,t=e.loading,r=e.onClose,s=e.onSend,o=Object(V.a)(),i=function(e){return n.a.createElement(W.a,e,n.a.createElement(H.a,{label:"resources.servernotices.action.send"}),n.a.createElement(ue.a,{label:"ra.action.cancel",onClick:r},n.a.createElement(he.a,null)))};return n.a.createElement(_e.a,{open:a,onClose:r,loading:t},n.a.createElement(je.a,null,o("resources.servernotices.action.send")),n.a.createElement(Ee.a,null,n.a.createElement(ye.a,null,o("resources.servernotices.helper.send")),n.a.createElement(K.a,{toolbar:n.a.createElement(i,null),submitOnEnter:!1,redirect:!1,save:s},n.a.createElement(Q.a,{source:"body",label:"resources.servernotices.fields.body",fullWidth:!0,multiline:!0,rows:"4",resettable:!0,validate:Object(Z.c)()}))))},Se=function(e){var a=e.record,t=Object(r.useState)(!1),s=Object(le.a)(t,2),o=s[0],i=s[1],c=Object(me.a)(),l=Object(de.a)("servernotices"),u=Object(le.a)(l,2),m=u[0],d=u[1].loading,v=function(){return i(!1)};return n.a.createElement(r.Fragment,null,n.a.createElement(ue.a,{label:"resources.servernotices.send",onClick:function(){return i(!0)},disabled:d},n.a.createElement(fe.a,null)),n.a.createElement(Oe,{open:o,onClose:v,onSend:function(e){m({payload:{data:Object(b.a)({id:a.id},e)}},{onSuccess:function(){c("resources.servernotices.action.send_success"),v()},onFailure:function(){return c("resources.servernotices.action.send_failure","error")}})}}))},we=function(e){var a=e.selectedIds,t=Object(r.useState)(!1),s=Object(le.a)(t,2),o=s[0],i=s[1],c=Object(me.a)(),l=Object(be.a)(),u=Object(ve.a)(),m=Object(le.a)(u,2),d=m[0],b=m[1].loading,v=function(){return i(!1)};return n.a.createElement(r.Fragment,null,n.a.createElement(ue.a,{label:"resources.servernotices.send",onClick:function(){return i(!0)},disabled:b},n.a.createElement(fe.a,null)),n.a.createElement(Oe,{open:o,onClose:v,onSend:function(e){d({type:"createMany",resource:"servernotices",payload:{ids:a,data:e}},{onSuccess:function(e){e.data;c("resources.servernotices.action.send_success"),l("users"),v()},onFailure:function(e){return c("resources.servernotices.action.send_failure","error")}})}}))},ke=t(93),Pe=Object(ke.a)({small:{height:"40px",width:"40px"},large:{height:"120px",width:"120px",float:"right"}}),Ae=function(e){var a=e.currentSort,t=e.className,s=e.resource,o=e.filters,i=e.displayedFilters,c=e.exporter,l=e.filterValues,u=e.permanentFilter,m=(e.hasCreate,e.basePath),d=(e.selectedIds,e.onUnselectItems,e.showFilter),v=e.maxResults,p=e.total,f=Object(j.a)(e,["currentSort","className","resource","filters","displayedFilters","exporter","filterValues","permanentFilter","hasCreate","basePath","selectedIds","onUnselectItems","showFilter","maxResults","total"]);return n.a.createElement(z.a,Object.assign({className:t},Object(D.c)(f)),o&&Object(r.cloneElement)(o,{resource:s,showFilter:d,displayedFilters:i,filterValues:l,context:"button"}),n.a.createElement(C.a,{basePath:m}),n.a.createElement(M.a,{disabled:0===p,resource:s,sort:a,filter:Object(b.a)(Object(b.a)({},l),u),exporter:c,maxResults:v}))},Ie=function(e){return n.a.createElement(B.a,Object.assign({},e,{rowsPerPageOptions:[10,25,50,100,500,1e3]}))},Ne=function(e){return n.a.createElement(R.a,e,n.a.createElement(T.a,{source:"guests",alwaysOn:!0}),n.a.createElement(T.a,{label:"resources.users.fields.show_deactivated",source:"deactivated",alwaysOn:!0}))},xe=function(e){var a=Object(V.a)();return n.a.createElement(r.Fragment,null,n.a.createElement(we,e),n.a.createElement(F.a,Object.assign({},e,{label:"resources.users.action.erase",title:a("resources.users.helper.erase")})))},ze=function(e){var a=e.source,t=e.className,r=e.record,s=void 0===r?{}:r;return n.a.createElement(O.a,{src:s[a],className:t})},De=function(e){var a=Pe();return n.a.createElement(L.a,Object.assign({},e,{filters:n.a.createElement(Ne,null),filterDefaultValues:{guests:!0,deactivated:!1},actions:n.a.createElement(Ae,{maxResults:1e4}),bulkActionButtons:n.a.createElement(xe,null),pagination:n.a.createElement(Ie,null)}),n.a.createElement(U.a,{rowClick:"edit"},n.a.createElement(ze,{source:"avatar_src",sortable:!1,className:a.small}),n.a.createElement(G.a,{source:"id",sortable:!1}),n.a.createElement(G.a,{source:"displayname",sortable:!1}),n.a.createElement(J.a,{source:"is_guest",sortable:!1}),n.a.createElement(J.a,{source:"admin",sortable:!1}),n.a.createElement(J.a,{source:"deactivated",sortable:!1})))},Ce=Object(Z.b)(/^[a-z0-9._=\-/][a-z0-9._=\-/][a-z0-9._=\-/][a-z0-9._=\-/][a-z0-9._=\-/]+/,"synapseadmin.users.invalid_user_id"),Me=Object(Z.b)(/^[a-zA-Z0-9.!#$%&\u2019*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+\.+([a-zA-Z0-9-][a-zA-Z0-9-]+)*$/,"Enter Proper Email Address"),Be=function(e){var a=Object(V.a)();return n.a.createElement(W.a,e,n.a.createElement(H.a,{submitOnEnter:!0}),n.a.createElement(q.a,{label:"resources.users.action.erase",title:a("resources.users.helper.erase")}),n.a.createElement(Se,null))},Re=function(e){return n.a.createElement($.a,e,n.a.createElement(K.a,null,n.a.createElement(Q.a,{source:"id",autoComplete:"off",validate:Ce}),n.a.createElement(Q.a,{source:"displayname"}),n.a.createElement(X.a,{source:"password",autoComplete:"new-password"}),n.a.createElement(T.a,{source:"admin"}),n.a.createElement(Q.a,{source:"email",autoComplete:"off",validate:Me}),n.a.createElement(Q.a,{source:"msisdn",autoComplete:"off"})))},Te=function(e){var a=e.record,t=Object(V.a)();return n.a.createElement("span",null,t("resources.users.name",{smart_count:1})," ",a?'"'.concat(a.displayname,'"'):"")},Ve=function(e){var a=Pe(),t=Object(V.a)();return n.a.createElement(Y.a,Object.assign({},e,{title:n.a.createElement(Te,null)}),n.a.createElement(ee.a,{toolbar:n.a.createElement(Be,null)},n.a.createElement(ae.a,{label:"resources.users.name",icon:n.a.createElement(w.a,null)},n.a.createElement(ze,{source:"avatar_src",sortable:!1,className:a.large}),n.a.createElement(Q.a,{source:"id",disabled:!0}),n.a.createElement(Q.a,{source:"displayname"}),n.a.createElement(X.a,{source:"password",autoComplete:"new-password"}),n.a.createElement(T.a,{source:"admin"}),n.a.createElement(T.a,{source:"deactivated",helperText:"resources.users.helper.deactivate"}),n.a.createElement(te.a,{source:"creation_ts_ms",showTime:!0,options:{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}}),n.a.createElement(G.a,{source:"consent_version"})),n.a.createElement(ae.a,{label:"resources.users.threepid",icon:n.a.createElement(P.a,null),path:"threepid"},n.a.createElement(re.a,{source:"threepids"},n.a.createElement(ne.a,null,n.a.createElement(se.a,{source:"medium",choices:[{id:"email",name:"resources.users.email"},{id:"msisdn",name:"resources.users.msisdn"}],key:"SelectInput"}),n.a.createElement(Q.a,{source:"address",key:"TextInput"})))),n.a.createElement(ae.a,{label:t("resources.devices.name",{smart_count:2}),icon:n.a.createElement(I.a,null),path:"devices"},n.a.createElement(oe.a,{reference:"devices",target:"user_id",addLabel:!1},n.a.createElement(U.a,{style:{width:"100%"}},n.a.createElement(G.a,{source:"device_id",sortable:!1}),n.a.createElement(G.a,{source:"display_name",sortable:!1}),n.a.createElement(G.a,{source:"last_seen_ip",sortable:!1}),n.a.createElement(te.a,{source:"last_seen_ts",showTime:!0,options:{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"},sortable:!1})))),n.a.createElement(ae.a,{label:"resources.connections.name",icon:n.a.createElement(x.a,null),path:"connections"},n.a.createElement(ie.a,{reference:"connections",source:"id",addLabel:!1,link:!1},n.a.createElement(ce.a,{source:"devices[].sessions[0].connections",label:"resources.connections.name"},n.a.createElement(U.a,{style:{width:"100%"}},n.a.createElement(G.a,{source:"ip",sortable:!1}),n.a.createElement(te.a,{source:"last_seen",showTime:!0,options:{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"},sortable:!1}),n.a.createElement(G.a,{source:"user_agent",sortable:!1,style:{width:"100%"}})))))))},Fe=t(8),Le=t(622),Ue=t(630),Ge=t(603),Je=t(604),Ze=t(11),We=t.n(Ze),He=t(47),qe=t(341),$e=t(631),Ke=t(224),Qe=t.n(Ke),Xe=t(312),Ye=t.n(Xe),ea=t(314),aa=t.n(ea),ta=t(115),ra=t.n(ta),na=t(174),sa=t.n(na),oa=function(e){return n.a.createElement(B.a,Object.assign({},e,{rowsPerPageOptions:[10,25,50,100,500,1e3]}))},ia=function(e){var a=e.source,t=e.record,r=void 0===t?{}:t,s=e.emptyText,o=Object(V.a)(),i=We()(r,a),c=!1===i?"ra.boolean.false":"ra.boolean.true";return!1===i||!0===i?n.a.createElement(He.a,{component:"span",variant:"body2"},n.a.createElement(qe.a,{title:o(c,{_:c})},!0===i?n.a.createElement(Qe.a,{"data-testid":"true",htmlColor:"limegreen"}):n.a.createElement(Ye.a,{"data-testid":"false",color:"error"}))):n.a.createElement(He.a,{component:"span",variant:"body2"},s)},ca=function(e){var a=e.record,t=Object(V.a)(),r="";return a&&(r=""!==a.name?a.name:a.id),n.a.createElement("span",null,t("resources.rooms.name",1)," ",r)},la=function(e){var a=Object(V.a)();return n.a.createElement(Le.a,Object.assign({},e,{title:n.a.createElement(ca,null)}),n.a.createElement(Ue.a,null,n.a.createElement(Ge.a,{label:"synapseadmin.rooms.tabs.basic",icon:n.a.createElement(ra.a,null)},n.a.createElement(G.a,{source:"room_id"}),n.a.createElement(G.a,{source:"name"}),n.a.createElement(G.a,{source:"canonical_alias"}),n.a.createElement(G.a,{source:"creator"})),n.a.createElement(Ge.a,{label:"synapseadmin.rooms.tabs.detail",icon:n.a.createElement(aa.a,null),path:"detail"},n.a.createElement(G.a,{source:"joined_members"}),n.a.createElement(G.a,{source:"joined_local_members"}),n.a.createElement(G.a,{source:"state_events"}),n.a.createElement(G.a,{source:"version"}),n.a.createElement(G.a,{source:"encryption",emptyText:a("resources.rooms.enums.unencrypted")})),n.a.createElement(Ge.a,{label:"synapseadmin.rooms.tabs.permission",icon:n.a.createElement(sa.a,null),path:"permission"},n.a.createElement(J.a,{source:"federatable"}),n.a.createElement(J.a,{source:"public"}),n.a.createElement(Je.a,{source:"join_rules",choices:[{id:"public",name:"resources.rooms.enums.join_rules.public"},{id:"knock",name:"resources.rooms.enums.join_rules.knock"},{id:"invite",name:"resources.rooms.enums.join_rules.invite"},{id:"private",name:"resources.rooms.enums.join_rules.private"}]}),n.a.createElement(Je.a,{source:"guest_access",choices:[{id:"can_join",name:"resources.rooms.enums.guest_access.can_join"},{id:"forbidden",name:"resources.rooms.enums.guest_access.forbidden"}]}),n.a.createElement(Je.a,{source:"history_visibility",choices:[{id:"invited",name:"resources.rooms.enums.history_visibility.invited"},{id:"joined",name:"resources.rooms.enums.history_visibility.joined"},{id:"shared",name:"resources.rooms.enums.history_visibility.shared"},{id:"world_readable",name:"resources.rooms.enums.history_visibility.world_readable"}]}))))},ua=function(e){var a=Object.assign({},e),t=Object(V.a)();return n.a.createElement(R.a,a,n.a.createElement($e.a,{label:t("resources.rooms.fields.joined_local_members"),source:"joined_local_members",defaultValue:!1,style:{marginBottom:8}}),n.a.createElement($e.a,{label:t("resources.rooms.fields.state_events"),source:"state_events",defaultValue:!1,style:{marginBottom:8}}),n.a.createElement($e.a,{label:t("resources.rooms.fields.version"),source:"version",defaultValue:!1,style:{marginBottom:8}}),n.a.createElement($e.a,{label:t("resources.rooms.fields.federatable"),source:"federatable",defaultValue:!1,style:{marginBottom:8}}))};var ma=Object(Fe.c)((function(e){return{roomfilters:e.admin.resources.rooms.list.params.displayedFilters}}))((function(e){var a=Object.assign({},e),t=a.roomfilters,r=!(!t||!t.joined_local_members),s=!(!t||!t.state_events),o=!(!t||!t.version),i=!(!t||!t.federatable);return n.a.createElement(L.a,Object.assign({},a,{pagination:n.a.createElement(oa,null),sort:{field:"name",order:"ASC"},filters:n.a.createElement(ua,null)}),n.a.createElement(U.a,{rowClick:"show"},n.a.createElement(ia,{source:"is_encrypted",sortBy:"encryption",label:n.a.createElement(Qe.a,null)}),n.a.createElement(G.a,{source:"name"}),n.a.createElement(G.a,{source:"joined_members"}),r&&n.a.createElement(G.a,{source:"joined_local_members"}),s&&n.a.createElement(G.a,{source:"state_events"}),o&&n.a.createElement(G.a,{source:"version"}),i&&n.a.createElement(J.a,{source:"federatable"}),n.a.createElement(J.a,{source:"public"})))})),da=t(605),ba=t(606),va=t(180),pa=t(23),fa=t(521),ga=t(591),ha=t(607),_a=t(334),Ea=t(518),ya=t(175),ja=t.n(ya),Oa=Object(ke.a)((function(e){return{main:{display:"flex",flexDirection:"column",minHeight:"calc(100vh - 1em)",alignItems:"center",justifyContent:"flex-start",background:"url(./images/floating-cogs.svg)",backgroundColor:"#f9f9f9",backgroundRepeat:"no-repeat",backgroundSize:"cover"},card:{minWidth:"30em",marginTop:"6em",marginBottom:"6em"},avatar:{margin:"1em",display:"flex",justifyContent:"center"},icon:{backgroundColor:e.palette.secondary.main},hint:{marginTop:"1em",display:"flex",justifyContent:"center",color:e.palette.grey[500]},form:{padding:"0 1em 1em 1em"},input:{marginTop:"1em"},actions:{padding:"0 1em 1em 1em"},serverVersion:{color:"#9e9e9e",fontFamily:"Roboto, Helvetica, Arial, sans-serif",marginBottom:"1em",marginLeft:"0.5em"}}})),Sa=function(e){var a=e.theme,t=Oa({theme:a}),s=Object(da.a)(),o=Object(me.a)(),i=Object(r.useState)(!1),c=Object(le.a)(i,2),l=c[0],u=c[1],d=Object(V.a)(),b=function(e){var a=e.meta,t=(a=void 0===a?{}:a).touched,r=a.error,s=Object.assign({},e.input),o=Object(j.a)(e,["meta","input"]);return n.a.createElement(fa.a,Object.assign({error:!(!t||!r),helperText:t&&r},s,o,{fullWidth:!0}))},v=function(e){var a=e.formData,s=Object(pa.e)(),o=Object(r.useState)(""),i=Object(le.a)(o,2),c=i[0],u=i[1];return Object(r.useEffect)((function(e){if(a.base_url&&a.base_url.match(/^(http|https):\/\/[a-zA-Z0-9\-.]+$/)){var t="".concat(a.base_url,"/_synapse/admin/v1/server_version");m.a.fetchJson(t,{method:"GET"}).then((function(e){var a=e.json;u("".concat(d("synapseadmin.auth.server_version")," ").concat(a.server_version))})).catch((function(e){u("")}))}}),[a.base_url]),n.a.createElement("div",null,n.a.createElement("div",{className:t.input},n.a.createElement(Q.a,{autoFocus:!0,name:"username",component:b,label:d("ra.auth.username"),disabled:l,onBlur:function(e){if(!a.base_url){var t=function(e){if(!e)return null;var a=e.match(/@[a-zA-Z0-9._=\-/]+:([a-zA-Z0-9\-.]+\.[a-zA-Z]+)/);return a?a[1]:null}(a.username),r="https://".concat(t,"/.well-known/matrix/client");t&&m.a.fetchJson(r,{method:"GET"}).then((function(e){var a=e.json;s.change("base_url",a["m.homeserver"].base_url)})).catch((function(e){s.change("base_url","https://".concat(t))}))}},fullWidth:!0})),n.a.createElement("div",{className:t.input},n.a.createElement(X.a,{name:"password",component:b,label:d("ra.auth.password"),type:"password",disabled:l,fullWidth:!0})),n.a.createElement("div",{className:t.input},n.a.createElement(Q.a,{name:"base_url",component:b,label:d("synapseadmin.auth.base_url"),disabled:l,fullWidth:!0})),n.a.createElement("div",{className:t.serverVersion},c))};return n.a.createElement(pa.b,{initialValues:{base_url:"https://m.navgurukul.org"},onSubmit:function(e){u(!0),s(e).catch((function(e){u(!1),o("string"===typeof e?e:"undefined"!==typeof e&&e.message?e.message:"ra.auth.sign_in_error","warning")}))},validate:function(e){var a={};return e.username||(a.username=d("ra.validation.required")),e.password||(a.password=d("ra.validation.required")),e.base_url?e.base_url.match(/^(http|https):\/\//)?e.base_url.match(/^(http|https):\/\/[a-zA-Z0-9\-.]+(:\d{1,5})?$/)||(a.base_url=d("synapseadmin.auth.url_error")):a.base_url=d("synapseadmin.auth.protocol_error"):a.base_url=d("ra.validation.required"),a},render:function(e){var a=e.handleSubmit;return n.a.createElement("form",{onSubmit:a,noValidate:!0},n.a.createElement("div",{className:t.main},n.a.createElement(ga.a,{className:t.card},n.a.createElement("div",{className:t.avatar},n.a.createElement(O.a,{className:t.icon},n.a.createElement(ja.a,null))),n.a.createElement("div",{className:t.hint},d("synapseadmin.auth.welcome")),n.a.createElement("div",{className:t.form},n.a.createElement(ba.a,null,(function(e){return n.a.createElement(v,e)}))),n.a.createElement(ha.a,{className:t.actions},n.a.createElement(_a.a,{variant:"contained",type:"submit",color:"primary",disabled:l,className:t.button,fullWidth:!0},l&&n.a.createElement(Ea.a,{size:25,thickness:2}),d("ra.auth.sign_in")))),n.a.createElement(va.a,null)))}})},wa=t(326),ka=t.n(wa),Pa=t(104),Aa=t.n(Pa),Ia=Object(b.a)(Object(b.a)({},Aa.a),{},{synapseadmin:{auth:{base_url:"Heimserver URL",welcome:"Willkommen bei Synapse-admin",server_version:"Synapse Version",username_error:"Bitte vollst\xe4ndigen Nutzernamen angeben: '@user:domain'",protocol_error:"Die URL muss mit 'http://' oder 'https://' beginnen",url_error:"Keine g\xfcltige Matrix Server URL"},users:{invalid_user_id:"Muss eine vollst\xe4ndige Matrix Benutzer-ID sein, z.B. @benutzer_id:homeserver"},rooms:{details:"Raumdetails",tabs:{basic:"Allgemein",members:"Mitglieder",detail:"Details",permission:"Berechtigungen"}}},resources:{users:{backtolist:"Zur\xfcck zur Liste",name:"Benutzer",email:"E-Mail",msisdn:"Telefon",threepid:"E-Mail / Telefon",fields:{avatar:"Avatar",id:"Benutzer-ID",name:"Name",is_guest:"Gast",admin:"Admin",deactivated:"Deaktiviert",guests:"Zeige G\xe4ste",show_deactivated:"Zeige deaktivierte Benutzer",user_id:"Suche Benutzer",displayname:"Anzeigename",password:"Passwort",avatar_url:"Avatar URL",avatar_src:"Avatar",medium:"Medium",threepids:"3PIDs",address:"Adresse",creation_ts_ms:"Zeitpunkt der Erstellung",consent_version:"Zugestimmte Gesch\xe4ftsbedingungen"},helper:{deactivate:"Deaktivierte Nutzer k\xf6nnen nicht wieder aktiviert werden.",erase:"DSGVO konformes L\xf6schen der Benutzerdaten"},action:{erase:"L\xf6sche Benutzerdaten"}},rooms:{name:"Raum |||| R\xe4ume",fields:{room_id:"Raum-ID",name:"Name",canonical_alias:"Alias",joined_members:"Mitglieder",joined_local_members:"Lokale Mitglieder",state_events:"Ereignisse",version:"Version",is_encrypted:"Verschl\xfcsselt",encryption:"Verschl\xfcsselungs-Algorithmus",federatable:"F\xf6\xadde\xadrierbar",public:"\xd6ffentlich",creator:"Ersteller",join_rules:"Beitrittsregeln",guest_access:"Gastzugriff",history_visibility:"Historie-Sichtbarkeit"},enums:{join_rules:{public:"\xd6ffentlich",knock:"Auf Anfrage",invite:"Nur auf Einladung",private:"Privat"},guest_access:{can_join:"G\xe4ste k\xf6nnen beitreten",forbidden:"G\xe4ste k\xf6nnen nicht beitreten"},history_visibility:{invited:"Ab Einladung",joined:"Ab Beitritt",shared:"Ab Setzen der Einstellung",world_readable:"Jeder"},unencrypted:"Nicht verschl\xfcsselt"}},connections:{name:"Verbindungen",fields:{last_seen:"Datum",ip:"IP-Adresse",user_agent:"User Agent"}},devices:{name:"Ger\xe4t |||| Ger\xe4te",fields:{device_id:"Ger\xe4te-ID",display_name:"Anzeigename",last_seen_ts:"Zeitstempel",last_seen_ip:"IP-Adresse"}},servernotices:{name:"Serverbenachrichtigungen",send:"Servernachricht versenden",fields:{body:"Nachricht"},action:{send:"Sende Nachricht",send_success:"Nachricht erfolgreich versendet.",send_failure:"Beim Versenden ist ein Fehler aufgetreten."},helper:{send:'Sendet eine Serverbenachrichtigung an die ausgew\xe4hlten Nutzer. Hierf\xfcr muss das Feature "Server Notices" auf dem Server aktiviert sein.'}}},ra:Object(b.a)(Object(b.a)({},Aa.a.ra),{},{auth:Object(b.a)(Object(b.a)({},Aa.a.ra.auth),{},{auth_check_error:"Anmeldung fehlgeschlagen"}),input:Object(b.a)(Object(b.a)({},Aa.a.ra.input),{},{password:Object(b.a)(Object(b.a)({},Aa.a.ra.input.password),{},{toggle_hidden:"Anzeigen",toggle_visible:"Verstecken"})}),notification:Object(b.a)(Object(b.a)({},Aa.a.ra.notifiaction),{},{logged_out:"Abgemeldet"})})}),Na=t(176),xa={de:Ia,en:Object(b.a)(Object(b.a)({},Na.a),{},{synapseadmin:{auth:{homeserver:"Homeserver",welcome:"Welcome to Navgurukul Admin",base_url:"Homeserver URL",username_error:"Please enter fully qualified user ID: '@user:domain'",protocol_error:"URL has to start with 'http://' or 'https://'",url_error:"Not a valid Matrix server URL"},users:{invalid_user_id:"Please enter a proper username."},rooms:{tabs:{basic:"Basic",members:"Members",detail:"Details",permission:"Permissions"}}},resources:{users:{backtolist:"Back to list",name:"User |||| Users",email:"Email",msisdn:"Phone",threepid:"Email / Phone",fields:{avatar:"Avatar",id:"User-ID",name:"Name",is_guest:"Guest",admin:"Admin",deactivated:"Deactivated",guests:"Show guests",show_deactivated:"Show deactivated members",user_id:"Search Member",displayname:"Displayname",password:"Password",avatar_url:"Avatar URL",avatar_src:"Avatar",medium:"Medium",threepids:"3PIDs",address:"Address",creation_ts_ms:"Creation timestamp",consent_version:"Consent version"},helper:{deactivate:"Deactivated members cannot be reactivated",erase:"Mark the member as GDPR-erased"},action:{erase:"Erase member data"}},rooms:{name:"Room |||| Rooms",fields:{room_id:"Room-ID",name:"Name",canonical_alias:"Alias",joined_members:"Members",joined_local_members:"local members",state_events:"State events",version:"Version",is_encrypted:"Encrypted",encryption:"Encryption",federatable:"Federatable",public:"Public",creator:"Creator",join_rules:"Join rules",guest_access:"Guest access",history_visibility:"History visibility"},enums:{join_rules:{public:"Public",knock:"Knock",invite:"Invite",private:"Private"},guest_access:{can_join:"Guests can join",forbidden:"Guests can not join"},history_visibility:{invited:"Since invited",joined:"Since joined",shared:"Since shared",world_readable:"Anyone"},unencrypted:"Unencrypted"}},connections:{name:"Connections",fields:{last_seen:"Date",ip:"IP address",user_agent:"User agent"}},devices:{name:"Device |||| Devices",fields:{device_id:"Device-ID",display_name:"Displayname",last_seen_ts:"Timestamp",last_seen_ip:"IP address"}},servernotices:{name:"Server Notices",send:"Send server notices",fields:{body:"Message"},action:{send:"Send note",send_success:"Server notice successfully sent.",send_failure:"An error has occurred."},helper:{send:'Sends a server notice to the selected users. The feature "Server Notices" has to be activated at the server.'}}}})},za=Object(u.a)((function(e){return xa[e]?xa[e]:xa.en}),Object(i.a)()),Da=function(){return n.a.createElement(c.a,{loginPage:Sa,authProvider:d,dataProvider:y,i18nProvider:za},n.a.createElement(l.a,{name:"users",list:De,create:Re,edit:Ve,icon:ka.a}),n.a.createElement(l.a,{name:"rooms",list:ma,show:la,icon:ta.ViewListIcon}),n.a.createElement(l.a,{name:"connections"}),n.a.createElement(l.a,{name:"devices"}),n.a.createElement(l.a,{name:"servernotices"}))};o.a.render(n.a.createElement(Da,null),document.getElementById("root"))}},[[375,1,2]]]);
//# sourceMappingURL=main.0c2d0d1b.chunk.js.map