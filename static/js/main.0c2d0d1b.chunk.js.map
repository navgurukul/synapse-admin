{"version":3,"sources":["synapse/authProvider.js","synapse/dataProvider.js","components/ServerNotices.js","components/users.js","components/rooms.js","components/LoginPage.js","i18n/de.js","App.js","i18n/en.js","index.js"],"names":["authProvider","login","base_url","username","password","console","log","options","method","body","JSON","stringify","type","user","localStorage","setItem","login_api_url","window","decodeURIComponent","fetchUtils","fetchJson","then","json","home_server","user_id","access_token","device_id","logout","removeItem","Promise","resolve","checkError","status","reject","checkAuth","getItem","getPermissions","jsonClient","url","token","authenticated","c_to_id","user_name","resource","indexOf","mxcUrlToHttp","mxcUrl","homeserver","ret","exec","serverName","mediaId","resourceMap","users","path","map","u","id","name","split","slice","avatar_src","avatar_url","is_guest","admin","deactivated","creation_ts_ms","creation_ts","data","total","create","endpoint","delete","erase","rooms","r","room_id","alias","canonical_alias","members","joined_members","is_encrypted","encryption","federatable","public","total_rooms","devices","d","reference","connections","c","servernotices","n","event_id","content","msgtype","filterNullValues","key","value","getSearchOrder","order","dataProvider","getList","params","filter","guests","pagination","page","perPage","sort","field","from","query","limit","order_by","dir","res","endpoint_url","getOne","getMany","all","ids","responses","getManyReference","headers","update","updateMany","threepids","email","push","msisdn","createMany","cre","del","deleteMany","ServerNoticeDialog","open","loading","onClose","onSend","translate","useTranslate","ServerNoticeToolbar","props","Toolbar","SaveButton","label","Button","onClick","Dialog","DialogTitle","DialogContent","DialogContentText","SimpleForm","toolbar","submitOnEnter","redirect","save","TextInput","source","fullWidth","multiline","rows","resettable","validate","required","ServerNoticeButton","record","useState","setOpen","notify","useNotify","useCreate","handleDialogClose","disabled","values","payload","onSuccess","onFailure","ServerNoticeBulkButton","selectedIds","unselectAll","useUnselectAll","useMutation","error","useStyles","makeStyles","small","height","width","large","float","UserListActions","currentSort","className","filters","displayedFilters","exporter","filterValues","permanentFilter","basePath","hasCreate","showFilter","onUnselectItems","maxResults","rest","TopToolbar","sanitizeListRestProps","cloneElement","context","CreateButton","ExportButton","UserPagination","Pagination","rowsPerPageOptions","UserFilter","Filter","BooleanInput","alwaysOn","UserBulkActionButtons","BulkDeleteButton","title","AvatarField","Avatar","src","UserList","classes","List","filterDefaultValues","actions","bulkActionButtons","Datagrid","rowClick","sortable","TextField","BooleanField","validateUser","regex","validateEmail","UserEditToolbar","DeleteButton","UserCreate","Create","autoComplete","PasswordInput","UserTitle","smart_count","displayname","UserEdit","Edit","TabbedForm","FormTab","icon","helperText","DateField","showTime","year","month","day","hour","minute","second","ArrayInput","SimpleFormIterator","SelectInput","choices","ReferenceManyField","target","addLabel","style","ReferenceField","link","ArrayField","RoomPagination","EncryptionField","emptyText","get","ariaLabel","Typography","component","variant","Tooltip","_","data-testid","htmlColor","color","RoomTitle","RoomShow","Show","TabbedShowLayout","Tab","SelectField","RoomFilter","Chip","defaultValue","marginBottom","RoomList","connect","state","roomfilters","resources","list","localMembersFilter","joined_local_members","stateEventsFilter","state_events","versionFilter","version","federateableFilter","sortBy","theme","main","display","flexDirection","minHeight","alignItems","justifyContent","background","backgroundColor","backgroundRepeat","backgroundSize","card","minWidth","marginTop","avatar","margin","palette","secondary","hint","grey","form","padding","input","serverVersion","fontFamily","marginLeft","LoginPage","useLogin","setLoading","renderInput","meta","touched","inputProps","UserData","formData","useForm","setServerVersion","useEffect","match","versionUrl","catch","autoFocus","onBlur","extractHomeServer","wellKnownUrl","change","initialValues","onSubmit","auth","message","errors","render","handleSubmit","noValidate","Card","FormDataConsumer","formDataProps","CardActions","button","CircularProgress","size","thickness","Notification","germanMessages","synapseadmin","welcome","server_version","username_error","protocol_error","url_error","invalid_user_id","details","tabs","basic","detail","permission","backtolist","threepid","fields","show_deactivated","medium","address","consent_version","helper","deactivate","action","creator","join_rules","guest_access","history_visibility","enums","knock","invite","private","can_join","forbidden","invited","joined","shared","world_readable","unencrypted","last_seen","ip","user_agent","display_name","last_seen_ts","last_seen_ip","send","send_success","send_failure","ra","auth_check_error","toggle_hidden","toggle_visible","notification","notifiaction","logged_out","messages","de","en","englishMessages","i18nProvider","polyglotI18nProvider","locale","resolveBrowserLocale","App","Admin","loginPage","Resource","edit","UserIcon","show","RoomIcon","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.0c2d0d1b.chunk.js","sourcesContent":["import { fetchUtils } from \"react-admin\";\n\nconst authProvider = {\n  // called when the user attempts to log in\n  login: ({ base_url, username, password }) => {\n    console.log(\"login \");\n    const options = {\n      method: \"POST\",\n      body: JSON.stringify({\n        type: \"m.login.password\",\n        user: username,\n        password: password,\n      }),\n    };\n\n    // use the base_url from login instead of the well_known entry from the\n    // server, since the admin might want to access the admin API via some\n    // private address\n    localStorage.setItem(\"base_url\", base_url);\n\n    const decoded_base_url = window.decodeURIComponent(base_url);\n    const login_api_url = decoded_base_url + \"/_matrix/client/r0/login\";\n\n    return fetchUtils.fetchJson(login_api_url, options).then(({ json }) => {\n      localStorage.setItem(\"home_server\", json.home_server);\n      localStorage.setItem(\"user_id\", json.user_id);\n      localStorage.setItem(\"access_token\", json.access_token);\n      localStorage.setItem(\"device_id\", json.device_id);\n    });\n  },\n  // called when the user clicks on the logout button\n  logout: () => {\n    console.log(\"logout \");\n    localStorage.removeItem(\"access_token\");\n    return Promise.resolve();\n  },\n  // called when the API returns an error\n  checkError: ({ status }) => {\n    console.log(\"checkError \" + status);\n    if (status === 401 || status === 403) {\n      return Promise.reject();\n    }\n    return Promise.resolve();\n  },\n  // called when the user navigates to a new location, to check for authentication\n  checkAuth: () => {\n    const access_token = localStorage.getItem(\"access_token\");\n    console.log(\"checkAuth \" + access_token);\n    return typeof access_token == \"string\"\n      ? Promise.resolve()\n      : Promise.reject();\n  },\n  // called when the user navigates to a new location, to check for permissions / roles\n  getPermissions: () => Promise.resolve(),\n};\n\nexport default authProvider;\n","import { fetchUtils } from \"react-admin\";\nimport { stringify } from \"query-string\";\n\n// Adds the access token to all requests\nconst jsonClient = (url, options = {}) => {\n  const token = localStorage.getItem(\"access_token\");\n  console.log(\"httpClient \" + url);\n  if (token != null) {\n    options.user = {\n      authenticated: true,\n      token: `Bearer ${token}`,\n    };\n  }\n  return fetchUtils.fetchJson(url, options);\n};\n\nconst c_to_id = (user_name, resource) => {\n  if (user_name.indexOf('navgurukul.org')>-1)\n    return user_name;\n\n  if (resource === 'users' || resource=== \"connections\")\n    return '@'+ user_name +':navgurukul.org';\n  else if (resource === 'rooms')\n    return '#' + user_name + ':navgurukul.org';\n\n  return user_name;\n}\nconst mxcUrlToHttp = mxcUrl => {\n  const homeserver = localStorage.getItem(\"base_url\");\n  const re = /^mxc:\\/\\/([^/]+)\\/(\\w+)/;\n  var ret = re.exec(mxcUrl);\n  console.log(\"mxcClient \" + ret);\n  if (ret == null) return null;\n  const serverName = ret[1];\n  const mediaId = ret[2];\n  return `${homeserver}/_matrix/media/r0/thumbnail/${serverName}/${mediaId}?width=24&height=24&method=scale`;\n};\n\nconst resourceMap = {\n  users: {\n    path: \"/_synapse/admin/v2/users\",\n    map: u => ({\n      ...u,\n      id: u.name.split(':')[0].slice(1),\n      avatar_src: mxcUrlToHttp(u.avatar_url),\n      is_guest: !!u.is_guest,\n      admin: !!u.admin,\n      deactivated: !!u.deactivated,\n      // need timestamp in milliseconds\n      creation_ts_ms: u.creation_ts * 1000,\n    }),\n    data: \"users\",\n    total: json => json.total,\n    create: data => ({\n      endpoint: `/_synapse/admin/v2/users/${data.id}`,\n      body: data,\n      method: \"PUT\",\n    }),\n    delete: id => ({\n      endpoint: `/_synapse/admin/v1/deactivate/${c_to_id(id, 'users')}`,\n      body: {\n        erase: true, \n        id: id\n      },\n      method: \"POST\",\n    }),\n  },\n  rooms: {\n    path: \"/_synapse/admin/v1/rooms\",\n    map: r => ({\n      ...r,\n      id: r.room_id,\n      alias: r.canonical_alias,\n      members: r.joined_members,\n      is_encrypted: !!r.encryption,\n      federatable: !!r.federatable,\n      public: !!r.public,\n    }),\n    data: \"rooms\",\n    total: json => {\n      return json.total_rooms;\n    },\n  },\n  devices: {\n    map: d => ({\n      ...d,\n      id: d.device_id,\n    }),\n    data: \"devices\",\n    reference: id => ({\n      endpoint: `/_synapse/admin/v2/users/${id}/devices`,\n    }),\n  },\n  connections: {\n    path: \"/_synapse/admin/v1/whois\",\n    map: c => ({\n      ...c,\n      id: c_to_id(c.user_id),\n    }),\n    data: \"connections\",\n  },\n  servernotices: {\n    map: n => ({ id: n.event_id }),\n    create: data => ({\n      endpoint: \"/_synapse/admin/v1/send_server_notice\",\n      body: {\n        user_id: data.id,\n        content: {\n          msgtype: \"m.text\",\n          body: data.body,\n        },\n      },\n      method: \"POST\",\n    }),\n  },\n};\n\nfunction filterNullValues(key, value) {\n  // Filtering out null properties\n  if (value === null) {\n    return undefined;\n  }\n  return value;\n}\n\nfunction getSearchOrder(order) {\n  if (order === \"DESC\") {\n    return \"b\";\n  } else {\n    return \"f\";\n  }\n}\n\nconst dataProvider = {\n  getList: (resource, params) => {\n    console.log(\"getList \" + resource);\n    const { user_id, guests, deactivated } = params.filter;\n    const { page, perPage } = params.pagination;\n    const { field, order } = params.sort;\n    const from = (page - 1) * perPage;\n    const query = {\n      from: from,\n      limit: perPage,\n      user_id: user_id,\n      guests: guests,\n      deactivated: deactivated,\n      order_by: field,\n      dir: getSearchOrder(order),\n    };\n    const homeserver = localStorage.getItem(\"base_url\");\n    if (!homeserver || !(resource in resourceMap)) return Promise.reject();\n\n    const res = resourceMap[resource];\n\n    const endpoint_url = homeserver + res.path;\n    const url = `${endpoint_url}?${stringify(query)}`;\n\n    return jsonClient(url).then(({ json }) => ({\n      data: json[res.data].map(res.map),\n      total: res.total(json, from, perPage),\n    }));\n  },\n\n  getOne: (resource, params) => {\n    console.log(\"getOne \" + resource);\n    const homeserver = localStorage.getItem(\"base_url\");\n    if (!homeserver || !(resource in resourceMap)) return Promise.reject();\n\n    const res = resourceMap[resource];\n    params.id = c_to_id(params.id, resource);\n\n    const endpoint_url = homeserver + res.path;\n    return jsonClient(`${endpoint_url}/${params.id}`).then(({ json }) => ({\n      data: res.map(json),\n    }));\n  },\n\n  getMany: (resource, params) => {\n    console.log(\"getMany \" + resource);\n    const homeserver = localStorage.getItem(\"base_url\");\n    if (!homeserver || !(resource in resourceMap)) return Promise.reject();\n\n    const res = resourceMap[resource];\n\n    const endpoint_url = homeserver + res.path;\n    return Promise.all(\n      params.ids.map(\n        id => {\n          console.log(id);\n          return jsonClient(`${endpoint_url}/${c_to_id(id, resource)}`)\n        }\n      )\n    ).then(responses => ({\n      data: responses.map(({ json }) => res.map(json)),\n    }));\n  },\n\n  getManyReference: (resource, params) => {\n    console.log(\"getManyReference \" + resource);\n\n    const homeserver = localStorage.getItem(\"base_url\");\n    if (!homeserver || !(resource in resourceMap)) return Promise.reject();\n\n    const res = resourceMap[resource];\n\n    const ref = res[\"reference\"](params.id);\n    const endpoint_url = homeserver + ref.endpoint;\n\n    return jsonClient(endpoint_url).then(({ headers, json }) => ({\n      data: json[res.data].map(res.map),\n    }));\n  },\n\n  update: (resource, params) => {\n    console.log(\"update \" + resource);\n    const homeserver = localStorage.getItem(\"base_url\");\n    if (!homeserver || !(resource in resourceMap)) return Promise.reject();\n\n    const res = resourceMap[resource];\n\n    const endpoint_url = homeserver + res.path;\n    return jsonClient(`${endpoint_url}/${c_to_id(params.data.id, resource)}`, {\n      method: \"PUT\",\n      body: JSON.stringify(params.data, filterNullValues),\n    }).then(({ json }) => ({\n      data: res.map(json),\n    }));\n  },\n\n  updateMany: (resource, params) => {\n    console.log(\"updateMany \" + resource);\n    const homeserver = localStorage.getItem(\"base_url\");\n    if (!homeserver || !(resource in resourceMap)) return Promise.reject();\n\n    const res = resourceMap[resource];\n\n    const endpoint_url = homeserver + res.path;\n    return Promise.all(\n      params.ids.map(id => jsonClient(`${endpoint_url}/${c_to_id(id, resource)}`), {\n        method: \"PUT\",\n        body: JSON.stringify(params.data, filterNullValues),\n      })\n    ).then(responses => ({\n      data: responses.map(({ json }) => json),\n    }));\n  },\n\n  create: (resource, params) => {\n    console.log(\"create \" + resource);\n    const homeserver = localStorage.getItem(\"base_url\");\n    if (!homeserver || !(resource in resourceMap)) return Promise.reject();\n\n    const res = resourceMap[resource];\n\n    if (!(\"create\" in res)) return Promise.reject();\n\n    params.data.id = c_to_id(params.data.id, resource);\n    params.data.threepids=[];\n\n    if (params.data.email)\n      params.data.threepids.push({\"medium\": \"email\", \"address\": params.data.email})\n\n    if (params.data.msisdn)\n      params.data.threepids.push({\"medium\": \"msisdn\", \"address\": params.data.msisdn})\n\n    const create = res[\"create\"](params.data);\n    const endpoint_url = homeserver + create.endpoint;\n    return jsonClient(endpoint_url, {\n      method: create.method,\n      body: JSON.stringify(create.body, filterNullValues),\n    }).then(({ json }) => ({\n      data: res.map(json),\n    }));\n  },\n\n  createMany: (resource, params) => {\n    console.log(\"createMany \" + resource);\n    const homeserver = localStorage.getItem(\"base_url\");\n    if (!homeserver || !(resource in resourceMap)) return Promise.reject();\n\n    const res = resourceMap[resource];\n    if (!(\"create\" in res)) return Promise.reject();\n\n    return Promise.all(\n      params.ids.map(id => {\n        params.data.id = id;\n        const cre = res[\"create\"](params.data);\n        const endpoint_url = homeserver + cre.endpoint;\n        return jsonClient(endpoint_url, {\n          method: cre.method,\n          body: JSON.stringify(cre.body, filterNullValues),\n        });\n      })\n    ).then(responses => ({\n      data: responses.map(({ json }) => json),\n    }));\n  },\n\n  delete: (resource, params) => {\n    console.log(\"delete \" + resource);\n    const homeserver = localStorage.getItem(\"base_url\");\n    if (!homeserver || !(resource in resourceMap)) return Promise.reject();\n\n    const res = resourceMap[resource];\n\n    if (\"delete\" in res) {\n      const del = res[\"delete\"](params.id);\n      const endpoint_url = homeserver + del.endpoint;\n\n      console.log(23, del.body);\n\n      return jsonClient(endpoint_url, {\n        method: del.method,\n        body: JSON.stringify(del.body),\n      }).then(({ json }) => ({\n        data: json,\n      }));\n    } else {\n      console.log(12, params);\n      const endpoint_url = homeserver + res.path;\n      return jsonClient(`${endpoint_url}/${params.id}`, {\n        method: \"DELETE\",\n        body: JSON.stringify(params.data, filterNullValues),\n      }).then(({ json }) => ({\n        data: json,\n      }));\n    }\n  },\n\n  deleteMany: (resource, params) => {\n    console.log(\"deleteMany \" + resource, params);\n    const homeserver = localStorage.getItem(\"base_url\");\n    if (!homeserver || !(resource in resourceMap)) return Promise.reject();\n\n    const res = resourceMap[resource];\n\n    if (\"delete\" in res) {\n      return Promise.all(\n        params.ids.map(id => {\n          const del = res[\"delete\"](id);\n          const endpoint_url = homeserver + del.endpoint;\n          console.log(endpoint_url);\n          return jsonClient(endpoint_url, {\n            method: del.method,\n            body: JSON.stringify(del.body),\n          });\n        })\n      ).then(responses => ({\n        data: responses.map(({ json }) => json),\n      }));\n    } else {\n      const endpoint_url = homeserver + res.path;\n      console.log(endpoint_url);\n      return Promise.all(\n        params.ids.map(id => {\n            console.log(id);\n            return jsonClient(`${endpoint_url}/${c_to_id(id, resource)}`, {\n              method: \"DELETE\",\n              body: JSON.stringify(params.data, filterNullValues),\n            })\n          }\n        )\n      ).then(responses => ({\n        data: responses.map(({ json }) => json),\n      }));\n    }\n  },\n};\n\nexport default dataProvider;\n","import React, { Fragment, useState } from \"react\";\nimport {\n  Button,\n  SaveButton,\n  SimpleForm,\n  TextInput,\n  Toolbar,\n  required,\n  useCreate,\n  useMutation,\n  useNotify,\n  useTranslate,\n  useUnselectAll,\n} from \"react-admin\";\nimport MessageIcon from \"@material-ui/icons/Message\";\nimport IconCancel from \"@material-ui/icons/Cancel\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\n\nconst ServerNoticeDialog = ({ open, loading, onClose, onSend }) => {\n  const translate = useTranslate();\n\n  const ServerNoticeToolbar = props => (\n    <Toolbar {...props}>\n      <SaveButton label=\"resources.servernotices.action.send\" />\n      <Button label=\"ra.action.cancel\" onClick={onClose}>\n        <IconCancel />\n      </Button>\n    </Toolbar>\n  );\n\n  return (\n    <Dialog open={open} onClose={onClose} loading={loading}>\n      <DialogTitle>\n        {translate(\"resources.servernotices.action.send\")}\n      </DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          {translate(\"resources.servernotices.helper.send\")}\n        </DialogContentText>\n        <SimpleForm\n          toolbar={<ServerNoticeToolbar />}\n          submitOnEnter={false}\n          redirect={false}\n          save={onSend}\n        >\n          <TextInput\n            source=\"body\"\n            label=\"resources.servernotices.fields.body\"\n            fullWidth\n            multiline\n            rows=\"4\"\n            resettable\n            validate={required()}\n          />\n        </SimpleForm>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport const ServerNoticeButton = ({ record }) => {\n  const [open, setOpen] = useState(false);\n  const notify = useNotify();\n  const [create, { loading }] = useCreate(\"servernotices\");\n\n  const handleDialogOpen = () => setOpen(true);\n  const handleDialogClose = () => setOpen(false);\n\n  const handleSend = values => {\n    create(\n      { payload: { data: { id: record.id, ...values } } },\n      {\n        onSuccess: () => {\n          notify(\"resources.servernotices.action.send_success\");\n          handleDialogClose();\n        },\n        onFailure: () =>\n          notify(\"resources.servernotices.action.send_failure\", \"error\"),\n      }\n    );\n  };\n\n  return (\n    <Fragment>\n      <Button\n        label=\"resources.servernotices.send\"\n        onClick={handleDialogOpen}\n        disabled={loading}\n      >\n        <MessageIcon />\n      </Button>\n      <ServerNoticeDialog\n        open={open}\n        onClose={handleDialogClose}\n        onSend={handleSend}\n      />\n    </Fragment>\n  );\n};\n\nexport const ServerNoticeBulkButton = ({ selectedIds }) => {\n  const [open, setOpen] = useState(false);\n  const notify = useNotify();\n  const unselectAll = useUnselectAll();\n  const [createMany, { loading }] = useMutation();\n\n  const handleDialogOpen = () => setOpen(true);\n  const handleDialogClose = () => setOpen(false);\n\n  const handleSend = values => {\n    createMany(\n      {\n        type: \"createMany\",\n        resource: \"servernotices\",\n        payload: { ids: selectedIds, data: values },\n      },\n      {\n        onSuccess: ({ data }) => {\n          notify(\"resources.servernotices.action.send_success\");\n          unselectAll(\"users\");\n          handleDialogClose();\n        },\n        onFailure: error =>\n          notify(\"resources.servernotices.action.send_failure\", \"error\"),\n      }\n    );\n  };\n\n  return (\n    <Fragment>\n      <Button\n        label=\"resources.servernotices.send\"\n        onClick={handleDialogOpen}\n        disabled={loading}\n      >\n        <MessageIcon />\n      </Button>\n      <ServerNoticeDialog\n        open={open}\n        onClose={handleDialogClose}\n        onSend={handleSend}\n      />\n    </Fragment>\n  );\n};\n","import React, { cloneElement, Fragment } from \"react\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport PersonPinIcon from \"@material-ui/icons/PersonPin\";\nimport ContactMailIcon from \"@material-ui/icons/ContactMail\";\nimport DevicesIcon from \"@material-ui/icons/Devices\";\nimport SettingsInputComponentIcon from \"@material-ui/icons/SettingsInputComponent\";\nimport {\n  ArrayInput,\n  ArrayField,\n  Datagrid,\n  DateField,\n  Create,\n  Edit,\n  List,\n  Filter,\n  Toolbar,\n  SimpleForm,\n  SimpleFormIterator,\n  TabbedForm,\n  FormTab,\n  BooleanField,\n  BooleanInput,\n  PasswordInput,\n  TextField,\n  TextInput,\n  ReferenceField,\n  ReferenceManyField,\n  SelectInput,\n  BulkDeleteButton,\n  DeleteButton,\n  SaveButton,\n  regex,\n  useTranslate,\n  Pagination,\n  CreateButton,\n  ExportButton,\n  TopToolbar,\n  sanitizeListRestProps,\n} from \"react-admin\";\nimport { ServerNoticeButton, ServerNoticeBulkButton } from \"./ServerNotices\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles({\n  small: {\n    height: \"40px\",\n    width: \"40px\",\n  },\n  large: {\n    height: \"120px\",\n    width: \"120px\",\n    float: \"right\",\n  },\n});\n\nconst UserListActions = ({\n  currentSort,\n  className,\n  resource,\n  filters,\n  displayedFilters,\n  exporter, // you can hide ExportButton if exporter = (null || false)\n  filterValues,\n  permanentFilter,\n  hasCreate, // you can hide CreateButton if hasCreate = false\n  basePath,\n  selectedIds,\n  onUnselectItems,\n  showFilter,\n  maxResults,\n  total,\n  ...rest\n}) => (\n  <TopToolbar className={className} {...sanitizeListRestProps(rest)}>\n    {filters &&\n      cloneElement(filters, {\n        resource,\n        showFilter,\n        displayedFilters,\n        filterValues,\n        context: \"button\",\n      })}\n    <CreateButton basePath={basePath} />\n    <ExportButton\n      disabled={total === 0}\n      resource={resource}\n      sort={currentSort}\n      filter={{ ...filterValues, ...permanentFilter }}\n      exporter={exporter}\n      maxResults={maxResults}\n    />\n  </TopToolbar>\n);\n\nconst UserPagination = props => (\n  <Pagination {...props} rowsPerPageOptions={[10, 25, 50, 100, 500, 1000]} />\n);\n\nconst UserFilter = props => (\n  <Filter {...props}>\n    <BooleanInput source=\"guests\" alwaysOn />\n    <BooleanInput\n      label=\"resources.users.fields.show_deactivated\"\n      source=\"deactivated\"\n      alwaysOn\n    />\n  </Filter>\n);\n\nconst UserBulkActionButtons = props => {\n  const translate = useTranslate();\n  return (\n    <Fragment>\n      <ServerNoticeBulkButton {...props} />\n      <BulkDeleteButton\n        {...props}\n        label=\"resources.users.action.erase\"\n        title={translate(\"resources.users.helper.erase\")}\n      />\n    </Fragment>\n  );\n};\n\nconst AvatarField = ({ source, className, record = {} }) => (\n  <Avatar src={record[source]} className={className} />\n);\n\nexport const UserList = props => {\n  const classes = useStyles();\n  return (\n    <List\n      {...props}\n      filters={<UserFilter />}\n      filterDefaultValues={{ guests: true, deactivated: false }}\n      actions={<UserListActions maxResults={10000} />}\n      bulkActionButtons={<UserBulkActionButtons />}\n      pagination={<UserPagination />}\n    >\n      <Datagrid rowClick=\"edit\">\n        <AvatarField\n          source=\"avatar_src\"\n          sortable={false}\n          className={classes.small}\n        />\n        <TextField source=\"id\" sortable={false} />\n        <TextField source=\"displayname\" sortable={false} />\n        <BooleanField source=\"is_guest\" sortable={false} />\n        <BooleanField source=\"admin\" sortable={false} />\n        <BooleanField source=\"deactivated\" sortable={false} />\n      </Datagrid>\n    </List>\n  );\n};\n\n// https://matrix.org/docs/spec/appendices#user-identifiers\nconst validateUser = regex(\n  /^[a-z0-9._=\\-/][a-z0-9._=\\-/][a-z0-9._=\\-/][a-z0-9._=\\-/][a-z0-9._=\\-/]+/,\n  \"synapseadmin.users.invalid_user_id\"\n);\n\nconst validateEmail = regex(\n  /^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+\\.+([a-zA-Z0-9-][a-zA-Z0-9-]+)*$/,\n  \"Enter Proper Email Address\"  \n);\n\nconst UserEditToolbar = props => {\n  const translate = useTranslate();\n  return (\n    <Toolbar {...props}>\n      <SaveButton submitOnEnter={true} />\n      <DeleteButton\n        label=\"resources.users.action.erase\"\n        title={translate(\"resources.users.helper.erase\")}\n      />\n      <ServerNoticeButton />\n    </Toolbar>\n  );\n};\n\nexport const UserCreate = props => (\n  <Create {...props}>\n    <SimpleForm>\n      <TextInput source=\"id\" autoComplete=\"off\" validate={validateUser} />\n      <TextInput source=\"displayname\" />\n      <PasswordInput source=\"password\" autoComplete=\"new-password\" />\n      <BooleanInput source=\"admin\" />\n      <TextInput source=\"email\" autoComplete=\"off\" validate={validateEmail}/>\n      <TextInput source=\"msisdn\" autoComplete=\"off\" />\n      {/* <ArrayInput source=\"threepids\">\n        <SimpleFormIterator>\n          <SelectInput\n            source=\"medium\"\n            choices={[\n              { id: \"email\", name: \"resources.users.email\" },\n              { id: \"msisdn\", name: \"resources.users.msisdn\" },\n            ]}\n            key=\"SelectInput\"\n          />\n          <TextInput source=\"address\" key=\"TextInput\"/>\n        </SimpleFormIterator>\n      </ArrayInput> */}\n    </SimpleForm>\n  </Create>\n);\n\nconst UserTitle = ({ record }) => {\n  const translate = useTranslate();\n  return (\n    <span>\n      {translate(\"resources.users.name\", {\n        smart_count: 1,\n      })}{\" \"}\n      {record ? `\"${record.displayname}\"` : \"\"}\n    </span>\n  );\n};\nexport const UserEdit = props => {\n  const classes = useStyles();\n  const translate = useTranslate();\n  return (\n    <Edit {...props} title={<UserTitle />}>\n      <TabbedForm toolbar={<UserEditToolbar />}>\n        <FormTab label=\"resources.users.name\" icon={<PersonPinIcon />}>\n          <AvatarField\n            source=\"avatar_src\"\n            sortable={false}\n            className={classes.large}\n          />\n          <TextInput source=\"id\" disabled />\n          <TextInput source=\"displayname\" />\n          <PasswordInput source=\"password\" autoComplete=\"new-password\" />\n          <BooleanInput source=\"admin\" />\n          <BooleanInput\n            source=\"deactivated\"\n            helperText=\"resources.users.helper.deactivate\"\n          />\n          <DateField\n            source=\"creation_ts_ms\"\n            showTime\n            options={{\n              year: \"numeric\",\n              month: \"2-digit\",\n              day: \"2-digit\",\n              hour: \"2-digit\",\n              minute: \"2-digit\",\n              second: \"2-digit\",\n            }}\n          />\n          <TextField source=\"consent_version\" />\n        </FormTab>\n        <FormTab\n          label=\"resources.users.threepid\"\n          icon={<ContactMailIcon />}\n          path=\"threepid\"\n        >\n          <ArrayInput source=\"threepids\">\n            <SimpleFormIterator>\n              <SelectInput\n                source=\"medium\"\n                choices={[\n                  { id: \"email\", name: \"resources.users.email\" },\n                  { id: \"msisdn\", name: \"resources.users.msisdn\" },\n                ]}\n                key=\"SelectInput\"\n              />\n              <TextInput source=\"address\" key=\"TextInput\"/>\n            </SimpleFormIterator>\n          </ArrayInput>\n        </FormTab>\n        <FormTab\n          label={translate(\"resources.devices.name\", { smart_count: 2 })}\n          icon={<DevicesIcon />}\n          path=\"devices\"\n        >\n          <ReferenceManyField\n            reference=\"devices\"\n            target=\"user_id\"\n            addLabel={false}\n          >\n            <Datagrid style={{ width: \"100%\" }}>\n              <TextField source=\"device_id\" sortable={false} />\n              <TextField source=\"display_name\" sortable={false} />\n              <TextField source=\"last_seen_ip\" sortable={false} />\n              <DateField\n                source=\"last_seen_ts\"\n                showTime\n                options={{\n                  year: \"numeric\",\n                  month: \"2-digit\",\n                  day: \"2-digit\",\n                  hour: \"2-digit\",\n                  minute: \"2-digit\",\n                  second: \"2-digit\",\n                }}\n                sortable={false}\n              />\n            </Datagrid>\n          </ReferenceManyField>\n        </FormTab>\n        <FormTab\n          label=\"resources.connections.name\"\n          icon={<SettingsInputComponentIcon />}\n          path=\"connections\"\n        >\n          <ReferenceField\n            reference=\"connections\"\n            source=\"id\"\n            addLabel={false}\n            link={false}\n          >\n            <ArrayField\n              source=\"devices[].sessions[0].connections\"\n              label=\"resources.connections.name\"\n            >\n              <Datagrid style={{ width: \"100%\" }}>\n                <TextField source=\"ip\" sortable={false} />\n                <DateField\n                  source=\"last_seen\"\n                  showTime\n                  options={{\n                    year: \"numeric\",\n                    month: \"2-digit\",\n                    day: \"2-digit\",\n                    hour: \"2-digit\",\n                    minute: \"2-digit\",\n                    second: \"2-digit\",\n                  }}\n                  sortable={false}\n                />\n                <TextField\n                  source=\"user_agent\"\n                  sortable={false}\n                  style={{ width: \"100%\" }}\n                />\n              </Datagrid>\n            </ArrayField>\n          </ReferenceField>\n        </FormTab>\n      </TabbedForm>\n    </Edit>\n  );\n};\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport {\n  BooleanField,\n  Datagrid,\n  Filter,\n  List,\n  Pagination,\n  SelectField,\n  Show,\n  Tab,\n  TabbedShowLayout,\n  TextField,\n  useTranslate,\n} from \"react-admin\";\nimport get from \"lodash/get\";\nimport { Tooltip, Typography, Chip } from \"@material-ui/core\";\nimport HttpsIcon from \"@material-ui/icons/Https\";\nimport NoEncryptionIcon from \"@material-ui/icons/NoEncryption\";\nimport PageviewIcon from \"@material-ui/icons/Pageview\";\nimport ViewListIcon from \"@material-ui/icons/ViewList\";\nimport VisibilityIcon from \"@material-ui/icons/Visibility\";\n\nconst RoomPagination = props => (\n  <Pagination {...props} rowsPerPageOptions={[10, 25, 50, 100, 500, 1000]} />\n);\n\nconst EncryptionField = ({ source, record = {}, emptyText }) => {\n  const translate = useTranslate();\n  const value = get(record, source);\n  let ariaLabel = value === false ? \"ra.boolean.false\" : \"ra.boolean.true\";\n\n  if (value === false || value === true) {\n    return (\n      <Typography component=\"span\" variant=\"body2\">\n        <Tooltip title={translate(ariaLabel, { _: ariaLabel })}>\n          {value === true ? (\n            <HttpsIcon data-testid=\"true\" htmlColor=\"limegreen\" />\n          ) : (\n            <NoEncryptionIcon data-testid=\"false\" color=\"error\" />\n          )}\n        </Tooltip>\n      </Typography>\n    );\n  }\n\n  return (\n    <Typography component=\"span\" variant=\"body2\">\n      {emptyText}\n    </Typography>\n  );\n};\n\nconst RoomTitle = ({ record }) => {\n  const translate = useTranslate();\n  var name = \"\";\n  if (record) {\n    name = record.name !== \"\" ? record.name : record.id;\n  }\n\n  return (\n    <span>\n      {translate(\"resources.rooms.name\", 1)} {name}\n    </span>\n  );\n};\n\nexport const RoomShow = props => {\n  const translate = useTranslate();\n  return (\n    <Show {...props} title={<RoomTitle />}>\n      <TabbedShowLayout>\n        <Tab label=\"synapseadmin.rooms.tabs.basic\" icon={<ViewListIcon />}>\n          <TextField source=\"room_id\" />\n          <TextField source=\"name\" />\n          <TextField source=\"canonical_alias\" />\n          <TextField source=\"creator\" />\n        </Tab>\n\n        <Tab\n          label=\"synapseadmin.rooms.tabs.detail\"\n          icon={<PageviewIcon />}\n          path=\"detail\"\n        >\n          <TextField source=\"joined_members\" />\n          <TextField source=\"joined_local_members\" />\n          <TextField source=\"state_events\" />\n          <TextField source=\"version\" />\n          <TextField\n            source=\"encryption\"\n            emptyText={translate(\"resources.rooms.enums.unencrypted\")}\n          />\n        </Tab>\n\n        <Tab\n          label=\"synapseadmin.rooms.tabs.permission\"\n          icon={<VisibilityIcon />}\n          path=\"permission\"\n        >\n          <BooleanField source=\"federatable\" />\n          <BooleanField source=\"public\" />\n          <SelectField\n            source=\"join_rules\"\n            choices={[\n              { id: \"public\", name: \"resources.rooms.enums.join_rules.public\" },\n              { id: \"knock\", name: \"resources.rooms.enums.join_rules.knock\" },\n              { id: \"invite\", name: \"resources.rooms.enums.join_rules.invite\" },\n              {\n                id: \"private\",\n                name: \"resources.rooms.enums.join_rules.private\",\n              },\n            ]}\n          />\n          <SelectField\n            source=\"guest_access\"\n            choices={[\n              {\n                id: \"can_join\",\n                name: \"resources.rooms.enums.guest_access.can_join\",\n              },\n              {\n                id: \"forbidden\",\n                name: \"resources.rooms.enums.guest_access.forbidden\",\n              },\n            ]}\n          />\n          <SelectField\n            source=\"history_visibility\"\n            choices={[\n              {\n                id: \"invited\",\n                name: \"resources.rooms.enums.history_visibility.invited\",\n              },\n              {\n                id: \"joined\",\n                name: \"resources.rooms.enums.history_visibility.joined\",\n              },\n              {\n                id: \"shared\",\n                name: \"resources.rooms.enums.history_visibility.shared\",\n              },\n              {\n                id: \"world_readable\",\n                name: \"resources.rooms.enums.history_visibility.world_readable\",\n              },\n            ]}\n          />\n        </Tab>\n      </TabbedShowLayout>\n    </Show>\n  );\n};\nconst RoomFilter = ({ ...props }) => {\n  const translate = useTranslate();\n  return (\n    <Filter {...props}>\n      <Chip\n        label={translate(\"resources.rooms.fields.joined_local_members\")}\n        source=\"joined_local_members\"\n        defaultValue={false}\n        style={{ marginBottom: 8 }}\n      />\n      <Chip\n        label={translate(\"resources.rooms.fields.state_events\")}\n        source=\"state_events\"\n        defaultValue={false}\n        style={{ marginBottom: 8 }}\n      />\n      <Chip\n        label={translate(\"resources.rooms.fields.version\")}\n        source=\"version\"\n        defaultValue={false}\n        style={{ marginBottom: 8 }}\n      />\n      <Chip\n        label={translate(\"resources.rooms.fields.federatable\")}\n        source=\"federatable\"\n        defaultValue={false}\n        style={{ marginBottom: 8 }}\n      />\n    </Filter>\n  );\n};\n\nconst FilterableRoomList = ({ ...props }) => {\n  const filter = props.roomfilters;\n  const localMembersFilter =\n    filter && filter.joined_local_members ? true : false;\n  const stateEventsFilter = filter && filter.state_events ? true : false;\n  const versionFilter = filter && filter.version ? true : false;\n  const federateableFilter = filter && filter.federatable ? true : false;\n\n  return (\n    <List\n      {...props}\n      pagination={<RoomPagination />}\n      sort={{ field: \"name\", order: \"ASC\" }}\n      filters={<RoomFilter />}\n    >\n      <Datagrid rowClick=\"show\">\n        <EncryptionField\n          source=\"is_encrypted\"\n          sortBy=\"encryption\"\n          label={<HttpsIcon />}\n        />\n        <TextField source=\"name\" />\n        <TextField source=\"joined_members\" />\n        {localMembersFilter && <TextField source=\"joined_local_members\" />}\n        {stateEventsFilter && <TextField source=\"state_events\" />}\n        {versionFilter && <TextField source=\"version\" />}\n        {federateableFilter && <BooleanField source=\"federatable\" />}\n        <BooleanField source=\"public\" />\n      </Datagrid>\n    </List>\n  );\n};\n\nfunction mapStateToProps(state) {\n  return {\n    roomfilters: state.admin.resources.rooms.list.params.displayedFilters,\n  };\n}\n\nexport const RoomList = connect(mapStateToProps)(FilterableRoomList);\n","import React, { useState, useEffect } from \"react\";\nimport {\n  fetchUtils,\n  FormDataConsumer,\n  Notification,\n  useLogin,\n  useNotify,\n  // useLocale,\n  // useSetLocale,\n  useTranslate,\n  PasswordInput,\n  TextInput,\n} from \"react-admin\";\nimport { Form, useForm } from \"react-final-form\";\nimport {\n  Avatar,\n  Button,\n  Card,\n  CardActions,\n  CircularProgress,\n  // MenuItem,\n  // Select,\n  TextField,\n} from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport LockIcon from \"@material-ui/icons/Lock\";\n\nconst useStyles = makeStyles(theme => ({\n  main: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    minHeight: \"calc(100vh - 1em)\",\n    alignItems: \"center\",\n    justifyContent: \"flex-start\",\n    background: \"url(./images/floating-cogs.svg)\",\n    backgroundColor: \"#f9f9f9\",\n    backgroundRepeat: \"no-repeat\",\n    backgroundSize: \"cover\",\n  },\n  card: {\n    minWidth: \"30em\",\n    marginTop: \"6em\",\n    marginBottom: \"6em\",\n  },\n  avatar: {\n    margin: \"1em\",\n    display: \"flex\",\n    justifyContent: \"center\",\n  },\n  icon: {\n    backgroundColor: theme.palette.secondary.main,\n  },\n  hint: {\n    marginTop: \"1em\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    color: theme.palette.grey[500],\n  },\n  form: {\n    padding: \"0 1em 1em 1em\",\n  },\n  input: {\n    marginTop: \"1em\",\n  },\n  actions: {\n    padding: \"0 1em 1em 1em\",\n  },\n  serverVersion: {\n    color: \"#9e9e9e\",\n    fontFamily: \"Roboto, Helvetica, Arial, sans-serif\",\n    marginBottom: \"1em\",\n    marginLeft: \"0.5em\",\n  },\n}));\n\nconst LoginPage = ({ theme }) => {\n  const classes = useStyles({ theme });\n  const login = useLogin();\n  const notify = useNotify();\n  const [loading, setLoading] = useState(false);\n  // var locale = useLocale();\n  // const setLocale = useSetLocale();\n  const translate = useTranslate();\n  const base_url = \"https://m.navgurukul.org\";\n\n  const renderInput = ({\n    meta: { touched, error } = {},\n    input: { ...inputProps },\n    ...props\n  }) => (\n    <TextField\n      error={!!(touched && error)}\n      helperText={touched && error}\n      {...inputProps}\n      {...props}\n      fullWidth\n    />\n  );\n\n  const validate = values => {\n    const errors = {};\n    if (!values.username) {\n      errors.username = translate(\"ra.validation.required\");\n    }\n    if (!values.password) {\n      errors.password = translate(\"ra.validation.required\");\n    }\n    if (!values.base_url) {\n      errors.base_url = translate(\"ra.validation.required\");\n    } else {\n      if (!values.base_url.match(/^(http|https):\\/\\//)) {\n        errors.base_url = translate(\"synapseadmin.auth.protocol_error\");\n      } else if (\n        !values.base_url.match(/^(http|https):\\/\\/[a-zA-Z0-9\\-.]+(:\\d{1,5})?$/)\n      ) {\n        errors.base_url = translate(\"synapseadmin.auth.url_error\");\n      }\n    }\n    return errors;\n  };\n\n  const handleSubmit = auth => {\n    setLoading(true);\n    login(auth).catch(error => {\n      setLoading(false);\n      notify(\n        typeof error === \"string\"\n          ? error\n          : typeof error === \"undefined\" || !error.message\n          ? \"ra.auth.sign_in_error\"\n          : error.message,\n        \"warning\"\n      );\n    });\n  };\n\n  const extractHomeServer = username => {\n    const usernameRegex = /@[a-zA-Z0-9._=\\-/]+:([a-zA-Z0-9\\-.]+\\.[a-zA-Z]+)/;\n    if (!username) return null;\n    const res = username.match(usernameRegex);\n    if (res) return res[1];\n    return null;\n  };\n\n  const UserData = ({ formData }) => {\n\n    const form = useForm();\n    const [serverVersion, setServerVersion] = useState(\"\");\n\n    const handleUsernameChange = _ => {\n      if (formData.base_url) return;\n      // check if username is a full qualified userId then set base_url accordially\n      const home_server = extractHomeServer(formData.username);\n      const wellKnownUrl = `https://${home_server}/.well-known/matrix/client`;\n      if (home_server) {\n        // fetch .well-known entry to get base_url\n        fetchUtils\n          .fetchJson(wellKnownUrl, { method: \"GET\" })\n          .then(({ json }) => {\n            form.change(\"base_url\", json[\"m.homeserver\"].base_url);\n          })\n          .catch(_ => {\n            // if there is no .well-known entry, try the home server name\n            form.change(\"base_url\", `https://${home_server}`);\n          });\n      }\n    };\n\n    useEffect(\n      _ => {\n        if (\n          !formData.base_url ||\n          !formData.base_url.match(/^(http|https):\\/\\/[a-zA-Z0-9\\-.]+$/)\n        )\n          return;\n        const versionUrl = `${formData.base_url}/_synapse/admin/v1/server_version`;\n        fetchUtils\n          .fetchJson(versionUrl, { method: \"GET\" })\n          .then(({ json }) => {\n            setServerVersion(\n              `${translate(\"synapseadmin.auth.server_version\")} ${\n                json[\"server_version\"]\n              }`\n            );\n          })\n          .catch(_ => {\n            setServerVersion(\"\");\n          });\n      },\n      [formData.base_url]\n    );\n\n    return (\n      <div>\n        <div className={classes.input}>\n          <TextInput\n            autoFocus\n            name=\"username\"\n            component={renderInput}\n            label={translate(\"ra.auth.username\")}\n            disabled={loading}\n            onBlur={handleUsernameChange}\n            fullWidth\n          />\n        </div>\n        <div className={classes.input}>\n          <PasswordInput\n            name=\"password\"\n            component={renderInput}\n            label={translate(\"ra.auth.password\")}\n            type=\"password\"\n            disabled={loading}\n            fullWidth\n          />\n        </div>\n        <div className={classes.input}>\n          <TextInput\n            name=\"base_url\"\n            component={renderInput}\n            label={translate(\"synapseadmin.auth.base_url\")}\n            disabled={loading}\n            fullWidth\n          />\n        </div>\n        <div className={classes.serverVersion}>{serverVersion}</div>\n      </div>\n    );\n  };\n\n  return (\n    <Form\n      initialValues={{ base_url: base_url }}\n      onSubmit={handleSubmit}\n      validate={validate}\n      render={({ handleSubmit }) => (\n        <form onSubmit={handleSubmit} noValidate>\n          <div className={classes.main}>\n            <Card className={classes.card}>\n              <div className={classes.avatar}>\n                <Avatar className={classes.icon}>\n                  <LockIcon />\n                </Avatar>\n              </div>\n              <div className={classes.hint}>\n                {translate(\"synapseadmin.auth.welcome\")}\n              </div>\n              <div className={classes.form}>\n                <FormDataConsumer>\n                  {formDataProps => <UserData {...formDataProps} />}\n                </FormDataConsumer>\n              </div>\n              <CardActions className={classes.actions}>\n                <Button\n                  variant=\"contained\"\n                  type=\"submit\"\n                  color=\"primary\"\n                  disabled={loading}\n                  className={classes.button}\n                  fullWidth\n                >\n                  {loading && <CircularProgress size={25} thickness={2} />}\n                  {translate(\"ra.auth.sign_in\")}\n                </Button>\n              </CardActions>\n            </Card>\n            <Notification />\n          </div>\n        </form>\n      )}\n    />\n  );\n};\n\nexport default LoginPage;\n","import germanMessages from \"ra-language-german\";\n\nexport default {\n  ...germanMessages,\n  synapseadmin: {\n    auth: {\n      base_url: \"Heimserver URL\",\n      welcome: \"Willkommen bei Synapse-admin\",\n      server_version: \"Synapse Version\",\n      username_error: \"Bitte vollständigen Nutzernamen angeben: '@user:domain'\",\n      protocol_error: \"Die URL muss mit 'http://' oder 'https://' beginnen\",\n      url_error: \"Keine gültige Matrix Server URL\",\n    },\n    users: {\n      invalid_user_id:\n        \"Muss eine vollständige Matrix Benutzer-ID sein, z.B. @benutzer_id:homeserver\",\n    },\n    rooms: {\n      details: \"Raumdetails\",\n      tabs: {\n        basic: \"Allgemein\",\n        members: \"Mitglieder\",\n        detail: \"Details\",\n        permission: \"Berechtigungen\",\n      },\n    },\n  },\n  resources: {\n    users: {\n      backtolist: \"Zurück zur Liste\",\n      name: \"Benutzer\",\n      email: \"E-Mail\",\n      msisdn: \"Telefon\",\n      threepid: \"E-Mail / Telefon\",\n      fields: {\n        avatar: \"Avatar\",\n        id: \"Benutzer-ID\",\n        name: \"Name\",\n        is_guest: \"Gast\",\n        admin: \"Admin\",\n        deactivated: \"Deaktiviert\",\n        guests: \"Zeige Gäste\",\n        show_deactivated: \"Zeige deaktivierte Benutzer\",\n        user_id: \"Suche Benutzer\",\n        displayname: \"Anzeigename\",\n        password: \"Passwort\",\n        avatar_url: \"Avatar URL\",\n        avatar_src: \"Avatar\",\n        medium: \"Medium\",\n        threepids: \"3PIDs\",\n        address: \"Adresse\",\n        creation_ts_ms: \"Zeitpunkt der Erstellung\",\n        consent_version: \"Zugestimmte Geschäftsbedingungen\",\n      },\n      helper: {\n        deactivate: \"Deaktivierte Nutzer können nicht wieder aktiviert werden.\",\n        erase: \"DSGVO konformes Löschen der Benutzerdaten\",\n      },\n      action: {\n        erase: \"Lösche Benutzerdaten\",\n      },\n    },\n    rooms: {\n      name: \"Raum |||| Räume\",\n      fields: {\n        room_id: \"Raum-ID\",\n        name: \"Name\",\n        canonical_alias: \"Alias\",\n        joined_members: \"Mitglieder\",\n        joined_local_members: \"Lokale Mitglieder\",\n        state_events: \"Ereignisse\",\n        version: \"Version\",\n        is_encrypted: \"Verschlüsselt\",\n        encryption: \"Verschlüsselungs-Algorithmus\",\n        federatable: \"Fö­de­rierbar\",\n        public: \"Öffentlich\",\n        creator: \"Ersteller\",\n        join_rules: \"Beitrittsregeln\",\n        guest_access: \"Gastzugriff\",\n        history_visibility: \"Historie-Sichtbarkeit\",\n      },\n      enums: {\n        join_rules: {\n          public: \"Öffentlich\",\n          knock: \"Auf Anfrage\",\n          invite: \"Nur auf Einladung\",\n          private: \"Privat\",\n        },\n        guest_access: {\n          can_join: \"Gäste können beitreten\",\n          forbidden: \"Gäste können nicht beitreten\",\n        },\n        history_visibility: {\n          invited: \"Ab Einladung\",\n          joined: \"Ab Beitritt\",\n          shared: \"Ab Setzen der Einstellung\",\n          world_readable: \"Jeder\",\n        },\n        unencrypted: \"Nicht verschlüsselt\",\n      },\n    },\n    connections: {\n      name: \"Verbindungen\",\n      fields: {\n        last_seen: \"Datum\",\n        ip: \"IP-Adresse\",\n        user_agent: \"User Agent\",\n      },\n    },\n    devices: {\n      name: \"Gerät |||| Geräte\",\n      fields: {\n        device_id: \"Geräte-ID\",\n        display_name: \"Anzeigename\",\n        last_seen_ts: \"Zeitstempel\",\n        last_seen_ip: \"IP-Adresse\",\n      },\n    },\n    servernotices: {\n      name: \"Serverbenachrichtigungen\",\n      send: \"Servernachricht versenden\",\n      fields: {\n        body: \"Nachricht\",\n      },\n      action: {\n        send: \"Sende Nachricht\",\n        send_success: \"Nachricht erfolgreich versendet.\",\n        send_failure: \"Beim Versenden ist ein Fehler aufgetreten.\",\n      },\n      helper: {\n        send:\n          'Sendet eine Serverbenachrichtigung an die ausgewählten Nutzer. Hierfür muss das Feature \"Server Notices\" auf dem Server aktiviert sein.',\n      },\n    },\n  },\n  ra: {\n    ...germanMessages.ra,\n    auth: {\n      ...germanMessages.ra.auth,\n      auth_check_error: \"Anmeldung fehlgeschlagen\",\n    },\n    input: {\n      ...germanMessages.ra.input,\n      password: {\n        ...germanMessages.ra.input.password,\n        toggle_hidden: \"Anzeigen\",\n        toggle_visible: \"Verstecken\",\n      },\n    },\n    notification: {\n      ...germanMessages.ra.notifiaction,\n      logged_out: \"Abgemeldet\",\n    },\n  },\n};\n","import React from \"react\";\nimport { Admin, Resource, resolveBrowserLocale } from \"react-admin\";\nimport polyglotI18nProvider from \"ra-i18n-polyglot\";\nimport authProvider from \"./synapse/authProvider\";\nimport dataProvider from \"./synapse/dataProvider\";\nimport { UserList, UserCreate, UserEdit } from \"./components/users\";\nimport { RoomList, RoomShow } from \"./components/rooms\";\nimport LoginPage from \"./components/LoginPage\";\nimport UserIcon from \"@material-ui/icons/Group\";\nimport { ViewListIcon as RoomIcon } from \"@material-ui/icons/ViewList\";\nimport germanMessages from \"./i18n/de\";\nimport englishMessages from \"./i18n/en\";\n\n// TODO: Can we use lazy loading together with browser locale?\nconst messages = {\n  de: germanMessages,\n  en: englishMessages,\n};\nconst i18nProvider = polyglotI18nProvider(\n  locale => (messages[locale] ? messages[locale] : messages.en),\n  resolveBrowserLocale()\n);\n\nconst App = () => (\n  <Admin\n    loginPage={LoginPage}\n    authProvider={authProvider}\n    dataProvider={dataProvider}\n    i18nProvider={i18nProvider}\n  >\n    <Resource\n      name=\"users\"\n      list={UserList}\n      create={UserCreate}\n      edit={UserEdit}\n      icon={UserIcon}\n    />\n    <Resource name=\"rooms\" list={RoomList} show={RoomShow} icon={RoomIcon} />\n    <Resource name=\"connections\" />\n    <Resource name=\"devices\" />\n    <Resource name=\"servernotices\" />\n  </Admin>\n);\n\nexport default App;\n","import englishMessages from \"ra-language-english\";\n\nexport default {\n  ...englishMessages,\n  synapseadmin: {\n    auth: {\n      homeserver: \"Homeserver\",\n      welcome: \"Welcome to Navgurukul Admin\",\n      base_url: \"Homeserver URL\",\n      username_error: \"Please enter fully qualified user ID: '@user:domain'\",\n      protocol_error: \"URL has to start with 'http://' or 'https://'\",\n      url_error: \"Not a valid Matrix server URL\",\n    },\n    users: {\n      invalid_user_id:\n        \"Please enter a proper username.\",\n    },\n    rooms: {\n      tabs: {\n        basic: \"Basic\",\n        members: \"Members\",\n        detail: \"Details\",\n        permission: \"Permissions\",\n      },\n    },\n  },\n  resources: {\n    users: {\n      backtolist: \"Back to list\",\n      name: \"User |||| Users\",\n      email: \"Email\",\n      msisdn: \"Phone\",\n      threepid: \"Email / Phone\",\n      fields: {\n        avatar: \"Avatar\",\n        id: \"User-ID\",\n        name: \"Name\",\n        is_guest: \"Guest\",\n        admin: \"Admin\",\n        deactivated: \"Deactivated\",\n        guests: \"Show guests\",\n        show_deactivated: \"Show deactivated members\",\n        user_id: \"Search Member\",\n        displayname: \"Displayname\",\n        password: \"Password\",\n        avatar_url: \"Avatar URL\",\n        avatar_src: \"Avatar\",\n        medium: \"Medium\",\n        threepids: \"3PIDs\",\n        address: \"Address\",\n        creation_ts_ms: \"Creation timestamp\",\n        consent_version: \"Consent version\",\n      },\n      helper: {\n        deactivate: \"Deactivated members cannot be reactivated\",\n        erase: \"Mark the member as GDPR-erased\",\n      },\n      action: {\n        erase: \"Erase member data\",\n      },\n    },\n    rooms: {\n      name: \"Room |||| Rooms\",\n      fields: {\n        room_id: \"Room-ID\",\n        name: \"Name\",\n        canonical_alias: \"Alias\",\n        joined_members: \"Members\",\n        joined_local_members: \"local members\",\n        state_events: \"State events\",\n        version: \"Version\",\n        is_encrypted: \"Encrypted\",\n        encryption: \"Encryption\",\n        federatable: \"Federatable\",\n        public: \"Public\",\n        creator: \"Creator\",\n        join_rules: \"Join rules\",\n        guest_access: \"Guest access\",\n        history_visibility: \"History visibility\",\n      },\n      enums: {\n        join_rules: {\n          public: \"Public\",\n          knock: \"Knock\",\n          invite: \"Invite\",\n          private: \"Private\",\n        },\n        guest_access: {\n          can_join: \"Guests can join\",\n          forbidden: \"Guests can not join\",\n        },\n        history_visibility: {\n          invited: \"Since invited\",\n          joined: \"Since joined\",\n          shared: \"Since shared\",\n          world_readable: \"Anyone\",\n        },\n        unencrypted: \"Unencrypted\",\n      },\n    },\n    connections: {\n      name: \"Connections\",\n      fields: {\n        last_seen: \"Date\",\n        ip: \"IP address\",\n        user_agent: \"User agent\",\n      },\n    },\n    devices: {\n      name: \"Device |||| Devices\",\n      fields: {\n        device_id: \"Device-ID\",\n        display_name: \"Displayname\",\n        last_seen_ts: \"Timestamp\",\n        last_seen_ip: \"IP address\",\n      },\n    },\n    servernotices: {\n      name: \"Server Notices\",\n      send: \"Send server notices\",\n      fields: {\n        body: \"Message\",\n      },\n      action: {\n        send: \"Send note\",\n        send_success: \"Server notice successfully sent.\",\n        send_failure: \"An error has occurred.\",\n      },\n      helper: {\n        send:\n          'Sends a server notice to the selected users. The feature \"Server Notices\" has to be activated at the server.',\n      },\n    },\n  },\n};\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}