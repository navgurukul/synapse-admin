(this["webpackJsonpnavgurukul-admin"]=this["webpackJsonpnavgurukul-admin"]||[]).push([[0],{392:function(e,a,t){e.exports=t(528)},528:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),s=t(18),o=t.n(s),i=t(290),c=t(618),l=t(617),u=t(183),m=t(83),d={login:function(e){var a=e.base_url,t=e.username,r=e.password;console.log("login ");var n={method:"POST",body:JSON.stringify({type:"m.login.password",user:t,password:r})};localStorage.setItem("base_url",a);var s=window.decodeURIComponent(a)+"/_matrix/client/r0/login";return m.a.fetchJson(s,n).then((function(e){var a=e.json;localStorage.setItem("home_server",a.home_server),localStorage.setItem("user_id",a.user_id),localStorage.setItem("access_token",a.access_token),localStorage.setItem("device_id",a.device_id)}))},logout:function(){return console.log("logout "),localStorage.removeItem("access_token"),Promise.resolve()},checkError:function(e){var a=e.status;return console.log("checkError "+a),401===a||403===a?Promise.reject():Promise.resolve()},checkAuth:function(){var e=localStorage.getItem("access_token");return console.log("checkAuth "+e),"string"==typeof e?Promise.resolve():Promise.reject()},getPermissions:function(){return Promise.resolve()}},b=t(22),v=t(79),f=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=localStorage.getItem("access_token");return console.log("httpClient "+e),null!=t&&(a.user={authenticated:!0,token:"Bearer ".concat(t)}),m.a.fetchJson(e,a)},p=function(e,a){return e.indexOf("navgurukul.org")>-1?e:"users"===a||"connections"===a?"@"+e+":navgurukul.org":"rooms"===a?"#"+e+":navgurukul.org":e},h=function(e){var a=localStorage.getItem("base_url"),t=/^mxc:\/\/([^/]+)\/(\w+)/.exec(e);if(console.log("mxcClient "+t),null==t)return null;var r=t[1],n=t[2];return"".concat(a,"/_matrix/media/r0/thumbnail/").concat(r,"/").concat(n,"?width=24&height=24&method=scale")},g={users:{path:"/_synapse/admin/v2/users",map:function(e){return Object(b.a)(Object(b.a)({},e),{},{id:e.name.split(":")[0].slice(1),avatar_src:h(e.avatar_url),is_guest:!!e.is_guest,admin:!!e.admin,deactivated:!!e.deactivated,creation_ts_ms:1e3*e.creation_ts})},data:"users",total:function(e){return e.total},create:function(e){return{endpoint:"/_synapse/admin/v2/users/".concat(e.id),body:e,method:"PUT"}},delete:function(e){return{endpoint:"/_synapse/admin/v1/deactivate/".concat(p(e.id,"users")),body:{erase:!0},method:"POST"}}},rooms:{path:"/_synapse/admin/v1/rooms",map:function(e){return Object(b.a)(Object(b.a)({},e),{},{id:e.room_id,alias:e.canonical_alias,members:e.joined_members,is_encrypted:!!e.encryption,federatable:!!e.federatable,public:!!e.public})},data:"rooms",total:function(e){return e.total_rooms}},devices:{map:function(e){return Object(b.a)(Object(b.a)({},e),{},{id:e.device_id})},data:"devices",reference:function(e){return{endpoint:"/_synapse/admin/v2/users/".concat(e,"/devices")}},delete:function(e){return{endpoint:"/_synapse/admin/v2/users/".concat(e.user_id,"/devices/").concat(e.id)}}},connections:{path:"/_synapse/admin/v1/whois",map:function(e){return Object(b.a)(Object(b.a)({},e),{},{id:p(e.user_id)})},data:"connections"},room_members:{map:function(e){return{id:e}},reference:function(e){return{endpoint:"/_synapse/admin/v1/rooms/".concat(e,"/members")}},data:"members"},servernotices:{map:function(e){return{id:e.event_id}},create:function(e){return{endpoint:"/_synapse/admin/v1/send_server_notice",body:{user_id:e.id,content:{msgtype:"m.text",body:e.body}},method:"POST"}}}};function _(e,a){if(null!==a)return a}function E(e){return"DESC"===e?"b":"f"}var y={getList:function(e,a){console.log("getList "+e);var t=a.filter,r=t.user_id,n=t.guests,s=t.deactivated,o=a.pagination,i=o.page,c=o.perPage,l=a.sort,u=l.field,m=l.order,d=(i-1)*c,b={from:d,limit:c,user_id:r,guests:n,deactivated:s,order_by:u,dir:E(m)},p=localStorage.getItem("base_url");if(!p||!(e in g))return Promise.reject();var h=g[e],_=p+h.path,y="".concat(_,"?").concat(Object(v.stringify)(b));return f(y).then((function(e){var a=e.json;return{data:a[h.data].map(h.map),total:h.total(a,d,c)}}))},getOne:function(e,a){console.log("getOne "+e);var t=localStorage.getItem("base_url");if(!t||!(e in g))return Promise.reject();var r=g[e];a.id=p(a.id,e);var n=t+r.path;return f("".concat(n,"/").concat(a.id)).then((function(e){var a=e.json;return{data:r.map(a)}}))},getMany:function(e,a){console.log("getMany "+e);var t=localStorage.getItem("base_url");if(!t||!(e in g))return Promise.reject();var r=g[e],n=t+r.path;return Promise.all(a.ids.map((function(a){return console.log(a),f("".concat(n,"/").concat(p(a,e)))}))).then((function(e){return{data:e.map((function(e){var a=e.json;return r.map(a)}))}}))},getManyReference:function(e,a){console.log("getManyReference "+e);var t=localStorage.getItem("base_url");if(!t||!(e in g))return Promise.reject();var r=g[e],n=t+r.reference(a.id).endpoint;return f(n).then((function(e){e.headers;return{data:e.json[r.data].map(r.map)}}))},update:function(e,a){console.log("update "+e);var t=localStorage.getItem("base_url");if(!t||!(e in g))return Promise.reject();var r=g[e],n=t+r.path;return f("".concat(n,"/").concat(p(a.data.id,e)),{method:"PUT",body:JSON.stringify(a.data,_)}).then((function(e){var a=e.json;return{data:r.map(a)}}))},updateMany:function(e,a){console.log("updateMany "+e);var t=localStorage.getItem("base_url");if(!t||!(e in g))return Promise.reject();var r=t+g[e].path;return Promise.all(a.ids.map((function(a){return f("".concat(r,"/").concat(p(a,e)))}),{method:"PUT",body:JSON.stringify(a.data,_)})).then((function(e){return{data:e.map((function(e){return e.json}))}}))},create:function(e,a){console.log("create "+e);var t=localStorage.getItem("base_url");if(!t||!(e in g))return Promise.reject();var r=g[e];if(!("create"in r))return Promise.reject();a.data.id=p(a.data.id,e),a.data.threepids=[],a.data.email&&a.data.threepids.push({medium:"email",address:a.data.email}),a.data.msisdn&&a.data.threepids.push({medium:"msisdn",address:a.data.msisdn});var n=r.create(a.data),s=t+n.endpoint;return f(s,{method:n.method,body:JSON.stringify(n.body,_)}).then((function(e){var a=e.json;return{data:r.map(a)}}))},createMany:function(e,a){console.log("createMany "+e);var t=localStorage.getItem("base_url");if(!t||!(e in g))return Promise.reject();var r=g[e];return"create"in r?Promise.all(a.ids.map((function(e){a.data.id=e;var n=r.create(a.data),s=t+n.endpoint;return f(s,{method:n.method,body:JSON.stringify(n.body,_)})}))).then((function(e){return{data:e.map((function(e){return e.json}))}})):Promise.reject()},delete:function(e,a){console.log("delete "+e);var t=localStorage.getItem("base_url");if(!t||!(e in g))return Promise.reject();var r=g[e];if("delete"in r){var n=r.delete(a),s=t+n.endpoint;return console.log(23,n.body),f(s,{method:"method"in n?n.method:"DELETE",body:"body"in n?JSON.stringify(n.body):null}).then((function(e){return{data:e.json}}))}console.log(12,a);var o=t+r.path;return f("".concat(o,"/").concat(a.id),{method:"DELETE",body:JSON.stringify(a.data,_)}).then((function(e){return{data:e.json}}))},deleteMany:function(e,a){console.log("deleteMany "+e,a);var t=localStorage.getItem("base_url");if(!t||!(e in g))return Promise.reject();var r=g[e];if("delete"in r)return Promise.all(a.ids.map((function(e){var n=r.delete(Object(b.a)(Object(b.a)({},a),{},{id:e})),s=t+n.endpoint;return console.log(s),f(s,{method:"method"in n?n.method:"DELETE",body:"body"in n?JSON.stringify(n.body):null})}))).then((function(e){return{data:e.map((function(e){return e.json}))}}));var n=t+r.path;return console.log(n),Promise.all(a.ids.map((function(t){return console.log(t),f("".concat(n,"/").concat(p(t,e)),{method:"DELETE",body:JSON.stringify(a.data,_)})}))).then((function(e){return{data:e.map((function(e){return e.json}))}}))}},j=t(187),O=t(633),S=t(320),w=t.n(S),k=t(321),P=t.n(k),A=t(324),N=t.n(A),I=t(325),C=t.n(I),D=t(88),x=t(630),z=t(635),B=t(636),M=t(344),R=t(629),T=t(625),F=t(31),L=t(346),V=t(620),G=t(619),U=t(601),J=t(602),Z=t(171),W=t(188),H=t(585),q=t(623),$=t(637),K=t(634),Q=t(308),X=t(604),Y=t(626),ee=t(638),ae=t(608),te=t(609),re=t(632),ne=t(627),se=t(610),oe=t(628),ie=t(622),ce=t(611),le=t(65),ue=t(29),me=t(127),de=t(270),be=t(589),ve=t(71),fe=t(225),pe=t.n(fe),he=t(306),ge=t.n(he),_e=t(591),Ee=t(593),ye=t(594),je=t(592),Oe=function(e){var a=e.open,t=e.loading,r=e.onClose,s=e.onSend,o=Object(F.a)(),i=function(e){return n.a.createElement(W.a,e,n.a.createElement(H.a,{label:"resources.servernotices.action.send"}),n.a.createElement(ue.a,{label:"ra.action.cancel",onClick:r},n.a.createElement(ge.a,null)))};return n.a.createElement(_e.a,{open:a,onClose:r,loading:t},n.a.createElement(je.a,null,o("resources.servernotices.action.send")),n.a.createElement(Ee.a,null,n.a.createElement(ye.a,null,o("resources.servernotices.helper.send")),n.a.createElement(K.a,{toolbar:n.a.createElement(i,null),submitOnEnter:!1,redirect:!1,save:s},n.a.createElement(Q.a,{source:"body",label:"resources.servernotices.fields.body",fullWidth:!0,multiline:!0,rows:"4",resettable:!0,validate:Object(Z.c)()}))))},Se=function(e){var a=e.record,t=Object(r.useState)(!1),s=Object(le.a)(t,2),o=s[0],i=s[1],c=Object(me.a)(),l=Object(de.a)("servernotices"),u=Object(le.a)(l,2),m=u[0],d=u[1].loading,v=function(){return i(!1)};return n.a.createElement(r.Fragment,null,n.a.createElement(ue.a,{label:"resources.servernotices.send",onClick:function(){return i(!0)},disabled:d},n.a.createElement(pe.a,null)),n.a.createElement(Oe,{open:o,onClose:v,onSend:function(e){m({payload:{data:Object(b.a)({id:a.id},e)}},{onSuccess:function(){c("resources.servernotices.action.send_success"),v()},onFailure:function(){return c("resources.servernotices.action.send_failure","error")}})}}))},we=function(e){var a=e.selectedIds,t=Object(r.useState)(!1),s=Object(le.a)(t,2),o=s[0],i=s[1],c=Object(me.a)(),l=Object(be.a)(),u=Object(ve.a)(),m=Object(le.a)(u,2),d=m[0],b=m[1].loading,v=function(){return i(!1)};return n.a.createElement(r.Fragment,null,n.a.createElement(ue.a,{label:"resources.servernotices.send",onClick:function(){return i(!0)},disabled:b},n.a.createElement(pe.a,null)),n.a.createElement(Oe,{open:o,onClose:v,onSend:function(e){d({type:"createMany",resource:"servernotices",payload:{ids:a,data:e}},{onSuccess:function(e){e.data;c("resources.servernotices.action.send_success"),l("users"),v()},onFailure:function(e){return c("resources.servernotices.action.send_failure","error")}})}}))},ke=t(533),Pe=t(189),Ae=t(72),Ne=t.n(Ae),Ie=t(94),Ce=t(44),De=t(6),xe=t.n(De),ze=Object(Ie.a)((function(e){return{deleteButton:{color:e.palette.error.main,"&:hover":{backgroundColor:Object(Ce.fade)(e.palette.error.main,.12),"@media (hover: none)":{backgroundColor:"transparent"}}}}}),{name:"RaDeleteDeviceButton"}),Be=function(e){var a=e.record,t=ze(e),s=Object(r.useState)(!1),o=Object(le.a)(s,2),i=o[0],c=o[1],l=Object(ke.a)(),u=Object(me.a)(),m=Object(ve.a)(),d=Object(le.a)(m,2),b=d[0],v=d[1].loading;if(!a)return null;return n.a.createElement(r.Fragment,null,n.a.createElement(ue.a,{label:"ra.action.remove",onClick:function(){return c(!0)},className:xe()("ra-delete-button",t.deleteButton)},n.a.createElement(Ne.a,null)),n.a.createElement(Pe.a,{isOpen:i,loading:v,onConfirm:function(){b({type:"delete",resource:"devices",payload:{id:a.id,user_id:a.user_id}},{onSuccess:function(){u("resources.devices.action.erase.success"),l()},onFailure:function(){return u("resources.devices.action.erase.failure","error")}}),c(!1)},onClose:function(){return c(!1)},title:"resources.devices.action.erase.title",content:"resources.devices.action.erase.content",translateOptions:{id:a.id,name:a.display_name?a.display_name:a.id}}))},Me=Object(Ie.a)({small:{height:"40px",width:"40px"},large:{height:"120px",width:"120px",float:"right"}}),Re=function(e){var a=e.currentSort,t=e.className,s=e.resource,o=e.filters,i=e.displayedFilters,c=e.exporter,l=e.filterValues,u=e.permanentFilter,m=(e.hasCreate,e.basePath),d=(e.selectedIds,e.onUnselectItems,e.showFilter),v=e.maxResults,f=e.total,p=Object(j.a)(e,["currentSort","className","resource","filters","displayedFilters","exporter","filterValues","permanentFilter","hasCreate","basePath","selectedIds","onUnselectItems","showFilter","maxResults","total"]);return n.a.createElement(D.a,Object.assign({className:t},Object(x.c)(p)),o&&Object(r.cloneElement)(o,{resource:s,showFilter:d,displayedFilters:i,filterValues:l,context:"button"}),n.a.createElement(z.a,{basePath:m}),n.a.createElement(B.a,{disabled:0===f,resource:s,sort:a,filter:Object(b.a)(Object(b.a)({},l),u),exporter:c,maxResults:v}))},Te=function(e){return n.a.createElement(M.a,Object.assign({},e,{rowsPerPageOptions:[10,25,50,100,500,1e3]}))},Fe=function(e){return n.a.createElement(R.a,e,n.a.createElement(T.a,{source:"guests",alwaysOn:!0}),n.a.createElement(T.a,{label:"resources.users.fields.show_deactivated",source:"deactivated",alwaysOn:!0}))},Le=function(e){var a=Object(F.a)();return n.a.createElement(r.Fragment,null,n.a.createElement(we,e),n.a.createElement(L.a,Object.assign({},e,{label:"resources.users.action.erase",title:a("resources.users.helper.erase")})))},Ve=function(e){var a=e.source,t=e.className,r=e.record,s=void 0===r?{}:r;return n.a.createElement(O.a,{src:s[a],className:t})},Ge=function(e){var a=Me();return n.a.createElement(V.a,Object.assign({},e,{filters:n.a.createElement(Fe,null),filterDefaultValues:{guests:!0,deactivated:!1},actions:n.a.createElement(Re,{maxResults:1e4}),bulkActionButtons:n.a.createElement(Le,null),pagination:n.a.createElement(Te,null)}),n.a.createElement(G.a,{rowClick:"edit"},n.a.createElement(Ve,{source:"avatar_src",sortable:!1,className:a.small}),n.a.createElement(U.a,{source:"id",sortable:!1}),n.a.createElement(U.a,{source:"displayname",sortable:!1}),n.a.createElement(J.a,{source:"is_guest",sortable:!1}),n.a.createElement(J.a,{source:"admin",sortable:!1}),n.a.createElement(J.a,{source:"deactivated",sortable:!1})))},Ue=Object(Z.b)(/^[a-z0-9._=\-/][a-z0-9._=\-/][a-z0-9._=\-/][a-z0-9._=\-/][a-z0-9._=\-/]+/,"synapseadmin.users.invalid_user_id"),Je=Object(Z.b)(/^[a-zA-Z0-9.!#$%&\u2019*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+\.+([a-zA-Z0-9-][a-zA-Z0-9-]+)*$/,"Enter Proper Email Address"),Ze=function(e){var a=Object(F.a)();return n.a.createElement(W.a,e,n.a.createElement(H.a,{submitOnEnter:!0}),n.a.createElement(q.a,{label:"resources.users.action.erase",title:a("resources.users.helper.erase")}),n.a.createElement(Se,null))},We=function(e){return n.a.createElement($.a,e,n.a.createElement(K.a,null,n.a.createElement(Q.a,{source:"id",autoComplete:"off",validate:Ue}),n.a.createElement(Q.a,{source:"displayname"}),n.a.createElement(X.a,{source:"password",autoComplete:"new-password"}),n.a.createElement(T.a,{source:"admin"}),n.a.createElement(Q.a,{source:"email",autoComplete:"off",validate:Je}),n.a.createElement(Q.a,{source:"msisdn",autoComplete:"off"})))},He=function(e){var a=e.record,t=Object(F.a)();return n.a.createElement("span",null,t("resources.users.name",{smart_count:1})," ",a?'"'.concat(a.displayname,'"'):"")},qe=function(e){var a=Me(),t=Object(F.a)();return n.a.createElement(Y.a,Object.assign({},e,{title:n.a.createElement(He,null)}),n.a.createElement(ee.a,{toolbar:n.a.createElement(Ze,null)},n.a.createElement(ae.a,{label:t("resources.users.name",{smart_count:1}),icon:n.a.createElement(w.a,null)},n.a.createElement(Ve,{source:"avatar_src",sortable:!1,className:a.large}),n.a.createElement(Q.a,{source:"id",disabled:!0}),n.a.createElement(Q.a,{source:"displayname"}),n.a.createElement(X.a,{source:"password",autoComplete:"new-password"}),n.a.createElement(T.a,{source:"admin"}),n.a.createElement(T.a,{source:"deactivated",helperText:"resources.users.helper.deactivate"}),n.a.createElement(te.a,{source:"creation_ts_ms",showTime:!0,options:{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}}),n.a.createElement(U.a,{source:"consent_version"})),n.a.createElement(ae.a,{label:"resources.users.threepid",icon:n.a.createElement(P.a,null),path:"threepid"},n.a.createElement(re.a,{source:"threepids"},n.a.createElement(ne.a,null,n.a.createElement(se.a,{source:"medium",choices:[{id:"email",name:"resources.users.email"},{id:"msisdn",name:"resources.users.msisdn"}],key:"SelectInput"}),n.a.createElement(Q.a,{source:"address",key:"TextInput"})))),n.a.createElement(ae.a,{label:t("resources.devices.name",{smart_count:2}),icon:n.a.createElement(N.a,null),path:"devices"},n.a.createElement(oe.a,{reference:"devices",target:"user_id",addLabel:!1},n.a.createElement(G.a,{style:{width:"100%"}},n.a.createElement(U.a,{source:"device_id",sortable:!1}),n.a.createElement(U.a,{source:"display_name",sortable:!1}),n.a.createElement(U.a,{source:"last_seen_ip",sortable:!1}),n.a.createElement(te.a,{source:"last_seen_ts",showTime:!0,options:{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"},sortable:!1}),n.a.createElement(Be,null)))),n.a.createElement(ae.a,{label:"resources.connections.name",icon:n.a.createElement(C.a,null),path:"connections"},n.a.createElement(ie.a,{reference:"connections",source:"id",addLabel:!1,link:!1},n.a.createElement(ce.a,{source:"devices[].sessions[0].connections",label:"resources.connections.name"},n.a.createElement(G.a,{style:{width:"100%"}},n.a.createElement(U.a,{source:"ip",sortable:!1}),n.a.createElement(te.a,{source:"last_seen",showTime:!0,options:{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"},sortable:!1}),n.a.createElement(U.a,{source:"user_agent",sortable:!1,style:{width:"100%"}})))))))},$e=t(7),Ke=t(631),Qe=t(639),Xe=t(612),Ye=t(613),ea=t(12),aa=t.n(ea),ta=t(49),ra=t(356),na=t(640),sa=t(229),oa=t.n(sa),ia=t(329),ca=t.n(ia),la=t(331),ua=t.n(la),ma=t(180),da=t.n(ma),ba=t(115),va=t.n(ba),fa=t(179),pa=t.n(fa),ha=function(e){return n.a.createElement(M.a,Object.assign({},e,{rowsPerPageOptions:[10,25,50,100,500,1e3]}))},ga=function(e){var a=e.source,t=e.record,r=void 0===t?{}:t,s=e.emptyText,o=Object(F.a)(),i=aa()(r,a),c=!1===i?"ra.boolean.false":"ra.boolean.true";return!1===i||!0===i?n.a.createElement(ta.a,{component:"span",variant:"body2"},n.a.createElement(ra.a,{title:o(c,{_:c})},!0===i?n.a.createElement(oa.a,{"data-testid":"true",htmlColor:"limegreen"}):n.a.createElement(ca.a,{"data-testid":"false",color:"error"}))):n.a.createElement(ta.a,{component:"span",variant:"body2"},s)},_a=function(e){var a=e.record,t=Object(F.a)(),r="";return a&&(r=""!==a.name?a.name:a.id),n.a.createElement("span",null,t("resources.rooms.name",1)," ",r)},Ea=function(e){var a=Object(F.a)();return n.a.createElement(Ke.a,Object.assign({},e,{title:n.a.createElement(_a,null)}),n.a.createElement(Qe.a,null,n.a.createElement(Xe.a,{label:"synapseadmin.rooms.tabs.basic",icon:n.a.createElement(va.a,null)},n.a.createElement(U.a,{source:"room_id"}),n.a.createElement(U.a,{source:"name"}),n.a.createElement(U.a,{source:"canonical_alias"}),n.a.createElement(U.a,{source:"creator"})),n.a.createElement(Xe.a,{label:"synapseadmin.rooms.tabs.detail",icon:n.a.createElement(ua.a,null),path:"detail"},n.a.createElement(U.a,{source:"joined_members"}),n.a.createElement(U.a,{source:"joined_local_members"}),n.a.createElement(U.a,{source:"state_events"}),n.a.createElement(U.a,{source:"version"}),n.a.createElement(U.a,{source:"encryption",emptyText:a("resources.rooms.enums.unencrypted")})),n.a.createElement(Xe.a,{label:"synapseadmin.rooms.tabs.members",icon:n.a.createElement(da.a,null)},n.a.createElement(oe.a,{reference:"room_members",target:"room_id",addLabel:!1},n.a.createElement(G.a,{style:{width:"100%"},rowClick:function(e,a,t){return"/users/"+e}},n.a.createElement(U.a,{source:"id",sortable:!1,label:"resources.users.fields.id"}),n.a.createElement(ie.a,{label:"resources.users.fields.displayname",source:"id",reference:"users",sortable:!1,link:""},n.a.createElement(U.a,{source:"displayname",sortable:!1}))))),n.a.createElement(Xe.a,{label:"synapseadmin.rooms.tabs.permission",icon:n.a.createElement(pa.a,null),path:"permission"},n.a.createElement(J.a,{source:"federatable"}),n.a.createElement(J.a,{source:"public"}),n.a.createElement(Ye.a,{source:"join_rules",choices:[{id:"public",name:"resources.rooms.enums.join_rules.public"},{id:"knock",name:"resources.rooms.enums.join_rules.knock"},{id:"invite",name:"resources.rooms.enums.join_rules.invite"},{id:"private",name:"resources.rooms.enums.join_rules.private"}]}),n.a.createElement(Ye.a,{source:"guest_access",choices:[{id:"can_join",name:"resources.rooms.enums.guest_access.can_join"},{id:"forbidden",name:"resources.rooms.enums.guest_access.forbidden"}]}),n.a.createElement(Ye.a,{source:"history_visibility",choices:[{id:"invited",name:"resources.rooms.enums.history_visibility.invited"},{id:"joined",name:"resources.rooms.enums.history_visibility.joined"},{id:"shared",name:"resources.rooms.enums.history_visibility.shared"},{id:"world_readable",name:"resources.rooms.enums.history_visibility.world_readable"}]}))))},ya=function(e){var a=Object.assign({},e),t=Object(F.a)();return n.a.createElement(R.a,a,n.a.createElement(na.a,{label:t("resources.rooms.fields.joined_local_members"),source:"joined_local_members",defaultValue:!1,style:{marginBottom:8}}),n.a.createElement(na.a,{label:t("resources.rooms.fields.state_events"),source:"state_events",defaultValue:!1,style:{marginBottom:8}}),n.a.createElement(na.a,{label:t("resources.rooms.fields.version"),source:"version",defaultValue:!1,style:{marginBottom:8}}),n.a.createElement(na.a,{label:t("resources.rooms.fields.federatable"),source:"federatable",defaultValue:!1,style:{marginBottom:8}}))};var ja=Object($e.c)((function(e){return{roomfilters:e.admin.resources.rooms.list.params.displayedFilters}}))((function(e){var a=Object.assign({},e),t=a.roomfilters,r=!(!t||!t.joined_local_members),s=!(!t||!t.state_events),o=!(!t||!t.version),i=!(!t||!t.federatable);return n.a.createElement(V.a,Object.assign({},a,{pagination:n.a.createElement(ha,null),sort:{field:"name",order:"ASC"},filters:n.a.createElement(ya,null)}),n.a.createElement(G.a,{rowClick:"show"},n.a.createElement(ga,{source:"is_encrypted",sortBy:"encryption",label:n.a.createElement(oa.a,null)}),n.a.createElement(U.a,{source:"name"}),n.a.createElement(U.a,{source:"joined_members"}),r&&n.a.createElement(U.a,{source:"joined_local_members"}),s&&n.a.createElement(U.a,{source:"state_events"}),o&&n.a.createElement(U.a,{source:"version"}),i&&n.a.createElement(J.a,{source:"federatable"}),n.a.createElement(J.a,{source:"public"})))})),Oa=t(614),Sa=t(615),wa=t(186),ka=t(23),Pa=t(535),Aa=t(600),Na=t(616),Ia=t(349),Ca=t(532),Da=t(181),xa=t.n(Da),za=Object(Ie.a)((function(e){return{main:{display:"flex",flexDirection:"column",minHeight:"calc(100vh - 1em)",alignItems:"center",justifyContent:"flex-start",background:"url(./images/floating-cogs.svg)",backgroundColor:"#f9f9f9",backgroundRepeat:"no-repeat",backgroundSize:"cover"},card:{minWidth:"30em",marginTop:"6em",marginBottom:"6em"},avatar:{margin:"1em",display:"flex",justifyContent:"center"},icon:{backgroundColor:e.palette.secondary.main},hint:{marginTop:"1em",display:"flex",justifyContent:"center",color:e.palette.grey[500]},form:{padding:"0 1em 1em 1em"},input:{marginTop:"1em"},actions:{padding:"0 1em 1em 1em"},serverVersion:{color:"#9e9e9e",fontFamily:"Roboto, Helvetica, Arial, sans-serif",marginBottom:"1em",marginLeft:"0.5em"}}})),Ba=function(e){var a=e.theme,t=za({theme:a}),s=Object(Oa.a)(),o=Object(me.a)(),i=Object(r.useState)(!1),c=Object(le.a)(i,2),l=c[0],u=c[1],d=Object(F.a)(),b=function(e){var a=e.meta,t=(a=void 0===a?{}:a).touched,r=a.error,s=Object.assign({},e.input),o=Object(j.a)(e,["meta","input"]);return n.a.createElement(Pa.a,Object.assign({error:!(!t||!r),helperText:t&&r},s,o,{fullWidth:!0}))},v=function(e){var a=e.formData,s=Object(ka.e)(),o=Object(r.useState)(""),i=Object(le.a)(o,2),c=i[0],u=i[1];return Object(r.useEffect)((function(e){if(a.base_url&&a.base_url.match(/^(http|https):\/\/[a-zA-Z0-9\-.]+$/)){var t="".concat(a.base_url,"/_synapse/admin/v1/server_version");m.a.fetchJson(t,{method:"GET"}).then((function(e){var a=e.json;u("".concat(d("synapseadmin.auth.server_version")," ").concat(a.server_version))})).catch((function(e){u("")}))}}),[a.base_url]),n.a.createElement("div",null,n.a.createElement("div",{className:t.input},n.a.createElement(Q.a,{autoFocus:!0,name:"username",component:b,label:d("ra.auth.username"),disabled:l,onBlur:function(e){if(!a.base_url){var t=function(e){if(!e)return null;var a=e.match(/@[a-zA-Z0-9._=\-/]+:([a-zA-Z0-9\-.]+\.[a-zA-Z]+)/);return a?a[1]:null}(a.username),r="https://".concat(t,"/.well-known/matrix/client");t&&m.a.fetchJson(r,{method:"GET"}).then((function(e){var a=e.json;s.change("base_url",a["m.homeserver"].base_url)})).catch((function(e){s.change("base_url","https://".concat(t))}))}},fullWidth:!0})),n.a.createElement("div",{className:t.input},n.a.createElement(X.a,{name:"password",component:b,label:d("ra.auth.password"),type:"password",disabled:l,fullWidth:!0})),n.a.createElement("div",{className:t.input},n.a.createElement(Q.a,{name:"base_url",component:b,label:d("synapseadmin.auth.base_url"),disabled:l,fullWidth:!0})),n.a.createElement("div",{className:t.serverVersion},c))};return n.a.createElement(ka.b,{initialValues:{base_url:"https://m.navgurukul.org"},onSubmit:function(e){u(!0),s(e).catch((function(e){u(!1),o("string"===typeof e?e:"undefined"!==typeof e&&e.message?e.message:"ra.auth.sign_in_error","warning")}))},validate:function(e){var a={};return e.username||(a.username=d("ra.validation.required")),e.password||(a.password=d("ra.validation.required")),e.base_url?e.base_url.match(/^(http|https):\/\//)?e.base_url.match(/^(http|https):\/\/[a-zA-Z0-9\-.]+(:\d{1,5})?$/)||(a.base_url=d("synapseadmin.auth.url_error")):a.base_url=d("synapseadmin.auth.protocol_error"):a.base_url=d("ra.validation.required"),a},render:function(e){var a=e.handleSubmit;return n.a.createElement("form",{onSubmit:a,noValidate:!0},n.a.createElement("div",{className:t.main},n.a.createElement(Aa.a,{className:t.card},n.a.createElement("div",{className:t.avatar},n.a.createElement(O.a,{className:t.icon},n.a.createElement(xa.a,null))),n.a.createElement("div",{className:t.hint},d("synapseadmin.auth.welcome")),n.a.createElement("div",{className:t.form},n.a.createElement(Sa.a,null,(function(e){return n.a.createElement(v,e)}))),n.a.createElement(Na.a,{className:t.actions},n.a.createElement(Ia.a,{variant:"contained",type:"submit",color:"primary",disabled:l,className:t.button,fullWidth:!0},l&&n.a.createElement(Ca.a,{size:25,thickness:2}),d("ra.auth.sign_in")))),n.a.createElement(wa.a,null)))}})},Ma=t(104),Ra=t.n(Ma),Ta=Object(b.a)(Object(b.a)({},Ra.a),{},{synapseadmin:{auth:{base_url:"Heimserver URL",welcome:"Willkommen bei Synapse-admin",server_version:"Synapse Version",username_error:"Bitte vollst\xe4ndigen Nutzernamen angeben: '@user:domain'",protocol_error:"Die URL muss mit 'http://' oder 'https://' beginnen",url_error:"Keine g\xfcltige Matrix Server URL"},users:{invalid_user_id:"Muss eine vollst\xe4ndige Matrix Benutzer-ID sein, z.B. @benutzer_id:homeserver"},rooms:{details:"Raumdetails",tabs:{basic:"Allgemein",members:"Mitglieder",detail:"Details",permission:"Berechtigungen"}}},resources:{users:{backtolist:"Zur\xfcck zur Liste",name:"Benutzer",email:"E-Mail",msisdn:"Telefon",threepid:"E-Mail / Telefon",fields:{avatar:"Avatar",id:"Benutzer-ID",name:"Name",is_guest:"Gast",admin:"Server Administrator",deactivated:"Deaktiviert",guests:"Zeige G\xe4ste",show_deactivated:"Zeige deaktivierte Benutzer",user_id:"Suche Benutzer",displayname:"Anzeigename",password:"Passwort",avatar_url:"Avatar URL",avatar_src:"Avatar",medium:"Medium",threepids:"3PIDs",address:"Adresse",creation_ts_ms:"Zeitpunkt der Erstellung",consent_version:"Zugestimmte Gesch\xe4ftsbedingungen",device_id:"Ger\xe4te-ID",display_name:"Ger\xe4tename",last_seen_ts:"Zeitstempel",last_seen_ip:"IP-Adresse"},helper:{deactivate:"Deaktivierte Nutzer k\xf6nnen nicht wieder aktiviert werden.",erase:"DSGVO konformes L\xf6schen der Benutzerdaten"},action:{erase:"L\xf6sche Benutzerdaten"}},rooms:{name:"Raum |||| R\xe4ume",fields:{room_id:"Raum-ID",name:"Name",canonical_alias:"Alias",joined_members:"Mitglieder",joined_local_members:"Lokale Mitglieder",state_events:"Ereignisse",version:"Version",is_encrypted:"Verschl\xfcsselt",encryption:"Verschl\xfcsselungs-Algorithmus",federatable:"F\xf6\xadde\xadrierbar",public:"\xd6ffentlich",creator:"Ersteller",join_rules:"Beitrittsregeln",guest_access:"Gastzugriff",history_visibility:"Historie-Sichtbarkeit"},enums:{join_rules:{public:"\xd6ffentlich",knock:"Auf Anfrage",invite:"Nur auf Einladung",private:"Privat"},guest_access:{can_join:"G\xe4ste k\xf6nnen beitreten",forbidden:"G\xe4ste k\xf6nnen nicht beitreten"},history_visibility:{invited:"Ab Einladung",joined:"Ab Beitritt",shared:"Ab Setzen der Einstellung",world_readable:"Jeder"},unencrypted:"Nicht verschl\xfcsselt"}},connections:{name:"Verbindungen",fields:{last_seen:"Datum",ip:"IP-Adresse",user_agent:"User Agent"}},devices:{name:"Ger\xe4t |||| Ger\xe4te",action:{erase:{title:"Entferne %{id}",content:'M\xf6chten Sie das Ger\xe4t "%{name}" wirklich entfernen?',success:"Ger\xe4t erfolgreich entfernt.",failure:"Beim Entfernen ist ein Fehler aufgetreten."}}},servernotices:{name:"Serverbenachrichtigungen",send:"Servernachricht versenden",fields:{body:"Nachricht"},action:{send:"Sende Nachricht",send_success:"Nachricht erfolgreich versendet.",send_failure:"Beim Versenden ist ein Fehler aufgetreten."},helper:{send:'Sendet eine Serverbenachrichtigung an die ausgew\xe4hlten Nutzer. Hierf\xfcr muss das Feature "Server Notices" auf dem Server aktiviert sein.'}}},ra:Object(b.a)(Object(b.a)({},Ra.a.ra),{},{auth:Object(b.a)(Object(b.a)({},Ra.a.ra.auth),{},{auth_check_error:"Anmeldung fehlgeschlagen"}),input:Object(b.a)(Object(b.a)({},Ra.a.ra.input),{},{password:Object(b.a)(Object(b.a)({},Ra.a.ra.input.password),{},{toggle_hidden:"Anzeigen",toggle_visible:"Verstecken"})}),notification:Object(b.a)(Object(b.a)({},Ra.a.ra.notifiaction),{},{logged_out:"Abgemeldet"})})}),Fa=t(182),La={de:Ta,en:Object(b.a)(Object(b.a)({},Fa.a),{},{synapseadmin:{auth:{homeserver:"Homeserver",welcome:"Welcome to Navgurukul Admin",base_url:"Homeserver URL",username_error:"Please enter fully qualified user ID: '@user:domain'",protocol_error:"URL has to start with 'http://' or 'https://'",url_error:"Not a valid Matrix server URL"},users:{invalid_user_id:"Please enter a proper username."},rooms:{tabs:{basic:"Basic",members:"Members",detail:"Details",permission:"Permissions"}}},resources:{users:{backtolist:"Back to list",name:"User |||| Users",email:"Email",msisdn:"Phone",threepid:"Email / Phone",fields:{avatar:"Avatar",id:"User-ID",name:"Name",is_guest:"Guest",admin:"Server Administrator",deactivated:"Deactivated",guests:"Show guests",show_deactivated:"Show deactivated members",user_id:"Search Member",displayname:"Displayname",password:"Password",avatar_url:"Avatar URL",avatar_src:"Avatar",medium:"Medium",threepids:"3PIDs",address:"Address",creation_ts_ms:"Creation timestamp",consent_version:"Consent version",device_id:"Device-ID",display_name:"Device name",last_seen_ts:"Timestamp",last_seen_ip:"IP address"},helper:{deactivate:"Deactivated members cannot be reactivated",erase:"Mark the member as GDPR-erased"},action:{erase:"Erase member data"}},rooms:{name:"Room |||| Rooms",fields:{room_id:"Room-ID",name:"Name",canonical_alias:"Alias",joined_members:"Members",joined_local_members:"local members",state_events:"State events",version:"Version",is_encrypted:"Encrypted",encryption:"Encryption",federatable:"Federatable",public:"Public",creator:"Creator",join_rules:"Join rules",guest_access:"Guest access",history_visibility:"History visibility"},enums:{join_rules:{public:"Public",knock:"Knock",invite:"Invite",private:"Private"},guest_access:{can_join:"Guests can join",forbidden:"Guests can not join"},history_visibility:{invited:"Since invited",joined:"Since joined",shared:"Since shared",world_readable:"Anyone"},unencrypted:"Unencrypted"}},connections:{name:"Connections",fields:{last_seen:"Date",ip:"IP address",user_agent:"User agent"}},devices:{name:"Device |||| Devices",action:{erase:{title:"Removing %{id}",content:'Are you sure you want to remove the device "%{name}"?',success:"Device successfully removed.",failure:"An error has occurred."}}},servernotices:{name:"Server Notices",send:"Send server notices",fields:{body:"Message"},action:{send:"Send note",send_success:"Server notice successfully sent.",send_failure:"An error has occurred."},helper:{send:'Sends a server notice to the selected users. The feature "Server Notices" has to be activated at the server.'}}}})},Va=Object(u.a)((function(e){return La[e]?La[e]:La.en}),Object(i.a)()),Ga=function(){return n.a.createElement(c.a,{loginPage:Ba,authProvider:d,dataProvider:y,i18nProvider:Va},n.a.createElement(l.a,{name:"users",list:Ge,create:We,edit:qe,icon:da.a}),n.a.createElement(l.a,{name:"rooms",list:ja,show:Ea,icon:ba.ViewListIcon}),n.a.createElement(l.a,{name:"connections"}),n.a.createElement(l.a,{name:"devices"}),n.a.createElement(l.a,{name:"room_members"}),n.a.createElement(l.a,{name:"servernotices"}))};o.a.render(n.a.createElement(Ga,null),document.getElementById("root"))}},[[392,1,2]]]);
//# sourceMappingURL=main.96300395.chunk.js.map