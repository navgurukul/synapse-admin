(this["webpackJsonpnavgurukul-admin"]=this["webpackJsonpnavgurukul-admin"]||[]).push([[0],{371:function(e,a,t){e.exports=t(510)},510:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),s=t(18),o=t.n(s),i=t(272),c=t(605),l=t(604),u=t(175),m=t(93),d={login:function(e){var a=e.base_url,t=e.username,r=e.password;console.log("login ");var n={method:"POST",body:JSON.stringify({type:"m.login.password",user:t,password:r})};localStorage.setItem("base_url",a);var s=window.decodeURIComponent(a)+"/_matrix/client/r0/login";return m.a.fetchJson(s,n).then((function(e){var a=e.json;localStorage.setItem("home_server",a.home_server),localStorage.setItem("user_id",a.user_id),localStorage.setItem("access_token",a.access_token),localStorage.setItem("device_id",a.device_id)}))},logout:function(){return console.log("logout "),localStorage.removeItem("access_token"),Promise.resolve()},checkError:function(e){var a=e.status;return console.log("checkError "+a),401===a||403===a?Promise.reject():Promise.resolve()},checkAuth:function(){var e=localStorage.getItem("access_token");return console.log("checkAuth "+e),"string"==typeof e?Promise.resolve():Promise.reject()},getPermissions:function(){return Promise.resolve()}},b=t(151),v=t(21),f=t(70),p=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=localStorage.getItem("access_token");return console.log("httpClient "+e),null!=t&&(a.user={authenticated:!0,token:"Bearer ".concat(t)}),m.a.fetchJson(e,a)},g=function(e,a){return e.indexOf("navgurukul.org")>-1?e:"users"===a||"connections"===a?"@"+e+":navgurukul.org":"rooms"===a?"#"+e+":navgurukul.org":e},h=function(e){var a=localStorage.getItem("base_url"),t=/^mxc:\/\/([^/]+)\/(\w+)/.exec(e);if(console.log("mxcClient "+t),null==t)return null;var r=t[1],n=t[2];return"".concat(a,"/_matrix/media/r0/thumbnail/").concat(r,"/").concat(n,"?width=24&height=24&method=scale")},_={users:{path:"/_synapse/admin/v2/users",map:function(e){return Object(v.a)(Object(v.a)({},e),{},{id:e.name.split(":")[0].slice(1),avatar_src:h(e.avatar_url),is_guest:!!e.is_guest,admin:!!e.admin,deactivated:!!e.deactivated,creation_ts_ms:1e3*e.creation_ts})},data:"users",total:function(e){return e.total},create:function(e){return{endpoint:"/_synapse/admin/v2/users/".concat(e.id),body:e,method:"PUT"}},delete:function(e){return{endpoint:"/_synapse/admin/v1/deactivate/".concat(g(e,"users")),body:{erase:!0,id:e},method:"POST"}}},rooms:{path:"/_synapse/admin/v1/rooms",map:function(e){return Object(v.a)(Object(v.a)({},e),{},{id:e.room_id,alias:e.canonical_alias,members:e.joined_members,is_encrypted:!!e.encryption,federatable:!!e.federatable,public:!!e.public})},data:"rooms",total:function(e){return e.total_rooms}},connections:{path:"/_synapse/admin/v1/whois",map:function(e){return Object(v.a)(Object(v.a)({},e),{},{id:g(e.user_id)})},data:"connections"},servernotices:{map:function(e){return{id:e.event_id}},create:function(e){return{endpoint:"/_synapse/admin/v1/send_server_notice",body:{user_id:e.id,content:{msgtype:"m.text",body:e.body}},method:"POST"}}}};function E(e,a){if(null!==a)return a}function y(e){return"DESC"===e?"b":"f"}var j={getList:function(e,a){console.log("getList "+e);var t=a.filter,r=t.user_id,n=t.guests,s=t.deactivated,o=a.pagination,i=o.page,c=o.perPage,l=a.sort,u=l.field,m=l.order,d=(i-1)*c,b={from:d,limit:c,user_id:r,guests:n,deactivated:s,order_by:u,dir:y(m)},v=localStorage.getItem("base_url");if(!v||!(e in _))return Promise.reject();var g=_[e],h=v+g.path,E="".concat(h,"?").concat(Object(f.stringify)(b));return p(E).then((function(e){var a=e.json;return{data:a[g.data].map(g.map),total:g.total(a,d,c)}}))},getOne:function(e,a){console.log("getOne "+e);var t=localStorage.getItem("base_url");if(!t||!(e in _))return Promise.reject();var r=_[e];a.id=g(a.id,e);var n=t+r.path;return p("".concat(n,"/").concat(a.id)).then((function(e){var a=e.json;return{data:r.map(a)}}))},getMany:function(e,a){console.log("getMany "+e);var t=localStorage.getItem("base_url");if(!t||!(e in _))return Promise.reject();var r=_[e],n=t+r.path;return Promise.all(a.ids.map((function(a){return console.log(a),p("".concat(n,"/").concat(g(a,e)))}))).then((function(e){return{data:e.map((function(e){var a=e.json;return r.map(a)}))}}))},getManyReference:function(e,a){console.log("getManyReference "+e);var t=a.pagination,r=t.page,n=t.perPage,s=a.sort,o=s.field,i=s.order,c={sort:JSON.stringify([o,i]),range:JSON.stringify([(r-1)*n,r*n-1]),filter:JSON.stringify(Object(v.a)(Object(v.a)({},a.filter),{},Object(b.a)({},a.target,a.id)))},l=localStorage.getItem("base_url");if(!l||!(e in _))return Promise.reject();var u=l+_[e].path,m="".concat(u,"?").concat(Object(f.stringify)(c));return p(m).then((function(e){var a=e.headers;return{data:e.json,total:parseInt(a.get("content-range").split("/").pop(),10)}}))},update:function(e,a){console.log("update "+e);var t=localStorage.getItem("base_url");if(!t||!(e in _))return Promise.reject();var r=_[e],n=t+r.path;return p("".concat(n,"/").concat(g(a.data.id,e)),{method:"PUT",body:JSON.stringify(a.data,E)}).then((function(e){var a=e.json;return{data:r.map(a)}}))},updateMany:function(e,a){console.log("updateMany "+e);var t=localStorage.getItem("base_url");if(!t||!(e in _))return Promise.reject();var r=t+_[e].path;return Promise.all(a.ids.map((function(a){return p("".concat(r,"/").concat(g(a,e)))}),{method:"PUT",body:JSON.stringify(a.data,E)})).then((function(e){return{data:e.map((function(e){return e.json}))}}))},create:function(e,a){console.log("create "+e);var t=localStorage.getItem("base_url");if(!t||!(e in _))return Promise.reject();var r=_[e];if(!("create"in r))return Promise.reject();a.data.id=g(a.data.id,e),a.data.threepids=[],a.data.email&&a.data.threepids.push({medium:"email",address:a.data.email}),a.data.msisdn&&a.data.threepids.push({medium:"msisdn",address:a.data.msisdn});var n=r.create(a.data),s=t+n.endpoint;return p(s,{method:n.method,body:JSON.stringify(n.body,E)}).then((function(e){var a=e.json;return{data:r.map(a)}}))},createMany:function(e,a){console.log("createMany "+e);var t=localStorage.getItem("base_url");if(!t||!(e in _))return Promise.reject();var r=_[e];return"create"in r?Promise.all(a.ids.map((function(e){a.data.id=e;var n=r.create(a.data),s=t+n.endpoint;return p(s,{method:n.method,body:JSON.stringify(n.body,E)})}))).then((function(e){return{data:e.map((function(e){return e.json}))}})):Promise.reject()},delete:function(e,a){console.log("delete "+e);var t=localStorage.getItem("base_url");if(!t||!(e in _))return Promise.reject();var r=_[e];if("delete"in r){var n=r.delete(a.id),s=t+n.endpoint;return console.log(23,n.body),p(s,{method:n.method,body:JSON.stringify(n.body)}).then((function(e){return{data:e.json}}))}console.log(12,a);var o=t+r.path;return p("".concat(o,"/").concat(a.id),{method:"DELETE",body:JSON.stringify(a.data,E)}).then((function(e){return{data:e.json}}))},deleteMany:function(e,a){console.log("deleteMany "+e,a);var t=localStorage.getItem("base_url");if(!t||!(e in _))return Promise.reject();var r=_[e];if("delete"in r)return Promise.all(a.ids.map((function(e){var a=r.delete(e),n=t+a.endpoint;return console.log(n),p(n,{method:a.method,body:JSON.stringify(a.body)})}))).then((function(e){return{data:e.map((function(e){return e.json}))}}));var n=t+r.path;return console.log(n),Promise.all(a.ids.map((function(t){return console.log(t),p("".concat(n,"/").concat(g(t,e)),{method:"DELETE",body:JSON.stringify(a.data,E)})}))).then((function(e){return{data:e.map((function(e){return e.json}))}}))}},O=t(179),S=t(619),w=t(300),k=t.n(w),P=t(301),N=t.n(P),A=t(304),I=t.n(A),x=t(82),z=t(607),C=t(621),M=t(622),B=t(324),D=t(613),R=t(614),T=t(35),V=t(326),F=t(609),J=t(606),U=t(588),L=t(589),G=t(165),Z=t(180),W=t(572),H=t(612),q=t(623),$=t(620),K=t(288),Q=t(591),X=t(615),Y=t(624),ee=t(595),ae=t(596),te=t(618),re=t(616),ne=t(597),se=t(611),oe=t(598),ie=t(89),ce=t(29),le=t(211),ue=t(258),me=t(576),de=t(69),be=t(216),ve=t.n(be),fe=t(286),pe=t.n(fe),ge=t(578),he=t(580),_e=t(581),Ee=t(579),ye=function(e){var a=e.open,t=e.loading,r=e.onClose,s=e.onSend,o=Object(T.a)(),i=function(e){return n.a.createElement(Z.a,e,n.a.createElement(W.a,{label:"resources.servernotices.action.send"}),n.a.createElement(ce.a,{label:"ra.action.cancel",onClick:r},n.a.createElement(pe.a,null)))};return n.a.createElement(ge.a,{open:a,onClose:r,loading:t},n.a.createElement(Ee.a,null,o("resources.servernotices.action.send")),n.a.createElement(he.a,null,n.a.createElement(_e.a,null,o("resources.servernotices.helper.send")),n.a.createElement($.a,{toolbar:n.a.createElement(i,null),submitOnEnter:!1,redirect:!1,save:s},n.a.createElement(K.a,{source:"body",label:"resources.servernotices.fields.body",fullWidth:!0,multiline:!0,rows:"4",resettable:!0,validate:Object(G.c)()}))))},je=function(e){var a=e.record,t=Object(r.useState)(!1),s=Object(ie.a)(t,2),o=s[0],i=s[1],c=Object(le.a)(),l=Object(ue.a)("servernotices"),u=Object(ie.a)(l,2),m=u[0],d=u[1].loading,b=function(){return i(!1)};return n.a.createElement(r.Fragment,null,n.a.createElement(ce.a,{label:"resources.servernotices.send",onClick:function(){return i(!0)},disabled:d},n.a.createElement(ve.a,null)),n.a.createElement(ye,{open:o,onClose:b,onSend:function(e){m({payload:{data:Object(v.a)({id:a.id},e)}},{onSuccess:function(){c("resources.servernotices.action.send_success"),b()},onFailure:function(){return c("resources.servernotices.action.send_failure","error")}})}}))},Oe=function(e){var a=e.selectedIds,t=Object(r.useState)(!1),s=Object(ie.a)(t,2),o=s[0],i=s[1],c=Object(le.a)(),l=Object(me.a)(),u=Object(de.a)(),m=Object(ie.a)(u,2),d=m[0],b=m[1].loading,v=function(){return i(!1)};return n.a.createElement(r.Fragment,null,n.a.createElement(ce.a,{label:"resources.servernotices.send",onClick:function(){return i(!0)},disabled:b},n.a.createElement(ve.a,null)),n.a.createElement(ye,{open:o,onClose:v,onSend:function(e){d({type:"createMany",resource:"servernotices",payload:{ids:a,data:e}},{onSuccess:function(e){e.data;c("resources.servernotices.action.send_success"),l("users"),v()},onFailure:function(e){return c("resources.servernotices.action.send_failure","error")}})}}))},Se=t(90),we=Object(Se.a)({small:{height:"40px",width:"40px"},large:{height:"120px",width:"120px",float:"right"}}),ke=function(e){var a=e.currentSort,t=e.className,s=e.resource,o=e.filters,i=e.displayedFilters,c=e.exporter,l=e.filterValues,u=e.permanentFilter,m=(e.hasCreate,e.basePath),d=(e.selectedIds,e.onUnselectItems,e.showFilter),b=e.maxResults,f=e.total,p=Object(O.a)(e,["currentSort","className","resource","filters","displayedFilters","exporter","filterValues","permanentFilter","hasCreate","basePath","selectedIds","onUnselectItems","showFilter","maxResults","total"]);return n.a.createElement(x.a,Object.assign({className:t},Object(z.c)(p)),o&&Object(r.cloneElement)(o,{resource:s,showFilter:d,displayedFilters:i,filterValues:l,context:"button"}),n.a.createElement(C.a,{basePath:m}),n.a.createElement(M.a,{disabled:0===f,resource:s,sort:a,filter:Object(v.a)(Object(v.a)({},l),u),exporter:c,maxResults:b}))},Pe=function(e){return n.a.createElement(B.a,Object.assign({},e,{rowsPerPageOptions:[10,25,50,100,500,1e3]}))},Ne=function(e){return n.a.createElement(D.a,e,n.a.createElement(R.a,{source:"guests",alwaysOn:!0}),n.a.createElement(R.a,{label:"resources.users.fields.show_deactivated",source:"deactivated",alwaysOn:!0}))},Ae=function(e){var a=Object(T.a)();return n.a.createElement(r.Fragment,null,n.a.createElement(Oe,e),n.a.createElement(V.a,Object.assign({},e,{label:"resources.users.action.erase",title:a("resources.users.helper.erase")})))},Ie=function(e){var a=e.source,t=e.className,r=e.record,s=void 0===r?{}:r;return n.a.createElement(S.a,{src:s[a],className:t})},xe=function(e){var a=we();return n.a.createElement(F.a,Object.assign({},e,{filters:n.a.createElement(Ne,null),filterDefaultValues:{guests:!0,deactivated:!1},actions:n.a.createElement(ke,{maxResults:1e4}),bulkActionButtons:n.a.createElement(Ae,null),pagination:n.a.createElement(Pe,null)}),n.a.createElement(J.a,{rowClick:"edit"},n.a.createElement(Ie,{source:"avatar_src",sortable:!1,className:a.small}),n.a.createElement(U.a,{source:"id",sortable:!1}),n.a.createElement(U.a,{source:"displayname",sortable:!1}),n.a.createElement(L.a,{source:"is_guest",sortable:!1}),n.a.createElement(L.a,{source:"admin",sortable:!1}),n.a.createElement(L.a,{source:"deactivated",sortable:!1})))},ze=Object(G.b)(/^[a-z0-9._=\-/][a-z0-9._=\-/][a-z0-9._=\-/][a-z0-9._=\-/][a-z0-9._=\-/]+/,"synapseadmin.users.invalid_user_id"),Ce=Object(G.b)(/^[a-zA-Z0-9.!#$%&\u2019*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+\.+([a-zA-Z0-9-][a-zA-Z0-9-]+)*$/,"Enter Proper Email Address"),Me=function(e){var a=Object(T.a)();return n.a.createElement(Z.a,e,n.a.createElement(W.a,{submitOnEnter:!0}),n.a.createElement(H.a,{label:"resources.users.action.erase",title:a("resources.users.helper.erase")}),n.a.createElement(je,null))},Be=function(e){return n.a.createElement(q.a,e,n.a.createElement($.a,null,n.a.createElement(K.a,{source:"id",autoComplete:"off",validate:ze}),n.a.createElement(K.a,{source:"displayname"}),n.a.createElement(Q.a,{source:"password",autoComplete:"new-password"}),n.a.createElement(R.a,{source:"admin"}),n.a.createElement(K.a,{source:"email",autoComplete:"off",validate:Ce}),n.a.createElement(K.a,{source:"msisdn",autoComplete:"off"})))},De=function(e){var a=e.record,t=Object(T.a)();return n.a.createElement("span",null,t("resources.users.name",{smart_count:1})," ",a?'"'.concat(a.displayname,'"'):"")},Re=function(e){var a=we();return n.a.createElement(X.a,Object.assign({},e,{title:n.a.createElement(De,null)}),n.a.createElement(Y.a,{toolbar:n.a.createElement(Me,null)},n.a.createElement(ee.a,{label:"resources.users.name",icon:n.a.createElement(k.a,null)},n.a.createElement(Ie,{source:"avatar_src",sortable:!1,className:a.large}),n.a.createElement(K.a,{source:"id",disabled:!0}),n.a.createElement(K.a,{source:"displayname"}),n.a.createElement(Q.a,{source:"password",autoComplete:"new-password"}),n.a.createElement(R.a,{source:"admin"}),n.a.createElement(R.a,{source:"deactivated",helperText:"resources.users.helper.deactivate"}),n.a.createElement(ae.a,{source:"creation_ts_ms",showTime:!0,options:{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}}),n.a.createElement(U.a,{source:"consent_version"})),n.a.createElement(ee.a,{label:"resources.users.threepid",icon:n.a.createElement(N.a,null),path:"threepid"},n.a.createElement(te.a,{source:"threepids"},n.a.createElement(re.a,null,n.a.createElement(ne.a,{source:"medium",choices:[{id:"email",name:"resources.users.email"},{id:"msisdn",name:"resources.users.msisdn"}],key:"SelectInput"}),n.a.createElement(K.a,{source:"address",key:"TextInput"})))),n.a.createElement(ee.a,{label:"resources.connections.name",icon:n.a.createElement(I.a,null),path:"connections"},n.a.createElement(se.a,{reference:"connections",source:"id",addLabel:!1,link:!1},n.a.createElement(oe.a,{source:"devices[].sessions[0].connections",label:"resources.connections.name"},n.a.createElement(J.a,{style:{width:"100%"}},n.a.createElement(U.a,{source:"ip",sortable:!1}),n.a.createElement(ae.a,{source:"last_seen",showTime:!0,options:{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"},sortable:!1}),n.a.createElement(U.a,{source:"user_agent",sortable:!1,style:{width:"100%"}})))))))},Te=t(8),Ve=t(617),Fe=t(625),Je=t(599),Ue=t(600),Le=t(12),Ge=t.n(Le),Ze=t(45),We=t(336),He=t(626),qe=t(221),$e=t.n(qe),Ke=t(308),Qe=t.n(Ke),Xe=t(310),Ye=t.n(Xe),ea=t(113),aa=t.n(ea),ta=t(172),ra=t.n(ta),na=function(e){return n.a.createElement(B.a,Object.assign({},e,{rowsPerPageOptions:[10,25,50,100,500,1e3]}))},sa=function(e){var a=e.source,t=e.record,r=void 0===t?{}:t,s=e.emptyText,o=Object(T.a)(),i=Ge()(r,a),c=!1===i?"ra.boolean.false":"ra.boolean.true";return!1===i||!0===i?n.a.createElement(Ze.a,{component:"span",variant:"body2"},n.a.createElement(We.a,{title:o(c,{_:c})},!0===i?n.a.createElement($e.a,{"data-testid":"true",htmlColor:"limegreen"}):n.a.createElement(Qe.a,{"data-testid":"false",color:"error"}))):n.a.createElement(Ze.a,{component:"span",variant:"body2"},s)},oa=function(e){var a=e.record,t=Object(T.a)(),r="";return a&&(r=""!==a.name?a.name:a.id),n.a.createElement("span",null,t("resources.rooms.name",1)," ",r)},ia=function(e){var a=Object(T.a)();return n.a.createElement(Ve.a,Object.assign({},e,{title:n.a.createElement(oa,null)}),n.a.createElement(Fe.a,null,n.a.createElement(Je.a,{label:"synapseadmin.rooms.tabs.basic",icon:n.a.createElement(aa.a,null)},n.a.createElement(U.a,{source:"room_id"}),n.a.createElement(U.a,{source:"name"}),n.a.createElement(U.a,{source:"canonical_alias"}),n.a.createElement(U.a,{source:"creator"})),n.a.createElement(Je.a,{label:"synapseadmin.rooms.tabs.detail",icon:n.a.createElement(Ye.a,null),path:"detail"},n.a.createElement(U.a,{source:"joined_members"}),n.a.createElement(U.a,{source:"joined_local_members"}),n.a.createElement(U.a,{source:"state_events"}),n.a.createElement(U.a,{source:"version"}),n.a.createElement(U.a,{source:"encryption",emptyText:a("resources.rooms.enums.unencrypted")})),n.a.createElement(Je.a,{label:"synapseadmin.rooms.tabs.permission",icon:n.a.createElement(ra.a,null),path:"permission"},n.a.createElement(L.a,{source:"federatable"}),n.a.createElement(L.a,{source:"public"}),n.a.createElement(Ue.a,{source:"join_rules",choices:[{id:"public",name:"resources.rooms.enums.join_rules.public"},{id:"knock",name:"resources.rooms.enums.join_rules.knock"},{id:"invite",name:"resources.rooms.enums.join_rules.invite"},{id:"private",name:"resources.rooms.enums.join_rules.private"}]}),n.a.createElement(Ue.a,{source:"guest_access",choices:[{id:"can_join",name:"resources.rooms.enums.guest_access.can_join"},{id:"forbidden",name:"resources.rooms.enums.guest_access.forbidden"}]}),n.a.createElement(Ue.a,{source:"history_visibility",choices:[{id:"invited",name:"resources.rooms.enums.history_visibility.invited"},{id:"joined",name:"resources.rooms.enums.history_visibility.joined"},{id:"shared",name:"resources.rooms.enums.history_visibility.shared"},{id:"world_readable",name:"resources.rooms.enums.history_visibility.world_readable"}]}))))},ca=function(e){var a=Object.assign({},e),t=Object(T.a)();return n.a.createElement(D.a,a,n.a.createElement(He.a,{label:t("resources.rooms.fields.joined_local_members"),source:"joined_local_members",defaultValue:!1,style:{marginBottom:8}}),n.a.createElement(He.a,{label:t("resources.rooms.fields.state_events"),source:"state_events",defaultValue:!1,style:{marginBottom:8}}),n.a.createElement(He.a,{label:t("resources.rooms.fields.version"),source:"version",defaultValue:!1,style:{marginBottom:8}}),n.a.createElement(He.a,{label:t("resources.rooms.fields.federatable"),source:"federatable",defaultValue:!1,style:{marginBottom:8}}))};var la=Object(Te.c)((function(e){return{roomfilters:e.admin.resources.rooms.list.params.displayedFilters}}))((function(e){var a=Object.assign({},e),t=a.roomfilters,r=!(!t||!t.joined_local_members),s=!(!t||!t.state_events),o=!(!t||!t.version),i=!(!t||!t.federatable);return n.a.createElement(F.a,Object.assign({},a,{pagination:n.a.createElement(na,null),sort:{field:"name",order:"ASC"},filters:n.a.createElement(ca,null)}),n.a.createElement(J.a,{rowClick:"show"},n.a.createElement(sa,{source:"is_encrypted",sortBy:"encryption",label:n.a.createElement($e.a,null)}),n.a.createElement(U.a,{source:"name"}),n.a.createElement(U.a,{source:"joined_members"}),r&&n.a.createElement(U.a,{source:"joined_local_members"}),s&&n.a.createElement(U.a,{source:"state_events"}),o&&n.a.createElement(U.a,{source:"version"}),i&&n.a.createElement(L.a,{source:"federatable"}),n.a.createElement(L.a,{source:"public"})))})),ua=t(601),ma=t(602),da=t(178),ba=t(23),va=t(517),fa=t(587),pa=t(603),ga=t(329),ha=t(514),_a=t(173),Ea=t.n(_a),ya=Object(Se.a)((function(e){return{main:{display:"flex",flexDirection:"column",minHeight:"calc(100vh - 1em)",alignItems:"center",justifyContent:"flex-start",background:"url(./images/floating-cogs.svg)",backgroundColor:"#f9f9f9",backgroundRepeat:"no-repeat",backgroundSize:"cover"},card:{minWidth:"30em",marginTop:"6em",marginBottom:"6em"},avatar:{margin:"1em",display:"flex",justifyContent:"center"},icon:{backgroundColor:e.palette.secondary.main},hint:{marginTop:"1em",display:"flex",justifyContent:"center",color:e.palette.grey[500]},form:{padding:"0 1em 1em 1em"},input:{marginTop:"1em"},actions:{padding:"0 1em 1em 1em"},serverVersion:{color:"#9e9e9e",fontFamily:"Roboto, Helvetica, Arial, sans-serif",marginBottom:"1em",marginLeft:"0.5em"}}})),ja=function(e){var a=e.theme,t=ya({theme:a}),s=Object(ua.a)(),o=Object(le.a)(),i=Object(r.useState)(!1),c=Object(ie.a)(i,2),l=c[0],u=c[1],d=Object(T.a)(),b=function(e){var a=e.meta,t=(a=void 0===a?{}:a).touched,r=a.error,s=Object.assign({},e.input),o=Object(O.a)(e,["meta","input"]);return n.a.createElement(va.a,Object.assign({error:!(!t||!r),helperText:t&&r},s,o,{fullWidth:!0}))},v=function(e){var a=e.formData,s=Object(ba.e)(),o=Object(r.useState)(""),i=Object(ie.a)(o,2),c=i[0],u=i[1];return Object(r.useEffect)((function(e){if(a.base_url&&a.base_url.match(/^(http|https):\/\/[a-zA-Z0-9\-.]+$/)){var t="".concat(a.base_url,"/_synapse/admin/v1/server_version");m.a.fetchJson(t,{method:"GET"}).then((function(e){var a=e.json;u("".concat(d("synapseadmin.auth.server_version")," ").concat(a.server_version))})).catch((function(e){u("")}))}}),[a.base_url]),n.a.createElement("div",null,n.a.createElement("div",{className:t.input},n.a.createElement(K.a,{autoFocus:!0,name:"username",component:b,label:d("ra.auth.username"),disabled:l,onBlur:function(e){if(!a.base_url){var t=function(e){if(!e)return null;var a=e.match(/@[a-zA-Z0-9._=\-/]+:([a-zA-Z0-9\-.]+\.[a-zA-Z]+)/);return a?a[1]:null}(a.username),r="https://".concat(t,"/.well-known/matrix/client");t&&m.a.fetchJson(r,{method:"GET"}).then((function(e){var a=e.json;s.change("base_url",a["m.homeserver"].base_url)})).catch((function(e){s.change("base_url","https://".concat(t))}))}},fullWidth:!0})),n.a.createElement("div",{className:t.input},n.a.createElement(Q.a,{name:"password",component:b,label:d("ra.auth.password"),type:"password",disabled:l,fullWidth:!0})),n.a.createElement("div",{className:t.input},n.a.createElement(K.a,{name:"base_url",component:b,label:d("synapseadmin.auth.base_url"),disabled:l,fullWidth:!0})),n.a.createElement("div",{className:t.serverVersion},c))};return n.a.createElement(ba.b,{initialValues:{base_url:"https://m.navgurukul.org"},onSubmit:function(e){u(!0),s(e).catch((function(e){u(!1),o("string"===typeof e?e:"undefined"!==typeof e&&e.message?e.message:"ra.auth.sign_in_error","warning")}))},validate:function(e){var a={};return e.username||(a.username=d("ra.validation.required")),e.password||(a.password=d("ra.validation.required")),e.base_url?e.base_url.match(/^(http|https):\/\//)?e.base_url.match(/^(http|https):\/\/[a-zA-Z0-9\-.]+(:\d{1,5})?$/)||(a.base_url=d("synapseadmin.auth.url_error")):a.base_url=d("synapseadmin.auth.protocol_error"):a.base_url=d("ra.validation.required"),a},render:function(e){var a=e.handleSubmit;return n.a.createElement("form",{onSubmit:a,noValidate:!0},n.a.createElement("div",{className:t.main},n.a.createElement(fa.a,{className:t.card},n.a.createElement("div",{className:t.avatar},n.a.createElement(S.a,{className:t.icon},n.a.createElement(Ea.a,null))),n.a.createElement("div",{className:t.hint},d("synapseadmin.auth.welcome")),n.a.createElement("div",{className:t.form},n.a.createElement(ma.a,null,(function(e){return n.a.createElement(v,e)}))),n.a.createElement(pa.a,{className:t.actions},n.a.createElement(ga.a,{variant:"contained",type:"submit",color:"primary",disabled:l,className:t.button,fullWidth:!0},l&&n.a.createElement(ha.a,{size:25,thickness:2}),d("ra.auth.sign_in")))),n.a.createElement(da.a,null)))}})},Oa=t(322),Sa=t.n(Oa),wa=t(101),ka=t.n(wa),Pa=Object(v.a)(Object(v.a)({},ka.a),{},{synapseadmin:{auth:{base_url:"Heimserver URL",welcome:"Willkommen bei Synapse-admin",server_version:"Synapse Version",username_error:"Bitte vollst\xe4ndigen Nutzernamen angeben: '@user:domain'",protocol_error:"Die URL muss mit 'http://' oder 'https://' beginnen",url_error:"Keine g\xfcltige Matrix Server URL"},users:{invalid_user_id:"Muss eine vollst\xe4ndige Matrix Benutzer-ID sein, z.B. @benutzer_id:homeserver"},rooms:{details:"Raumdetails",tabs:{basic:"Allgemein",members:"Mitglieder",detail:"Details",permission:"Berechtigungen"}}},resources:{users:{backtolist:"Zur\xfcck zur Liste",name:"Benutzer",email:"E-Mail",msisdn:"Telefon",threepid:"E-Mail / Telefon",fields:{avatar:"Avatar",id:"Benutzer-ID",name:"Name",is_guest:"Gast",admin:"Admin",deactivated:"Deaktiviert",guests:"Zeige G\xe4ste",show_deactivated:"Zeige deaktivierte Benutzer",user_id:"Suche Benutzer",displayname:"Anzeigename",password:"Passwort",avatar_url:"Avatar URL",avatar_src:"Avatar",medium:"Medium",threepids:"3PIDs",address:"Adresse",creation_ts_ms:"Zeitpunkt der Erstellung",consent_version:"Zugestimmte Gesch\xe4ftsbedingungen"},helper:{deactivate:"Deaktivierte Nutzer k\xf6nnen nicht wieder aktiviert werden.",erase:"DSGVO konformes L\xf6schen der Benutzerdaten"},action:{erase:"L\xf6sche Benutzerdaten"}},rooms:{name:"Raum |||| R\xe4ume",fields:{room_id:"Raum-ID",name:"Name",canonical_alias:"Alias",joined_members:"Mitglieder",joined_local_members:"Lokale Mitglieder",state_events:"Ereignisse",version:"Version",is_encrypted:"Verschl\xfcsselt",encryption:"Verschl\xfcsselungs-Algorithmus",federatable:"F\xf6\xadde\xadrierbar",public:"\xd6ffentlich",creator:"Ersteller",join_rules:"Beitrittsregeln",guest_access:"Gastzugriff",history_visibility:"Historie-Sichtbarkeit"},enums:{join_rules:{public:"\xd6ffentlich",knock:"Auf Anfrage",invite:"Nur auf Einladung",private:"Privat"},guest_access:{can_join:"G\xe4ste k\xf6nnen beitreten",forbidden:"G\xe4ste k\xf6nnen nicht beitreten"},history_visibility:{invited:"Ab Einladung",joined:"Ab Beitritt",shared:"Ab Setzen der Einstellung",world_readable:"Jeder"},unencrypted:"Nicht verschl\xfcsselt"}},connections:{name:"Verbindungen",fields:{last_seen:"Datum",ip:"IP-Adresse",user_agent:"User Agent"}},servernotices:{name:"Serverbenachrichtigungen",send:"Servernachricht versenden",fields:{body:"Nachricht"},action:{send:"Sende Nachricht",send_success:"Nachricht erfolgreich versendet.",send_failure:"Beim Versenden ist ein Fehler aufgetreten."},helper:{send:'Sendet eine Serverbenachrichtigung an die ausgew\xe4hlten Nutzer. Hierf\xfcr muss das Feature "Server Notices" auf dem Server aktiviert sein.'}}},ra:Object(v.a)(Object(v.a)({},ka.a.ra),{},{auth:Object(v.a)(Object(v.a)({},ka.a.ra.auth),{},{auth_check_error:"Anmeldung fehlgeschlagen"}),input:Object(v.a)(Object(v.a)({},ka.a.ra.input),{},{password:Object(v.a)(Object(v.a)({},ka.a.ra.input.password),{},{toggle_hidden:"Anzeigen",toggle_visible:"Verstecken"})}),notification:Object(v.a)(Object(v.a)({},ka.a.ra.notifiaction),{},{logged_out:"Abgemeldet"})})}),Na=t(174),Aa={de:Pa,en:Object(v.a)(Object(v.a)({},Na.a),{},{synapseadmin:{auth:{homeserver:"Homeserver",welcome:"Welcome to Navgurukul Admin",base_url:"Homeserver URL",username_error:"Please enter fully qualified user ID: '@user:domain'",protocol_error:"URL has to start with 'http://' or 'https://'",url_error:"Not a valid Matrix server URL"},users:{invalid_user_id:"Please enter a proper username."},rooms:{tabs:{basic:"Basic",members:"Members",detail:"Details",permission:"Permissions"}}},resources:{users:{backtolist:"Back to list",name:"User |||| Users",email:"Email",msisdn:"Phone",threepid:"Email / Phone",fields:{avatar:"Avatar",id:"User-ID",name:"Name",is_guest:"Guest",admin:"Admin",deactivated:"Deactivated",guests:"Show guests",show_deactivated:"Show deactivated members",user_id:"Search Member",displayname:"Displayname",password:"Password",avatar_url:"Avatar URL",avatar_src:"Avatar",medium:"Medium",threepids:"3PIDs",address:"Address",creation_ts_ms:"Creation timestamp",consent_version:"Consent version"},helper:{deactivate:"Deactivated members cannot be reactivated",erase:"Mark the member as GDPR-erased"},action:{erase:"Erase member data"}},rooms:{name:"Room |||| Rooms",fields:{room_id:"Room-ID",name:"Name",canonical_alias:"Alias",joined_members:"Members",joined_local_members:"local members",state_events:"State events",version:"Version",is_encrypted:"Encrypted",encryption:"Encryption",federatable:"Federatable",public:"Public",creator:"Creator",join_rules:"Join rules",guest_access:"Guest access",history_visibility:"History visibility"},enums:{join_rules:{public:"Public",knock:"Knock",invite:"Invite",private:"Private"},guest_access:{can_join:"Guests can join",forbidden:"Guests can not join"},history_visibility:{invited:"Since invited",joined:"Since joined",shared:"Since shared",world_readable:"Anyone"},unencrypted:"Unencrypted"}},connections:{name:"Connections",fields:{last_seen:"Date",ip:"IP address",user_agent:"User agent"}},servernotices:{name:"Server Notices",send:"Send server notices",fields:{body:"Message"},action:{send:"Send note",send_success:"Server notice successfully sent.",send_failure:"An error has occurred."},helper:{send:'Sends a server notice to the selected users. The feature "Server Notices" has to be activated at the server.'}}}})},Ia=Object(u.a)((function(e){return Aa[e]?Aa[e]:Aa.en}),Object(i.a)()),xa=function(){return n.a.createElement(c.a,{loginPage:ja,authProvider:d,dataProvider:j,i18nProvider:Ia},n.a.createElement(l.a,{name:"users",list:xe,create:Be,edit:Re,icon:Sa.a}),n.a.createElement(l.a,{name:"rooms",list:la,show:ia,icon:ea.ViewListIcon}),n.a.createElement(l.a,{name:"connections"}),n.a.createElement(l.a,{name:"servernotices"}))};o.a.render(n.a.createElement(xa,null),document.getElementById("root"))}},[[371,1,2]]]);
//# sourceMappingURL=main.c609d608.chunk.js.map