(this["webpackJsonpnavgurukul-admin"]=this["webpackJsonpnavgurukul-admin"]||[]).push([[0],{453:function(e,t,a){e.exports=a(614)},614:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(20),o=a.n(s),i=a(336),c=a(704),l=a(703),u=a(215),d=a(95),m={login:function(e){var t=e.base_url,a=e.username,r=e.password;console.log("login ");var n={method:"POST",body:JSON.stringify({type:"m.login.password",user:a,password:r})};localStorage.setItem("base_url",t);var s=window.decodeURIComponent(t)+"/_matrix/client/r0/login";return d.a.fetchJson(s,n).then((function(e){var t=e.json;localStorage.setItem("home_server",t.home_server),localStorage.setItem("user_id",t.user_id),localStorage.setItem("access_token",t.access_token),localStorage.setItem("device_id",t.device_id)}))},logout:function(){return console.log("logout "),localStorage.removeItem("access_token"),Promise.resolve()},checkError:function(e){var t=e.status;return console.log("checkError "+t),401===t||403===t?Promise.reject():Promise.resolve()},checkAuth:function(){var e=localStorage.getItem("access_token");return console.log("checkAuth "+e),"string"==typeof e?Promise.resolve():Promise.reject()},getPermissions:function(){return Promise.resolve()}},p=a(19),_=a(85),f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=localStorage.getItem("access_token");return console.log("httpClient "+e),null!=a&&(t.user={authenticated:!0,token:"Bearer ".concat(a)}),d.a.fetchJson(e,t)},b=function(e,t){return e.indexOf("navgurukul.org")>-1?e:"users"===t||"connections"===t?"@"+e+":navgurukul.org":"rooms"===t?"#"+e+":navgurukul.org":e},g=function(e){var t=localStorage.getItem("base_url"),a=/^mxc:\/\/([^/]+)\/(\w+)/.exec(e);if(console.log("mxcClient "+a),null==a)return null;var r=a[1],n=a[2];return"".concat(t,"/_matrix/media/r0/thumbnail/").concat(r,"/").concat(n,"?width=24&height=24&method=scale")},h={users:{path:"/_synapse/admin/v2/users",map:function(e){return Object(p.a)(Object(p.a)({},e),{},{id:e.name.split(":")[0].slice(1),avatar_src:g(e.avatar_url),is_guest:!!e.is_guest,admin:!!e.admin,deactivated:!!e.deactivated,creation_ts_ms:1e3*e.creation_ts})},data:"users",total:function(e){return e.total},create:function(e){return{endpoint:"/_synapse/admin/v2/users/".concat(e.id),body:e,method:"PUT"}},delete:function(e){return{endpoint:"/_synapse/admin/v1/deactivate/".concat(b(e.id,"users")),body:{erase:!0},method:"POST"}}},rooms:{path:"/_synapse/admin/v1/rooms",map:function(e){return Object(p.a)(Object(p.a)({},e),{},{id:e.room_id,alias:e.canonical_alias,members:e.joined_members,is_encrypted:!!e.encryption,federatable:!!e.federatable,public:!!e.public})},data:"rooms",total:function(e){return e.total_rooms},delete:function(e){return{endpoint:"/_synapse/admin/v1/rooms/".concat(e.id,"/delete"),body:{block:!1},method:"POST"}}},reports:{path:"/_synapse/admin/v1/event_reports",map:function(e){return Object(p.a)(Object(p.a)({},e),{},{id:e.id})},data:"event_reports",total:function(e){return e.total}},devices:{map:function(e){return Object(p.a)(Object(p.a)({},e),{},{id:e.device_id})},data:"devices",total:function(e){return e.total},reference:function(e){return{endpoint:"/_synapse/admin/v2/users/".concat(e,"/devices")}},delete:function(e){return{endpoint:"/_synapse/admin/v2/users/".concat(e.user_id,"/devices/").concat(e.id)}}},connections:{path:"/_synapse/admin/v1/whois",map:function(e){return Object(p.a)(Object(p.a)({},e),{},{id:b(e.user_id)})},data:"connections"},room_members:{map:function(e){return{id:e}},reference:function(e){return{endpoint:"/_synapse/admin/v1/rooms/".concat(e,"/members")}},data:"members",total:function(e){return e.total}},pushers:{map:function(e){return Object(p.a)(Object(p.a)({},e),{},{id:e.pushkey})},reference:function(e){return{endpoint:"/_synapse/admin/v1/users/".concat(e,"/pushers")}},data:"pushers",total:function(e){return e.total}},joined_rooms:{map:function(e){return{id:e}},reference:function(e){return{endpoint:"/_synapse/admin/v1/users/".concat(e,"/joined_rooms")}},data:"joined_rooms",total:function(e){return e.total}},users_media:{map:function(e){return Object(p.a)(Object(p.a)({},e),{},{id:e.media_id})},reference:function(e){return{endpoint:"/_synapse/admin/v1/users/".concat(e,"/media")}},data:"media",total:function(e){return e.total},delete:function(e){return{endpoint:"/_synapse/admin/v1/media/".concat(localStorage.getItem("home_server"),"/").concat(e.id)}}},servernotices:{map:function(e){return{id:e.event_id}},create:function(e){return{endpoint:"/_synapse/admin/v1/send_server_notice",body:{user_id:e.id,content:{msgtype:"m.text",body:e.body}},method:"POST"}}},user_media_statistics:{path:"/_synapse/admin/v1/statistics/users/media",map:function(e){return Object(p.a)(Object(p.a)({},e),{},{id:e.user_id})},data:"users",total:function(e){return e.total}}};function v(e,t){if(null!==t)return t}function E(e){return"DESC"===e?"b":"f"}var y={getList:function(e,t){console.log("getList "+e);var a=t.filter,r=a.user_id,n=a.name,s=a.guests,o=a.deactivated,i=a.search_term,c=t.pagination,l=c.page,u=c.perPage,d=t.sort,m=d.field,p=d.order,b=(l-1)*u,g={from:b,limit:u,user_id:r,search_term:i,name:n,guests:s,deactivated:o,order_by:m,dir:E(p)},v=localStorage.getItem("base_url");if(!v||!(e in h))return Promise.reject();var y=h[e],j=v+y.path,w="".concat(j,"?").concat(Object(_.stringify)(g));return f(w).then((function(e){var t=e.json;return{data:t[y.data].map(y.map),total:y.total(t,b,u)}}))},getOne:function(e,t){console.log("getOne "+e);var a=localStorage.getItem("base_url");if(!a||!(e in h))return Promise.reject();var r=h[e];t.id=b(t.id,e);var n=a+r.path;return f("".concat(n,"/").concat(t.id)).then((function(e){var t=e.json;return{data:r.map(t)}}))},getMany:function(e,t){console.log("getMany "+e);var a=localStorage.getItem("base_url");if(!a||!(e in h))return Promise.reject();var r=h[e],n=a+r.path;return Promise.all(t.ids.map((function(t){return console.log(t),f("".concat(n,"/").concat(b(t,e)))}))).then((function(e){return{data:e.map((function(e){var t=e.json;return r.map(t)})),total:e.length}}))},getManyReference:function(e,t){console.log("getManyReference "+e);var a=t.pagination,r=a.page,n=a.perPage,s=(r-1)*n,o={from:s,limit:n},i=localStorage.getItem("base_url");if(!i||!(e in h))return Promise.reject();var c=h[e],l=c.reference(t.id),u="".concat(i).concat(l.endpoint,"?").concat(Object(_.stringify)(o));return f(u).then((function(e){e.headers;var t=e.json;return{data:t[c.data].map(c.map),total:c.total(t,s,n)}}))},update:function(e,t){console.log("update "+e);var a=localStorage.getItem("base_url");if(!a||!(e in h))return Promise.reject();var r=h[e],n=a+r.path;return f("".concat(n,"/").concat(b(t.data.id,e)),{method:"PUT",body:JSON.stringify(t.data,v)}).then((function(e){var t=e.json;return{data:r.map(t)}}))},updateMany:function(e,t){console.log("updateMany "+e);var a=localStorage.getItem("base_url");if(!a||!(e in h))return Promise.reject();var r=a+h[e].path;return Promise.all(t.ids.map((function(t){return f("".concat(r,"/").concat(b(t,e)))}),{method:"PUT",body:JSON.stringify(t.data,v)})).then((function(e){return{data:e.map((function(e){return e.json}))}}))},create:function(e,t){console.log("create "+e);var a=localStorage.getItem("base_url");if(!a||!(e in h))return Promise.reject();var r=h[e];if(!("create"in r))return Promise.reject();t.data.id=b(t.data.id,e),t.data.threepids=[],t.data.email&&t.data.threepids.push({medium:"email",address:t.data.email}),t.data.msisdn&&t.data.threepids.push({medium:"msisdn",address:t.data.msisdn});var n=r.create(t.data),s=a+n.endpoint;return f(s,{method:n.method,body:JSON.stringify(n.body,v)}).then((function(e){var t=e.json;return{data:r.map(t)}}))},createMany:function(e,t){console.log("createMany "+e);var a=localStorage.getItem("base_url");if(!a||!(e in h))return Promise.reject();var r=h[e];return"create"in r?Promise.all(t.ids.map((function(e){t.data.id=e;var n=r.create(t.data),s=a+n.endpoint;return f(s,{method:n.method,body:JSON.stringify(n.body,v)})}))).then((function(e){return{data:e.map((function(e){return e.json}))}})):Promise.reject()},delete:function(e,t){console.log("delete "+e);var a=localStorage.getItem("base_url");if(!a||!(e in h))return Promise.reject();var r=h[e];if("delete"in r){var n=r.delete(t),s=a+n.endpoint;return console.log(23,n.body),f(s,{method:"method"in n?n.method:"DELETE",body:"body"in n?JSON.stringify(n.body):null}).then((function(e){return{data:e.json}}))}console.log(12,t);var o=a+r.path;return f("".concat(o,"/").concat(t.id),{method:"DELETE",body:JSON.stringify(t.data,v)}).then((function(e){return{data:e.json}}))},deleteMany:function(e,t){console.log("deleteMany "+e,t);var a=localStorage.getItem("base_url");if(!a||!(e in h))return Promise.reject();var r=h[e];if("delete"in r)return Promise.all(t.ids.map((function(e){var n=r.delete(Object(p.a)(Object(p.a)({},t),{},{id:e})),s=a+n.endpoint;return console.log(s),f(s,{method:"method"in n?n.method:"DELETE",body:"body"in n?JSON.stringify(n.body):null})}))).then((function(e){return{data:e.map((function(e){return e.json}))}}));var n=a+r.path;return console.log(n),Promise.all(t.ids.map((function(a){return console.log(a),f("".concat(n,"/").concat(b(a,e)),{method:"DELETE",body:JSON.stringify(t.data,v)})}))).then((function(e){return{data:e.map((function(e){return e.json}))}}))}},j=a(220),w=a(722),O=a(369),k=a.n(O),S=a(370),P=a.n(S),I=a(373),x=a.n(I),D=a(135),A=a.n(D),C=a(374),z=a.n(C),R=a(379),N=a.n(R),B=a(378),T=a.n(B),V=a(83),M=a.n(V),F=a(669),L=a(105),U=a(716),G=a(724),Z=a(725),J=a(30),q=a(396),W=a(715),H=a(680),K=a(717),$=a(38),Q=a(400),Y=a(709),X=a(705),ee=a(685),te=a(686),ae=a(198),re=a(221),ne=a(666),se=a(712),oe=a(710),ie=a(723),ce=a(196),le=a(687),ue=a(706),de=a(726),me=a(719),pe=a(691),_e=a(721),fe=a(713),be=a(692),ge=a(714),he=a(720),ve=a(693),Ee=a(694),ye=a(34),je=a(136),we=a(321),Oe=a(621),ke=a(80),Se=a(265),Pe=a.n(Se),Ie=a(354),xe=a.n(Ie),De=a(671),Ae=a(673),Ce=a(674),ze=a(672),Re=function(e){var t=e.open,a=e.loading,r=e.onClose,s=e.onSend,o=Object($.a)(),i=function(e){return n.a.createElement(re.a,e,n.a.createElement(ne.a,{label:"resources.servernotices.action.send"}),n.a.createElement(J.a,{label:"ra.action.cancel",onClick:r},n.a.createElement(xe.a,null)))};return n.a.createElement(De.a,{open:t,onClose:r,loading:a},n.a.createElement(ze.a,null,o("resources.servernotices.action.send")),n.a.createElement(Ae.a,null,n.a.createElement(Ce.a,null,o("resources.servernotices.helper.send")),n.a.createElement(ie.a,{toolbar:n.a.createElement(i,null),submitOnEnter:!1,redirect:!1,save:s},n.a.createElement(ce.a,{source:"body",label:"resources.servernotices.fields.body",fullWidth:!0,multiline:!0,rows:"4",resettable:!0,validate:Object(ae.d)()}))))},Ne=function(e){var t=e.record,a=Object(r.useState)(!1),s=Object(ye.a)(a,2),o=s[0],i=s[1],c=Object(je.a)(),l=Object(we.a)("servernotices"),u=Object(ye.a)(l,2),d=u[0],m=u[1].loading,_=function(){return i(!1)};return n.a.createElement(r.Fragment,null,n.a.createElement(J.a,{label:"resources.servernotices.send",onClick:function(){return i(!0)},disabled:m},n.a.createElement(Pe.a,null)),n.a.createElement(Re,{open:o,onClose:_,onSend:function(e){d({payload:{data:Object(p.a)({id:t.id},e)}},{onSuccess:function(){c("resources.servernotices.action.send_success"),_()},onFailure:function(){return c("resources.servernotices.action.send_failure","error")}})}}))},Be=function(e){var t=e.selectedIds,a=Object(r.useState)(!1),s=Object(ye.a)(a,2),o=s[0],i=s[1],c=Object(je.a)(),l=Object(Oe.a)(),u=Object(ke.a)(),d=Object(ye.a)(u,2),m=d[0],p=d[1].loading,_=function(){return i(!1)};return n.a.createElement(r.Fragment,null,n.a.createElement(J.a,{label:"resources.servernotices.send",onClick:function(){return i(!0)},disabled:p},n.a.createElement(Pe.a,null)),n.a.createElement(Re,{open:o,onClose:_,onSend:function(e){m({type:"createMany",resource:"servernotices",payload:{ids:t,data:e}},{onSuccess:function(e){e.data;c("resources.servernotices.action.send_success"),l("users"),_()},onFailure:function(e){return c("resources.servernotices.action.send_failure","error")}})}}))},Te=a(403),Ve=a(222),Me=a(82),Fe=a.n(Me),Le=a(88),Ue=a(54),Ge=a(6),Ze=a.n(Ge),Je=Object(Le.a)((function(e){return{deleteButton:{color:e.palette.error.main,"&:hover":{backgroundColor:Object(Ue.fade)(e.palette.error.main,.12),"@media (hover: none)":{backgroundColor:"transparent"}}}}}),{name:"RaDeleteDeviceButton"}),qe=function(e){var t=e.record,a=Je(e),s=Object(r.useState)(!1),o=Object(ye.a)(s,2),i=o[0],c=o[1],l=Object(Te.a)(),u=Object(je.a)(),d=Object(ke.a)(),m=Object(ye.a)(d,2),p=m[0],_=m[1].loading;if(!t)return null;return n.a.createElement(r.Fragment,null,n.a.createElement(J.a,{label:"ra.action.remove",onClick:function(){return c(!0)},className:Ze()("ra-delete-button",a.deleteButton)},n.a.createElement(Fe.a,null)),n.a.createElement(Ve.a,{isOpen:i,loading:_,onConfirm:function(){p({type:"delete",resource:"devices",payload:{id:t.id,user_id:t.user_id}},{onSuccess:function(){u("resources.devices.action.erase.success"),l()},onFailure:function(){return u("resources.devices.action.erase.failure","error")}}),c(!1)},onClose:function(){return c(!1)},title:"resources.devices.action.erase.title",content:"resources.devices.action.erase.content",translateOptions:{id:t.id,name:t.display_name?t.display_name:t.id}}))},We=function(e,t,a){return{pathname:"/import_users"}},He=Object(Le.a)({small:{height:"40px",width:"40px"},large:{height:"120px",width:"120px",float:"right"}}),Ke=function(e){var t=e.currentSort,a=e.className,s=e.resource,o=e.filters,i=e.displayedFilters,c=e.exporter,l=e.filterValues,u=e.permanentFilter,d=(e.hasCreate,e.basePath),m=(e.selectedIds,e.onUnselectItems,e.showFilter),_=e.maxResults,f=e.total,b=Object(j.a)(e,["currentSort","className","resource","filters","displayedFilters","exporter","filterValues","permanentFilter","hasCreate","basePath","selectedIds","onUnselectItems","showFilter","maxResults","total"]),g=Object(F.a)();return n.a.createElement(L.a,Object.assign({className:a},Object(U.c)(b)),o&&Object(r.cloneElement)(o,{resource:s,showFilter:m,displayedFilters:i,filterValues:l,context:"button"}),n.a.createElement(G.a,{basePath:d}),n.a.createElement(Z.a,{disabled:0===f,resource:s,sort:t,filter:Object(p.a)(Object(p.a)({},l),u),exporter:c,maxResults:_}),n.a.createElement(J.a,{onClick:function(){g(We)},label:"CSV Import"},n.a.createElement(A.a,{style:{transform:"rotate(180deg)",fontSize:"20"}})))};Ke.defaultProps={selectedIds:[],onUnselectItems:function(){return null}};var $e=function(e){return n.a.createElement(q.a,Object.assign({},e,{rowsPerPageOptions:[10,25,50,100,500,1e3]}))},Qe=function(e){return n.a.createElement(W.a,e,n.a.createElement(H.a,{source:"name",alwaysOn:!0}),n.a.createElement(K.a,{source:"guests",alwaysOn:!0}),n.a.createElement(K.a,{label:"resources.users.fields.show_deactivated",source:"deactivated",alwaysOn:!0}))},Ye=function(e){var t=Object($.a)();return n.a.createElement(r.Fragment,null,n.a.createElement(Be,e),n.a.createElement(Q.a,Object.assign({},e,{label:"resources.users.action.erase",title:t("resources.users.helper.erase")})))},Xe=function(e){var t=e.source,a=e.className,r=e.record,s=void 0===r?{}:r;return n.a.createElement(w.a,{src:s[t],className:a})},et=function(e){var t=He();return n.a.createElement(Y.a,Object.assign({},e,{filters:n.a.createElement(Qe,null),filterDefaultValues:{guests:!0,deactivated:!1},actions:n.a.createElement(Ke,{maxResults:1e4}),bulkActionButtons:n.a.createElement(Ye,null),pagination:n.a.createElement($e,null)}),n.a.createElement(X.a,{rowClick:"edit"},n.a.createElement(Xe,{source:"avatar_src",sortable:!1,className:t.small}),n.a.createElement(ee.a,{source:"id",sortable:!1}),n.a.createElement(ee.a,{source:"displayname",sortable:!1}),n.a.createElement(te.a,{source:"is_guest",sortable:!1}),n.a.createElement(te.a,{source:"admin",sortable:!1}),n.a.createElement(te.a,{source:"deactivated",sortable:!1})))},tt=Object(ae.c)(/^[a-z0-9._=\-/][a-z0-9._=\-/][a-z0-9._=\-/][a-z0-9._=\-/][a-z0-9._=\-/]+/,"synapseadmin.users.invalid_user_id"),at=Object(ae.c)(/^[a-zA-Z0-9.!#$%&\u2019*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+\.+([a-zA-Z0-9-][a-zA-Z0-9-]+)*$/,"Enter Proper Email Address");function rt(){var e=localStorage.getItem("home_server");return{id:"@"+Array(8).fill("0123456789abcdefghijklmnopqrstuvwxyz").map((function(e){return e[Math.floor(crypto.getRandomValues(new Uint32Array(1))[0]/4294967296*e.length)]})).join("")+":"+e,password:Array(20).fill("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$").map((function(e){return e[Math.floor(crypto.getRandomValues(new Uint32Array(1))[0]/4294967296*e.length)]})).join("")}}var nt=function(e){var t=Object($.a)();return n.a.createElement(re.a,e,n.a.createElement(ne.a,{submitOnEnter:!0}),n.a.createElement(se.a,{label:"resources.users.action.erase",title:t("resources.users.helper.erase")}),n.a.createElement(Ne,null))},st=function(e){return n.a.createElement(oe.a,e,n.a.createElement(ie.a,null,n.a.createElement(ce.a,{source:"id",autoComplete:"off",validate:tt}),n.a.createElement(ce.a,{source:"displayname"}),n.a.createElement(le.a,{source:"password",autoComplete:"new-password"}),n.a.createElement(K.a,{source:"admin"}),n.a.createElement(ce.a,{source:"email",autoComplete:"off",validate:at}),n.a.createElement(ce.a,{source:"msisdn",autoComplete:"off"})))},ot=function(e){var t=e.record,a=Object($.a)();return n.a.createElement("span",null,a("resources.users.name",{smart_count:1})," ",t?'"'.concat(t.displayname,'"'):"")},it=function(e){var t=He(),a=Object($.a)();return n.a.createElement(ue.a,Object.assign({},e,{title:n.a.createElement(ot,null)}),n.a.createElement(de.a,{toolbar:n.a.createElement(nt,null)},n.a.createElement(me.a,{label:a("resources.users.name",{smart_count:1}),icon:n.a.createElement(k.a,null)},n.a.createElement(Xe,{source:"avatar_src",sortable:!1,className:t.large}),n.a.createElement(ce.a,{source:"id",disabled:!0}),n.a.createElement(ce.a,{source:"displayname"}),n.a.createElement(le.a,{source:"password",autoComplete:"new-password"}),n.a.createElement(K.a,{source:"admin"}),n.a.createElement(K.a,{source:"deactivated",helperText:"resources.users.helper.deactivate"}),n.a.createElement(pe.a,{source:"creation_ts_ms",showTime:!0,options:{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}}),n.a.createElement(ee.a,{source:"consent_version"})),n.a.createElement(me.a,{label:"resources.users.threepid",icon:n.a.createElement(P.a,null),path:"threepid"},n.a.createElement(_e.a,{source:"threepids"},n.a.createElement(fe.a,null,n.a.createElement(be.a,{source:"medium",choices:[{id:"email",name:"resources.users.email"},{id:"msisdn",name:"resources.users.msisdn"}],key:"SelectInput"}),n.a.createElement(ce.a,{source:"address",key:"TextInput"})))),n.a.createElement(me.a,{label:a("resources.devices.name",{smart_count:2}),icon:n.a.createElement(x.a,null),path:"devices"},n.a.createElement(ge.a,{reference:"devices",target:"user_id",addLabel:!1},n.a.createElement(X.a,{style:{width:"100%"}},n.a.createElement(ee.a,{source:"device_id",sortable:!1}),n.a.createElement(ee.a,{source:"display_name",sortable:!1}),n.a.createElement(ee.a,{source:"last_seen_ip",sortable:!1}),n.a.createElement(pe.a,{source:"last_seen_ts",showTime:!0,options:{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"},sortable:!1}),n.a.createElement(qe,null)))),n.a.createElement(me.a,{label:"resources.connections.name",icon:n.a.createElement(z.a,null),path:"connections"},n.a.createElement(he.a,{reference:"connections",source:"id",addLabel:!1,link:!1},n.a.createElement(ve.a,{source:"devices[].sessions[0].connections",label:"resources.connections.name"},n.a.createElement(X.a,{style:{width:"100%"}},n.a.createElement(ee.a,{source:"ip",sortable:!1}),n.a.createElement(pe.a,{source:"last_seen",showTime:!0,options:{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"},sortable:!1}),n.a.createElement(ee.a,{source:"user_agent",sortable:!1,style:{width:"100%"}}))))),n.a.createElement(me.a,{label:a("resources.users_media.name",{smart_count:2}),icon:n.a.createElement(T.a,null),path:"media"},n.a.createElement(ge.a,{reference:"users_media",target:"user_id",addLabel:!1,pagination:n.a.createElement($e,null),perPage:50},n.a.createElement(X.a,{style:{width:"100%"}},n.a.createElement(pe.a,{source:"created_ts",showTime:!0,options:{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"},sortable:!1}),n.a.createElement(pe.a,{source:"last_access_ts",showTime:!0,options:{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"},sortable:!1}),n.a.createElement(ee.a,{source:"media_id",sortable:!1}),n.a.createElement(Ee.a,{source:"media_length",sortable:!1}),n.a.createElement(ee.a,{source:"media_type",sortable:!1}),n.a.createElement(ee.a,{source:"upload_name",sortable:!1}),n.a.createElement(ee.a,{source:"quarantined_by",sortable:!1}),n.a.createElement(te.a,{source:"safe_from_quarantine",sortable:!1}),n.a.createElement(se.a,{undoable:!1,redirect:!1})))),n.a.createElement(me.a,{label:a("resources.rooms.name",{smart_count:2}),icon:n.a.createElement(M.a,null),path:"rooms"},n.a.createElement(ge.a,{reference:"joined_rooms",target:"user_id",addLabel:!1},n.a.createElement(X.a,{style:{width:"100%"},rowClick:function(e,t,a){return"/rooms/"+e+"/show"}},n.a.createElement(ee.a,{source:"id",sortable:!1,label:"resources.rooms.fields.room_id"}),n.a.createElement(he.a,{label:"resources.rooms.fields.name",source:"id",reference:"rooms",sortable:!1,link:""},n.a.createElement(ee.a,{source:"name",sortable:!1}))))),n.a.createElement(me.a,{label:a("resources.pushers.name",{smart_count:2}),icon:n.a.createElement(N.a,null),path:"pushers"},n.a.createElement(ge.a,{reference:"pushers",target:"user_id",addLabel:!1},n.a.createElement(X.a,{style:{width:"100%"}},n.a.createElement(ee.a,{source:"kind",sortable:!1}),n.a.createElement(ee.a,{source:"app_display_name",sortable:!1}),n.a.createElement(ee.a,{source:"app_id",sortable:!1}),n.a.createElement(ee.a,{source:"data.url",sortable:!1}),n.a.createElement(ee.a,{source:"device_display_name",sortable:!1}),n.a.createElement(ee.a,{source:"lang",sortable:!1}),n.a.createElement(ee.a,{source:"profile_tag",sortable:!1}),n.a.createElement(ee.a,{source:"pushkey",sortable:!1}))))))},ct=a(9),lt=a(707),ut=a(727),dt=a(695),mt=a(696),pt=a(361),_t=a(10),ft=a.n(_t),bt=a(35),gt=a(413),ht=a(728),vt=a(269),Et=a.n(vt),yt=a(380),jt=a.n(yt),wt=a(211),Ot=a.n(wt),kt=a(212),St=a.n(kt),Pt=a(210),It=a.n(Pt),xt=function(e){return n.a.createElement(q.a,Object.assign({},e,{rowsPerPageOptions:[10,25,50,100,500,1e3]}))},Dt=function(e){var t=e.source,a=e.record,r=void 0===a?{}:a,s=e.emptyText,o=Object($.a)(),i=ft()(r,t),c=!1===i?"ra.boolean.false":"ra.boolean.true";return!1===i||!0===i?n.a.createElement(bt.a,{component:"span",variant:"body2"},n.a.createElement(gt.a,{title:o(c,{_:c})},!0===i?n.a.createElement(Et.a,{"data-testid":"true",htmlColor:"limegreen"}):n.a.createElement(jt.a,{"data-testid":"false",color:"error"}))):n.a.createElement(bt.a,{component:"span",variant:"body2"},s)},At=function(e){var t=e.record,a=Object($.a)(),r="";return t&&(r=""!==t.name?t.name:t.id),n.a.createElement("span",null,a("resources.rooms.name",1)," ",r)},Ct=function(e){var t=e.basePath,a=e.data,r=e.resource,s=Object($.a)();return n.a.createElement(L.a,null,n.a.createElement(se.a,{basePath:t,record:a,resource:r,undoable:!1,confirmTitle:s("synapseadmin.rooms.delete.title"),confirmContent:s("synapseadmin.rooms.delete.message")}))},zt=function(e){var t=Object($.a)();return n.a.createElement(lt.a,Object.assign({},e,{actions:n.a.createElement(Ct,null),title:n.a.createElement(At,null)}),n.a.createElement(ut.a,null,n.a.createElement(dt.a,{label:"synapseadmin.rooms.tabs.basic",icon:n.a.createElement(M.a,null)},n.a.createElement(ee.a,{source:"room_id"}),n.a.createElement(ee.a,{source:"name"}),n.a.createElement(ee.a,{source:"canonical_alias"}),n.a.createElement(ee.a,{source:"creator"})),n.a.createElement(dt.a,{label:"synapseadmin.rooms.tabs.detail",icon:n.a.createElement(Ot.a,null),path:"detail"},n.a.createElement(ee.a,{source:"joined_members"}),n.a.createElement(ee.a,{source:"joined_local_members"}),n.a.createElement(ee.a,{source:"state_events"}),n.a.createElement(ee.a,{source:"version"}),n.a.createElement(ee.a,{source:"encryption",emptyText:t("resources.rooms.enums.unencrypted")})),n.a.createElement(dt.a,{label:"synapseadmin.rooms.tabs.members",icon:n.a.createElement(St.a,null)},n.a.createElement(ge.a,{reference:"room_members",target:"room_id",addLabel:!1},n.a.createElement(X.a,{style:{width:"100%"},rowClick:function(e,t,a){return"/users/"+e}},n.a.createElement(ee.a,{source:"id",sortable:!1,label:"resources.users.fields.id"}),n.a.createElement(he.a,{label:"resources.users.fields.displayname",source:"id",reference:"users",sortable:!1,link:""},n.a.createElement(ee.a,{source:"displayname",sortable:!1}))))),n.a.createElement(dt.a,{label:"synapseadmin.rooms.tabs.permission",icon:n.a.createElement(It.a,null),path:"permission"},n.a.createElement(te.a,{source:"federatable"}),n.a.createElement(te.a,{source:"public"}),n.a.createElement(mt.a,{source:"join_rules",choices:[{id:"public",name:"resources.rooms.enums.join_rules.public"},{id:"knock",name:"resources.rooms.enums.join_rules.knock"},{id:"invite",name:"resources.rooms.enums.join_rules.invite"},{id:"private",name:"resources.rooms.enums.join_rules.private"}]}),n.a.createElement(mt.a,{source:"guest_access",choices:[{id:"can_join",name:"resources.rooms.enums.guest_access.can_join"},{id:"forbidden",name:"resources.rooms.enums.guest_access.forbidden"}]}),n.a.createElement(mt.a,{source:"history_visibility",choices:[{id:"invited",name:"resources.rooms.enums.history_visibility.invited"},{id:"joined",name:"resources.rooms.enums.history_visibility.joined"},{id:"shared",name:"resources.rooms.enums.history_visibility.shared"},{id:"world_readable",name:"resources.rooms.enums.history_visibility.world_readable"}]}))))},Rt=function(e){return n.a.createElement(r.Fragment,null,n.a.createElement(pt.a,e))},Nt=function(e){var t=Object.assign({},e),a=Object($.a)();return n.a.createElement(W.a,t,n.a.createElement(H.a,{source:"search_term",alwaysOn:!0}),n.a.createElement(ht.a,{label:a("resources.rooms.fields.joined_local_members"),source:"joined_local_members",defaultValue:!1,style:{marginBottom:8}}),n.a.createElement(ht.a,{label:a("resources.rooms.fields.state_events"),source:"state_events",defaultValue:!1,style:{marginBottom:8}}),n.a.createElement(ht.a,{label:a("resources.rooms.fields.version"),source:"version",defaultValue:!1,style:{marginBottom:8}}),n.a.createElement(ht.a,{label:a("resources.rooms.fields.federatable"),source:"federatable",defaultValue:!1,style:{marginBottom:8}}))};var Bt=Object(ct.c)((function(e){return{roomfilters:e.admin.resources.rooms.list.params.displayedFilters}}))((function(e){var t=Object.assign({},e),a=t.roomfilters,r=!(!a||!a.joined_local_members),s=!(!a||!a.state_events),o=!(!a||!a.version),i=!(!a||!a.federatable),c=Object($.a)();return n.a.createElement(Y.a,Object.assign({},t,{pagination:n.a.createElement(xt,null),sort:{field:"name",order:"ASC"},filters:n.a.createElement(Nt,null),bulkActionButtons:n.a.createElement(Rt,{confirmTitle:c("synapseadmin.rooms.delete.title"),confirmContent:c("synapseadmin.rooms.delete.message")})}),n.a.createElement(X.a,{rowClick:"show"},n.a.createElement(Dt,{source:"is_encrypted",sortBy:"encryption",label:n.a.createElement(Et.a,null)}),n.a.createElement(ee.a,{source:"name"}),n.a.createElement(ee.a,{source:"joined_members"}),r&&n.a.createElement(ee.a,{source:"joined_local_members"}),s&&n.a.createElement(ee.a,{source:"state_events"}),o&&n.a.createElement(ee.a,{source:"version"}),i&&n.a.createElement(te.a,{source:"federatable"}),n.a.createElement(te.a,{source:"public"})))})),Tt=function(e){return n.a.createElement(q.a,Object.assign({},e,{rowsPerPageOptions:[10,25,50,100,500,1e3]}))},Vt=function(e){var t=Object($.a)();return n.a.createElement(lt.a,e,n.a.createElement(ut.a,null,n.a.createElement(dt.a,{label:t("synapseadmin.reports.tabs.basic",{smart_count:1}),icon:n.a.createElement(M.a,null)},n.a.createElement(pe.a,{source:"received_ts",showTime:!0,options:{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"},sortable:!0}),n.a.createElement(he.a,{source:"user_id",reference:"users"},n.a.createElement(ee.a,{source:"id"})),n.a.createElement(Ee.a,{source:"score"}),n.a.createElement(ee.a,{source:"reason"}),n.a.createElement(ee.a,{source:"name"}),n.a.createElement(ee.a,{source:"canonical_alias",label:"resources.rooms.fields.canonical_alias"}),n.a.createElement(he.a,{source:"room_id",reference:"rooms",link:"show",label:"resources.rooms.fields.room_id"},n.a.createElement(ee.a,{source:"id"}))),n.a.createElement(dt.a,{label:"synapseadmin.reports.tabs.detail",icon:n.a.createElement(Ot.a,null),path:"detail"}," ",n.a.createElement(pe.a,{source:"event_json.origin_server_ts",showTime:!0,options:{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"},sortable:!0}),n.a.createElement(he.a,{source:"sender",reference:"users"},n.a.createElement(ee.a,{source:"id"})),n.a.createElement(ee.a,{source:"event_id"}),n.a.createElement(ee.a,{source:"event_json.origin"}),n.a.createElement(ee.a,{source:"event_json.type"}),n.a.createElement(ee.a,{source:"event_json.content.msgtype"}),n.a.createElement(ee.a,{source:"event_json.content.body"}),n.a.createElement(ee.a,{source:"event_json.content.format"}),n.a.createElement(ee.a,{source:"event_json.content.formatted_body"}),n.a.createElement(ee.a,{source:"event_json.content.algorithm"}),n.a.createElement(ee.a,{source:"event_json.content.device_id",label:"resources.users.fields.device_id"}))))},Mt=function(e){var t=Object.assign({},e);return n.a.createElement(Y.a,Object.assign({},t,{pagination:n.a.createElement(Tt,null),sort:{field:"received_ts",order:"DESC"},bulkActionButtons:!1}),n.a.createElement(X.a,{rowClick:"show"},n.a.createElement(ee.a,{source:"id",sortable:!1}),n.a.createElement(pe.a,{source:"received_ts",showTime:!0,options:{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"},sortable:!0}),n.a.createElement(ee.a,{sortable:!1,source:"user_id"}),n.a.createElement(ee.a,{sortable:!1,source:"name"}),n.a.createElement(ee.a,{sortable:!1,source:"score"})))},Ft=a(697),Lt=a(698),Ut=a(219),Gt=a(24),Zt=a(623),Jt=a(684),qt=a(699),Wt=a(402),Ht=a(620),Kt=a(213),$t=a.n(Kt),Qt=Object(Le.a)((function(e){return{main:{display:"flex",flexDirection:"column",minHeight:"calc(100vh - 1em)",alignItems:"center",justifyContent:"flex-start",background:"url(./images/floating-cogs.svg)",backgroundColor:"#f9f9f9",backgroundRepeat:"no-repeat",backgroundSize:"cover"},card:{minWidth:"30em",marginTop:"6em",marginBottom:"6em"},avatar:{margin:"1em",display:"flex",justifyContent:"center"},icon:{backgroundColor:e.palette.secondary.main},hint:{marginTop:"1em",display:"flex",justifyContent:"center",color:e.palette.grey[500]},form:{padding:"0 1em 1em 1em"},input:{marginTop:"1em"},actions:{padding:"0 1em 1em 1em"},serverVersion:{color:"#9e9e9e",fontFamily:"Roboto, Helvetica, Arial, sans-serif",marginBottom:"1em",marginLeft:"0.5em"}}})),Yt=function(e){var t=e.theme,a=Qt({theme:t}),s=Object(Ft.a)(),o=Object(je.a)(),i=Object(r.useState)(!1),c=Object(ye.a)(i,2),l=c[0],u=c[1],m=Object($.a)(),p=function(e){var t=e.meta,a=(t=void 0===t?{}:t).touched,r=t.error,s=Object.assign({},e.input),o=Object(j.a)(e,["meta","input"]);return n.a.createElement(Zt.a,Object.assign({error:!(!a||!r),helperText:a&&r},s,o,{fullWidth:!0}))},_=function(e){var t=e.formData,s=Object(Gt.e)(),o=Object(r.useState)(""),i=Object(ye.a)(o,2),c=i[0],u=i[1];return Object(r.useEffect)((function(e){if(t.base_url&&t.base_url.match(/^(http|https):\/\/[a-zA-Z0-9\-.]+$/)){var a="".concat(t.base_url,"/_synapse/admin/v1/server_version");d.a.fetchJson(a,{method:"GET"}).then((function(e){var t=e.json;u("".concat(m("synapseadmin.auth.server_version")," ").concat(t.server_version))})).catch((function(e){u("")}))}}),[t.base_url]),n.a.createElement("div",null,n.a.createElement("div",{className:a.input},n.a.createElement(ce.a,{autoFocus:!0,name:"username",component:p,label:m("ra.auth.username"),disabled:l,onBlur:function(e){if(!t.base_url){var a=function(e){if(!e)return null;var t=e.match(/@[a-zA-Z0-9._=\-/]+:([a-zA-Z0-9\-.]+\.[a-zA-Z]+)/);return t?t[1]:null}(t.username),r="https://".concat(a,"/.well-known/matrix/client");a&&d.a.fetchJson(r,{method:"GET"}).then((function(e){var t=e.json;s.change("base_url",t["m.homeserver"].base_url)})).catch((function(e){s.change("base_url","https://".concat(a))}))}},fullWidth:!0})),n.a.createElement("div",{className:a.input},n.a.createElement(le.a,{name:"password",component:p,label:m("ra.auth.password"),type:"password",disabled:l,fullWidth:!0})),n.a.createElement("div",{className:a.input},n.a.createElement(ce.a,{name:"base_url",component:p,label:m("synapseadmin.auth.base_url"),disabled:l,fullWidth:!0})),n.a.createElement("div",{className:a.serverVersion},c))};return n.a.createElement(Gt.b,{initialValues:{base_url:"https://m.navgurukul.org"},onSubmit:function(e){u(!0),s(e).catch((function(e){u(!1),o("string"===typeof e?e:"undefined"!==typeof e&&e.message?e.message:"ra.auth.sign_in_error","warning")}))},validate:function(e){var t={};return e.username||(t.username=m("ra.validation.required")),e.password||(t.password=m("ra.validation.required")),e.base_url?e.base_url.match(/^(http|https):\/\//)?e.base_url.match(/^(http|https):\/\/[a-zA-Z0-9\-.]+(:\d{1,5})?$/)||(t.base_url=m("synapseadmin.auth.url_error")):t.base_url=m("synapseadmin.auth.protocol_error"):t.base_url=m("ra.validation.required"),t},render:function(e){var t=e.handleSubmit;return n.a.createElement("form",{onSubmit:t,noValidate:!0},n.a.createElement("div",{className:a.main},n.a.createElement(Jt.a,{className:a.card},n.a.createElement("div",{className:a.avatar},n.a.createElement(w.a,{className:a.icon},n.a.createElement($t.a,null))),n.a.createElement("div",{className:a.hint},m("synapseadmin.auth.welcome")),n.a.createElement("div",{className:a.form},n.a.createElement(Lt.a,null,(function(e){return n.a.createElement(_,e)}))),n.a.createElement(qt.a,{className:a.actions},n.a.createElement(Wt.a,{variant:"contained",type:"submit",color:"primary",disabled:l,className:a.button,fullWidth:!0},l&&n.a.createElement(Ht.a,{size:25,thickness:2}),m("ra.auth.sign_in")))),n.a.createElement(Ut.a,null)))}})},Xt=a(393),ea=a.n(Xt),ta=function(e){return n.a.createElement(q.a,Object.assign({},e,{rowsPerPageOptions:[10,25,50,100,500,1e3]}))},aa=function(e){return n.a.createElement(W.a,e,n.a.createElement(H.a,{source:"search_term",alwaysOn:!0}))},ra=function(e){return n.a.createElement(Y.a,Object.assign({},e,{filters:n.a.createElement(aa,null),pagination:n.a.createElement(ta,null),sort:{field:"media_length",order:"DESC"},bulkActionButtons:!1}),n.a.createElement(X.a,{rowClick:function(e,t,a){return"/users/"+e+"/media"}},n.a.createElement(ee.a,{source:"user_id",label:"resources.users.fields.id"}),n.a.createElement(ee.a,{source:"displayname",label:"resources.users.fields.displayname"}),n.a.createElement(Ee.a,{source:"media_count"}),n.a.createElement(Ee.a,{source:"media_length"})))},na=a(394),sa=a.n(na),oa=a(397),ia=a(382),ca=a(46),la=a.n(ca),ua=a(111),da=a(79),ma=a(66),pa=a(270),_a=a(702),fa=a(675),ba=a(355),ga=a(681),ha=a(718),va=a(124),Ea=a.n(va),ya=["id","displayname"].sort(),ja=["user_type","guest","admin","deactivated","avatar_url","password"].sort();function wa(e){var t=e.value,a=e.text,r=Object($.a)();return n.a.createElement("option",{value:t},r(a))}var Oa=function(e){var t=Object(r.useState)(null),a=Object(ye.a)(t,2),s=a[0],o=a[1],i=Object(r.useState)(null),c=Object(ye.a)(i,2),l=c[0],u=c[1],d=Object(r.useState)(null),m=Object(ye.a)(d,2),p=m[0],_=m[1],f=Object(r.useState)(!0),b=Object(ye.a)(f,2),g=b[0],h=b[1],v=Object(r.useState)(null),E=Object(ye.a)(v,2),y=E[0],j=E[1],w=Object(r.useState)(null),O=Object(ye.a)(w,2),k=O[0],S=O[1],P=Object(r.useState)(null),I=Object(ye.a)(P,2),x=I[0],D=I[1],A=Object(r.useState)("stop"),C=Object(ye.a)(A,2),z=C[0],R=C[1],N=Object(r.useState)(!0),B=Object(ye.a)(N,2),T=B[0],V=B[1],M=Object(r.useState)("ignore"),F=Object(ye.a)(M,2),L=F[0],U=F[1],G=Object($.a)(),Z=Object(je.a)(),J=Object(da.a)(),q=function(){var e=Object(ua.a)(la.a.mark((function e(t){var a,r;return la.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===y){e.next=2;break}return e.abrupt("return");case 2:if(o(null),u(null),_(null),S(null),!((a=t.target.files?t.target.files[0]:null).size>1e8)){e.next=12;break}return r=G("import_users.errors.unreasonably_big",{size:(a.size/1048576).toFixed(2)}),Z(r),u(r),e.abrupt("return");case 12:e.prev=12,Object(pa.parse)(a,{header:!0,skipEmptyLines:!0,complete:function(e){e.error&&u(e.error),W(e,{setValues:o,setStats:_,setError:u})}}),e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(12),u(!0),e.abrupt("return",null);case 20:case"end":return e.stop()}}),e,null,[[12,16]])})));return function(t){return e.apply(this,arguments)}}(),W=function(e,t){var a=e.data,r=e.meta,n=e.errors,s=t.setValues,o=t.setStats,i=t.setError,c=Array.from(ya),l=Array.from(ja);if(r.fields.forEach((function(e){c.includes(e)&&(c=c.filter((function(t){return t!==e}))),l.includes(e)&&(l=l.filter((function(t){return t!==e})))})),0!==c.length)return i(G("import_users.error.required_field",{field:c[0]})),!1;var u={user_types:{default:0},is_guest:0,admin:0,deactivated:0,password:0,avatar_url:0,id:0,total:a.length};return a.forEach((function(e,t){void 0===e.user_type||""===e.user_type?u.user_types.default++:u.user_types[e.user_type]+=1,r.fields.includes("name")&&delete e.name,r.fields.includes("user_type")&&delete e.user_type,r.fields.includes("is_admin")&&(e.admin=e.is_admin,delete e.is_admin),["is_guest","admin","deactivated"].forEach((function(a){"true"===e[a]?(u[a]++,e[a]=!0):("false"!==e[a]&&""!==e[a]&&n.push(G("import_users.error.invalid_value",{field:a,row:t})),e[a]=!1)})),void 0!==e.password&&""!==e.password&&u.password++,void 0!==e.avatar_url&&""!==e.avatar_url&&u.avatar_url++,void 0!==e.id&&""!==e.id&&u.id++})),n.length>0&&i(n),o(u),s(a),!0},H=function(){var e=Object(ua.a)(la.a.mark((function e(t){var a;return la.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===y){e.next=3;break}return Z("import_users.errors.already_in_progress"),e.abrupt("return");case 3:return e.next=5,K(J,s,z,T,L,g,j,u);case 5:a=e.sent,S(a),D(Object(pa.unparse)(a.skippedRecords)),console.log("Skipped records:"),console.log(x);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(ua.a)(la.a.mark((function e(t,a,r,n,s,o,i,c){var l,u,d,m,p,_,f,b,g;return la.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=[],u=[],d=[],m={toAdmin:0,toGuest:0,toRegular:0,replacedPassword:0},p=0,_=a.length,e.prev=6,i({done:p,limit:_}),f=Object(ia.a)(a),e.prev=9,g=la.a.mark((function e(){var c,u,m,_,f;return la.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=b.value,u={},m={},"ignore"!==s&&void 0!==c.id&&void 0!==c.password&&!1!==n||(m=rt(),"ignore"!==s&&void 0!==c.id&&delete m.id,!1!==n&&void 0!==c.password&&""!==c.password&&delete m.password),Object.assign(u,c),Object.assign(u,m),console.log("will check for existence of record "+JSON.stringify(u)),_=0,f=function e(a){return t.getOne("users",{id:a.id}).then(function(){var t=Object(ua.a)(la.a.mark((function t(n){var o,i;return la.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("already existed"),"update"!==s&&"skip"!==r){t.next=5;break}l.push(a),t.next=19;break;case 5:if("stop"!==r){t.next=9;break}throw new Error(G("import_users.error.id_exits",{id:a.id}));case 9:if(o=rt(),i=Object.assign({},a,{id:o.id}),!(++_>512)){t.next=17;break}console.warn("retry loop got stuck? pathological situation?"),l.push(a),t.next=19;break;case 17:return t.next=19,e(i);case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),function(){var e=Object(ua.a)(la.a.mark((function e(r){return la.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("OK to create record "+a.id+" ("+a.displayname+")."),o){e.next=4;break}return e.next=4,t.create("users",{data:a});case 4:d.push(a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},e.next=11,f(u);case 11:p++,i({done:p,limit:a.length});case 13:case"end":return e.stop()}}),e)})),f.s();case 12:if((b=f.n()).done){e.next=16;break}return e.delegateYield(g(),"t0",14);case 14:e.next=12;break;case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(9),f.e(e.t1);case 21:return e.prev=21,f.f(),e.finish(21);case 24:i(null),e.next=31;break;case 27:e.prev=27,e.t2=e.catch(6),c(G("import_users.error.at_entry",{entry:p+1,message:e.t2.message})),i(null);case 31:return e.abrupt("return",{skippedRecords:l,erroredRecords:u,succeededRecords:d,totalRecordCount:_,changeStats:m,wasDryRun:o});case 32:case"end":return e.stop()}}),e,null,[[6,27],[9,18,21,24]])})));return function(t,a,r,n,s,o,i,c){return e.apply(this,arguments)}}(),Q=function(){var e=Object(ua.a)(la.a.mark((function e(t){var a;return la.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===y){e.next=2;break}return e.abrupt("return");case 2:a=t.target.value,R(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(ua.a)(la.a.mark((function e(t){var a;return la.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===y){e.next=2;break}return e.abrupt("return");case 2:a=t.target.value,U(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=p&&!k&&[n.a.createElement(Ea.a,null,n.a.createElement(_a.a,{title:G("import_users.cards.importstats.header")}),n.a.createElement(fa.a,null,n.a.createElement("div",null,G("import_users.cards.importstats.users_total",p.total)),n.a.createElement("div",null,G("import_users.cards.importstats.guest_count",p.is_guest)),n.a.createElement("div",null,G("import_users.cards.importstats.admin_count",p.admin)))),n.a.createElement(Ea.a,null,n.a.createElement(_a.a,{title:G("import_users.cards.ids.header")}),n.a.createElement(fa.a,null,n.a.createElement("div",null,p.id===p.total?G("import_users.cards.ids.all_ids_present"):G("import_users.cards.ids.count_ids_present",p.id)),p.id>0?n.a.createElement("div",null,n.a.createElement(ba.a,{onChange:Y,value:L,enabled:(null!==y).toString()},n.a.createElement(wa,{value:"ignore",text:"import_users.cards.ids.mode.ignore"}),n.a.createElement(wa,{value:"update",text:"import_users.cards.ids.mode.update"}))):"")),n.a.createElement(Ea.a,null,n.a.createElement(_a.a,{title:G("import_users.cards.passwords.header")}),n.a.createElement(fa.a,null,n.a.createElement("div",null,p.password===p.total?G("import_users.cards.passwords.all_passwords_present"):G("import_users.cards.passwords.count_passwords_present",p.password)),p.password>0?n.a.createElement("div",null,n.a.createElement(ga.a,{control:n.a.createElement(ha.a,{checked:T,enabled:(null!==y).toString(),onChange:function(e){null===y&&V(e.target.checked)}}),label:G("import_users.cards.passwords.use_passwords")})):""))],ee=p&&!k&&n.a.createElement(Ea.a,null,n.a.createElement(_a.a,{title:G("import_users.cards.conflicts.header")}),n.a.createElement(fa.a,null,n.a.createElement("div",null,n.a.createElement(ba.a,{onChange:Q,value:z,enabled:(null!==y).toString()},n.a.createElement(wa,{value:"stop",text:"import_users.cards.conflicts.mode.stop"}),n.a.createElement(wa,{value:"skip",text:"import_users.cards.conflicts.mode.skip"}))))),te=l&&n.a.createElement(Ea.a,null,n.a.createElement(_a.a,{title:G("import_users.error.error")}),n.a.createElement(fa.a,null,(Array.isArray(l)?l:[l]).map((function(e){return n.a.createElement("div",null,e)})))),ae=!k&&n.a.createElement(Ea.a,null,n.a.createElement(_a.a,{title:G("import_users.cards.upload.header")}),n.a.createElement(fa.a,null,G("import_users.cards.upload.explanation"),n.a.createElement("a",{href:"./data/example.csv"},"example.csv"),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("input",{type:"file",onChange:q,enabled:(null!==y).toString()}))),re=k&&n.a.createElement(fa.a,null,n.a.createElement(_a.a,{title:G("import_users.cards.results.header")}),n.a.createElement("div",null,G("import_users.cards.results.total",k.totalRecordCount),n.a.createElement("br",null),G("import_users.cards.results.successful",k.succeededRecords.length),n.a.createElement("br",null),k.skippedRecords.length?[G("import_users.cards.results.skipped",k.skippedRecords.length),n.a.createElement("div",null,n.a.createElement("button",{onClick:function(){var e=document.createElement("a");console.log(x);var t=new Blob([x],{type:"text/comma-separated-values"});e.href=URL.createObjectURL(t),e.download="skippedRecords.csv",document.body.appendChild(e),e.click()}},G("import_users.cards.results.download_skipped"))),n.a.createElement("br",null)]:"",k.erroredRecords.length?[G("import_users.cards.results.skipped",k.erroredRecords.length),n.a.createElement("br",null)]:"",n.a.createElement("br",null),k.wasDryRun&&[G("import_users.cards.results.simulated_only"),n.a.createElement("br",null)])),ne=!s||0===s.length||k?void 0:n.a.createElement(qt.a,null,n.a.createElement(ga.a,{control:n.a.createElement(ha.a,{checked:g,onChange:function(e){null===y&&h(e.target.checked)},enabled:(null!==y).toString()}),label:G("import_users.cards.startImport.simulate_only")}),n.a.createElement(Wt.a,{size:"large",onClick:H,enabled:(null!==y).toString()},G("import_users.cards.startImport.run_import")),null!==y?n.a.createElement("div",null,y.done," of ",y.limit," done"):null),se=[];ae&&se.push(ae),te&&se.push(te),ee&&se.push(ee),X&&se.push.apply(se,Object(oa.a)(X)),ne&&se.push(ne),re&&se.push(re);var oe=n.a.createElement(Jt.a,null,se);return[n.a.createElement(ma.b,{defaultTitle:G("import_users.title")}),oe]},ka=a(22),Sa=a(112),Pa=a.n(Sa),Ia=Object(p.a)(Object(p.a)({},Pa.a),{},{synapseadmin:{auth:{base_url:"Heimserver URL",welcome:"Willkommen bei Synapse-admin",server_version:"Synapse Version",username_error:"Bitte vollst\xe4ndigen Nutzernamen angeben: '@user:domain'",protocol_error:"Die URL muss mit 'http://' oder 'https://' beginnen",url_error:"Keine g\xfcltige Matrix Server URL"},users:{invalid_user_id:"Muss eine vollst\xe4ndige Matrix Benutzer-ID sein, z.B. @benutzer_id:homeserver"},rooms:{details:"Raumdetails",tabs:{basic:"Allgemein",members:"Mitglieder",detail:"Details",permission:"Berechtigungen"},delete:{title:"Raum l\xf6schen",message:"Sind Sie sicher dass Sie den Raum l\xf6schen m\xf6chten? Diese Aktion kann nicht r\xfcckg\xe4ngig gemacht werden. Alle Nachrichten und Medien, die der Raum beinhaltet werden vom Server gel\xf6scht!"}},reports:{tabs:{basic:"Allgemein",detail:"Details"}}},import_users:{error:{at_entry:"Bei Eintrag %{entry}: %{message}",error:"Fehler",required_field:"Pflichtfeld '%{field}' fehlt",invalid_value:"Ung\xfcltiger Wert in Zeile %{row}. Feld '%{field}' darf nur die Werte 'true' oder 'false' enthalten",unreasonably_big:"Datei ist zu gro\xdf f\xfcr den Import (%{size} Megabytes)",already_in_progress:"Es l\xe4uft bereits ein Import",id_exits:"ID %{id} existiert bereits"},title:"Benutzer aus CSV importieren",goToPdf:"Gehe zum PDF",cards:{importstats:{header:"Benutzer importieren",users_total:"%{smart_count} Benutzer in der CSV Datei |||| %{smart_count} Benutzer in der CSV Datei",guest_count:"%{smart_count} Gast |||| %{smart_count} G\xe4ste",admin_count:"%{smart_count} Server Administrator |||| %{smart_count} Server Administratoren"},conflicts:{header:"Konfliktstrategie",mode:{stop:"Stoppe bei Fehlern",skip:"Zeige Fehler und \xfcberspringe fehlerhafte Eintr\xe4ge"}},ids:{header:"IDs",all_ids_present:"IDs in jedem Eintrag vorhanden",count_ids_present:"%{smart_count} Eintrag mit ID |||| %{smart_count} Eintr\xe4ge mit IDs",mode:{ignore:"Ignoriere IDs der CSV-Datei und erstelle neue",update:"Aktualisiere existierende Benutzer"}},passwords:{header:"Passw\xf6rter",all_passwords_present:"Passw\xf6rter in jedem Eintrag vorhanden",count_passwords_present:"%{smart_count} Eintrag mit Passwort |||| %{smart_count} Eintr\xe4ge mit Passw\xf6rtern",use_passwords:"Verwende Passw\xf6rter aus der CSV Datei"},upload:{header:"CSV Datei importieren",explanation:"Hier k\xf6nnen Sie eine Datei mit kommagetrennten Daten hochladen, die verwendet werden um Benutzer anzulegen oder zu \xe4ndern. Die Datei muss mindestens die Felder 'id' und 'displayname' enthalten. Hier k\xf6nnen Sie eine Beispieldatei herunterladen und anpassen: "},startImport:{simulate_only:"Nur simulieren",run_import:"Importieren"},results:{header:"Ergebnis",total:"%{smart_count} Eintrag insgesamt |||| %{smart_count} Eintr\xe4ge insgesamt",successful:"%{smart_count} Eintr\xe4ge erfolgreich importiert",skipped:"%{smart_count} Eintr\xe4ge \xfcbersprungen",download_skipped:"\xdcbersprungene Eintr\xe4ge herunterladen",with_error:"%{smart_count} Eintrag mit Fehlern ||| %{smart_count} Eintr\xe4ge mit Fehlern",simulated_only:"Import-Vorgang war nur simuliert"}}},resources:{users:{backtolist:"Zur\xfcck zur Liste",name:"Benutzer",email:"E-Mail",msisdn:"Telefon",threepid:"E-Mail / Telefon",fields:{avatar:"Avatar",id:"Benutzer-ID",name:"Name",is_guest:"Gast",admin:"Server Administrator",deactivated:"Deaktiviert",guests:"Zeige G\xe4ste",show_deactivated:"Zeige deaktivierte Benutzer",user_id:"Suche Benutzer",displayname:"Anzeigename",password:"Passwort",avatar_url:"Avatar URL",avatar_src:"Avatar",medium:"Medium",threepids:"3PIDs",address:"Adresse",creation_ts_ms:"Zeitpunkt der Erstellung",consent_version:"Zugestimmte Gesch\xe4ftsbedingungen"},helper:{deactivate:"Sie m\xfcssen ein Passwort angeben, um ein Konto wieder zu aktivieren.",erase:"DSGVO konformes L\xf6schen der Benutzerdaten"},action:{erase:"L\xf6sche Benutzerdaten"}},rooms:{name:"Raum |||| R\xe4ume",fields:{room_id:"Raum-ID",name:"Name",canonical_alias:"Alias",joined_members:"Mitglieder",joined_local_members:"Lokale Mitglieder",state_events:"Ereignisse",version:"Version",is_encrypted:"Verschl\xfcsselt",encryption:"Verschl\xfcsselungs-Algorithmus",federatable:"F\xf6\xadde\xadrierbar",public:"\xd6ffentlich",creator:"Ersteller",join_rules:"Beitrittsregeln",guest_access:"Gastzugriff",history_visibility:"Historie-Sichtbarkeit"},enums:{join_rules:{public:"\xd6ffentlich",knock:"Auf Anfrage",invite:"Nur auf Einladung",private:"Privat"},guest_access:{can_join:"G\xe4ste k\xf6nnen beitreten",forbidden:"G\xe4ste k\xf6nnen nicht beitreten"},history_visibility:{invited:"Ab Einladung",joined:"Ab Beitritt",shared:"Ab Setzen der Einstellung",world_readable:"Jeder"},unencrypted:"Nicht verschl\xfcsselt"}},reports:{name:"Ereignisbericht |||| Ereignisberichte",fields:{id:"ID",received_ts:"Meldezeit",user_id:"Meldender",name:"Raumname",score:"Wert",reason:"Grund",event_id:"Event-ID",event_json:{origin:"Ursprungsserver",origin_server_ts:"Sendezeit",type:"Eventtyp",content:{msgtype:"Inhaltstyp",body:"Nachrichteninhalt",format:"Nachrichtenformat",formatted_body:"Formatierter Nachrichteninhalt",algorithm:"Verschl\xfcsselungsalgorithmus"}}}},connections:{name:"Verbindungen",fields:{last_seen:"Datum",ip:"IP-Adresse",user_agent:"User Agent"}},devices:{name:"Ger\xe4t |||| Ger\xe4te",fields:{device_id:"Ger\xe4te-ID",display_name:"Ger\xe4tename",last_seen_ts:"Zeitstempel",last_seen_ip:"IP-Adresse"},action:{erase:{title:"Entferne %{id}",content:'M\xf6chten Sie das Ger\xe4t "%{name}" wirklich entfernen?',success:"Ger\xe4t erfolgreich entfernt.",failure:"Beim Entfernen ist ein Fehler aufgetreten."}}},users_media:{name:"Medien",fields:{media_id:"Medien ID",media_length:"Gr\xf6\xdfe",media_type:"Typ",upload_name:"Dateiname",quarantined_by:"Zur Quarant\xe4ne hinzugef\xfcgt",safe_from_quarantine:"Gesch\xfctzt vor Quarant\xe4ne",created_ts:"Erstellt",last_access_ts:"Letzter Zugriff"}},pushers:{name:"Pusher |||| Pushers",fields:{app:"App",app_display_name:"App-Anzeigename",app_id:"App ID",device_display_name:"Ger\xe4te-Anzeigename",kind:"Art",lang:"Sprache",profile_tag:"Profil-Tag",pushkey:"Pushkey",data:{url:"URL"}}},servernotices:{name:"Serverbenachrichtigungen",send:"Servernachricht versenden",fields:{body:"Nachricht"},action:{send:"Sende Nachricht",send_success:"Nachricht erfolgreich versendet.",send_failure:"Beim Versenden ist ein Fehler aufgetreten."},helper:{send:'Sendet eine Serverbenachrichtigung an die ausgew\xe4hlten Nutzer. Hierf\xfcr muss das Feature "Server Notices" auf dem Server aktiviert sein.'}},user_media_statistics:{name:"Dateien je Benutzer",fields:{media_count:"Anzahl der Dateien",media_length:"Gr\xf6\xdfe der Dateien"}}},ra:Object(p.a)(Object(p.a)({},Pa.a.ra),{},{auth:Object(p.a)(Object(p.a)({},Pa.a.ra.auth),{},{auth_check_error:"Anmeldung fehlgeschlagen"}),input:Object(p.a)(Object(p.a)({},Pa.a.ra.input),{},{password:Object(p.a)(Object(p.a)({},Pa.a.ra.input.password),{},{toggle_hidden:"Anzeigen",toggle_visible:"Verstecken"})}),notification:Object(p.a)(Object(p.a)({},Pa.a.ra.notifiaction),{},{logged_out:"Abgemeldet"}),page:Object(p.a)(Object(p.a)({},Pa.a.ra.page),{},{empty:"Keine Eintr\xe4ge vorhanden",invite:""})})}),xa=a(214),Da={de:Ia,en:Object(p.a)(Object(p.a)({},xa.a),{},{synapseadmin:{auth:{homeserver:"Homeserver",welcome:"Welcome to Navgurukul Admin",base_url:"Homeserver URL",username_error:"Please enter fully qualified user ID: '@user:domain'",protocol_error:"URL has to start with 'http://' or 'https://'",url_error:"Not a valid Matrix server URL"},users:{invalid_user_id:"Please enter a proper username."},rooms:{tabs:{basic:"Basic",members:"Members",detail:"Details",permission:"Permissions"},delete:{title:"Delete room",message:"Are you sure you want to delete the room? This cannot be undone. All messages and shared media in the room will be deleted from the server!"}},reports:{tabs:{basic:"Basic",detail:"Details"}}},import_users:{error:{at_entry:"At entry %{entry}: %{message}",error:"Error",required_field:"Required field '%{field}' is not present",invalid_value:"Invalid value on line %{row}. '%{field}' field may only be 'true' or 'false'",unreasonably_big:"Refused to load unreasonably big file of %{size} megabytes",already_in_progress:"An import run is already in progress",id_exits:"ID %{id} already present"},title:"Import users via CSV",goToPdf:"Go to PDF",cards:{importstats:{header:"Import users",users_total:"%{smart_count} user in CSV file |||| %{smart_count} users in CSV file",guest_count:"%{smart_count} guest |||| %{smart_count} guests",admin_count:"%{smart_count} admin |||| %{smart_count} admins"},conflicts:{header:"Conflict strategy",mode:{stop:"Stop on conflict",skip:"Show error and skip on conflict"}},ids:{header:"IDs",all_ids_present:"IDs present on every entry",count_ids_present:"%{smart_count} entry with ID |||| %{smart_count} entries with IDs",mode:{ignore:"Ignore IDs in CSV and create new ones",update:"Update existing records"}},passwords:{header:"Passwords",all_passwords_present:"Passwords present on every entry",count_passwords_present:"%{smart_count} entry with password |||| %{smart_count} entries with passwords",use_passwords:"Use passwords from CSV"},upload:{header:"Input CSV file",explanation:"Here you can upload a file with comma separated values that is processed to create or update users. The file must include the fields 'id' and 'displayname'. You can download and adapt an example file here: "},startImport:{simulate_only:"Simulate only",run_import:"Import"},results:{header:"Import results",total:"%{smart_count} entry in total |||| %{smart_count} entries in total",successful:"%{smart_count} entries successfully imported",skipped:"%{smart_count} entries skipped",download_skipped:"Download skipped records",with_error:"%{smart_count} entry with errors ||| %{smart_count} entries with errors",simulated_only:"Run was only simulated"}}},resources:{users:{backtolist:"Back to list",name:"User |||| Users",email:"Email",msisdn:"Phone",threepid:"Email / Phone",fields:{avatar:"Avatar",id:"User-ID",name:"Name",is_guest:"Guest",admin:"Server Administrator",deactivated:"Deactivated",guests:"Show guests",show_deactivated:"Show deactivated members",user_id:"Search Member",displayname:"Displayname",password:"Password",avatar_url:"Avatar URL",avatar_src:"Avatar",medium:"Medium",threepids:"3PIDs",address:"Address",creation_ts_ms:"Creation timestamp",consent_version:"Consent version"},helper:{deactivate:"You must provide a password to re-activate an account.",erase:"Mark the user as GDPR-erased"},action:{erase:"Erase member data"}},rooms:{name:"Room |||| Rooms",fields:{room_id:"Room-ID",name:"Name",canonical_alias:"Alias",joined_members:"Members",joined_local_members:"local members",state_events:"State events",version:"Version",is_encrypted:"Encrypted",encryption:"Encryption",federatable:"Federatable",public:"Public",creator:"Creator",join_rules:"Join rules",guest_access:"Guest access",history_visibility:"History visibility"},enums:{join_rules:{public:"Public",knock:"Knock",invite:"Invite",private:"Private"},guest_access:{can_join:"Guests can join",forbidden:"Guests can not join"},history_visibility:{invited:"Since invited",joined:"Since joined",shared:"Since shared",world_readable:"Anyone"},unencrypted:"Unencrypted"}},reports:{name:"Reported event |||| Reported events",fields:{id:"ID",received_ts:"report time",user_id:"announcer",name:"name of the room",score:"score",reason:"reason",event_id:"event ID",event_json:{origin:"origin server",origin_server_ts:"time of send",type:"event typ",content:{msgtype:"content type",body:"content",format:"format",formatted_body:"formatted content",algorithm:"algorithm"}}}},connections:{name:"Connections",fields:{last_seen:"Date",ip:"IP address",user_agent:"User agent"}},devices:{name:"Device |||| Devices",fields:{device_id:"Device-ID",display_name:"Device name",last_seen_ts:"Timestamp",last_seen_ip:"IP address"},action:{erase:{title:"Removing %{id}",content:'Are you sure you want to remove the device "%{name}"?',success:"Device successfully removed.",failure:"An error has occurred."}}},users_media:{name:"Media",fields:{media_id:"Media ID",media_length:"Lenght",media_type:"Type",upload_name:"File name",quarantined_by:"Quarantined by",safe_from_quarantine:"Safe from quarantine",created_ts:"Created",last_access_ts:"Last access"}},pushers:{name:"Pusher |||| Pushers",fields:{app:"App",app_display_name:"App display name",app_id:"App ID",device_display_name:"Device display name",kind:"Kind",lang:"Language",profile_tag:"Profile tag",pushkey:"Pushkey",data:{url:"URL"}}},servernotices:{name:"Server Notices",send:"Send server notices",fields:{body:"Message"},action:{send:"Send note",send_success:"Server notice successfully sent.",send_failure:"An error has occurred."},helper:{send:'Sends a server notice to the selected users. The feature "Server Notices" has to be activated at the server.'}},user_media_statistics:{name:"Users' media",fields:{media_count:"Media count",media_length:"Media length"}}}})},Aa=Object(u.a)((function(e){return Da[e]?Da[e]:Da.en}),Object(i.a)()),Ca=function(){return n.a.createElement(c.a,{loginPage:Yt,authProvider:m,dataProvider:y,i18nProvider:Aa,customRoutes:[n.a.createElement(ka.b,{key:"userImport",path:"/import_users",component:Oa})]},n.a.createElement(l.a,{name:"users",list:et,create:st,edit:it,icon:St.a}),n.a.createElement(l.a,{name:"rooms",list:Bt,show:zt,icon:M.a}),n.a.createElement(l.a,{name:"user_media_statistics",list:ra,icon:ea.a}),n.a.createElement(l.a,{name:"reports",list:Mt,show:Vt,icon:sa.a}),n.a.createElement(l.a,{name:"connections"}),n.a.createElement(l.a,{name:"devices"}),n.a.createElement(l.a,{name:"room_members"}),n.a.createElement(l.a,{name:"users_media"}),n.a.createElement(l.a,{name:"joined_rooms"}),n.a.createElement(l.a,{name:"pushers"}),n.a.createElement(l.a,{name:"servernotices"}))};o.a.render(n.a.createElement(Ca,null),document.getElementById("root"))}},[[453,1,2]]]);
//# sourceMappingURL=main.f6e24521.chunk.js.map